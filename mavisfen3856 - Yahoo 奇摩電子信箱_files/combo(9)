YUI.add("_shared_module_rte_well_content_fontnamesize_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_content_fontnamesize_fresh={base:'<div id="menu-fontnamesize" class="optionMenu rte-menu multicol"> <div id="menu-fontname" class="menu-group column"> <ul> {{intl_fonts}} <li data-action="fontname" data-value="{{str_rte_font_arial_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_arial_attr}};">{{str_rte_font_modern}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_verdana_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_verdana_attr}};">{{str_rte_font_modernwide}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_times_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_times_attr}};">{{str_rte_font_classic}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_bookman_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_bookman_attr}};">{{str_rte_font_classicwide}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_courier_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_courier_attr}};">{{str_rte_font_courier}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_garamond_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_garamond_attr}};">{{str_rte_font_garamond}}</span></a></li> <li data-action="fontname" data-value="{{str_rte_font_lucida_attr}}"><i class="icon"></i><a href="#"><span style="font-family: {{str_rte_font_lucida_attr}};">{{str_rte_font_lucida}}</span></a></li> </ul> </div> <div id="menu-fontsize" class="menu-group column"> <ul class="varht"> <li data-action="fontsize" data-value="1"><i class="icon"></i><a href="#"><span style="font-size:10px;">{{str_rte_font_size_xxsmall}}</span></a></li> <li data-action="fontsize" data-value="2"><i class="icon"></i><a href="#"><span style="font-size:13px;">{{str_rte_font_size_small}}</span></a></li> <li data-action="fontsize" data-value="3"><i class="icon"></i><a href="#"><span style="font-size:16px;">{{str_rte_font_size_medium}}</span></a></li> <li data-action="fontsize" data-value="5"><i class="icon"></i><a href="#"><span style="font-size:24px;">{{str_rte_font_size_large}}</span></a></li> <li data-action="fontsize" data-value="6"><i class="icon"></i><a href="#"><span style="font-size:32px;">{{str_rte_font_size_xlarge}}</span></a></li> <li data-action="fontsize" data-value="7"><i class="icon"></i><a href="#"><span style="font-size:48px;">{{str_rte_font_size_xxlarge}}</span></a></li> </ul> </div></div> ',intl_fonts:'<li data-action="fontname" data-value="{{font_value}}"><i class="icon"></i><a href="#"><span style="font-family: {{font_value}};">{{font_name}}</span></a></li> '};},"1.0.0");YUI.add("_shared_module_rte_well_tabs_compose_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_rte_well_tabs_compose_fresh={base:'<div class="rte"> <ul role="tablist" aria-describedby="tablist-instr"> </ul></div>'};},"1.0.0");YUI.add("_shared_module_toolbar_compose_fresh",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_toolbar_compose_fresh={base:'<div id="pagetoolbar" class="{{msgliststate}}"> <a class="btn" href="#" data-action="send" title="{{str_comp_send_attr}}">{{str_comp_send}}</a> <a class="btn btn-cancel-compose" href="#" data-action="cancelcompose" title="{{str_comp_cancel_attr}}">{{str_comp_cancel}}</a> <a class="btn savedraft {{isDirty}}" href="#" data-action="savedraft" title="{{str_comp_savedraft_attr}}">{{str_comp_savedraft}}</a></div>',isDirty:"disabled"};},"1.0.0");YUI.add("comms-ui-menu-base",function(e){function h(s){function A(){o._link=s.host,p=o._root=D(s.menu),o.dontFocus=s.dontFocus||!1,o.dontFocus||o._root.setAttribute("tabIndex",-1),o._evt=[],o._tmFocus=null,o._fixedMenuGroup=s.fixedMenuGroup,o._overlap=s.overlap||!1,o._offset=s.offset||{x:0,menuUpY:0,menuDownY:0},o.closeMenu=e.Lang.isUndefined(s.closeMenu)?!0:s.closeMenu,G(),_(p,o._link),o.setAriaAttrs(p),J(s.keys),K(s.enterAccel),O()}function O(e){var t=p.all("li");(e||t&&t.size()!==T||w[0]&&!w[0].inDoc())&&M(t)}function M(e){var t=e.size(),r=0,i,s,o,u,a,f;T=0,w=[];for(u=0;u<t;u++)a=e.item(u),T++,a.getStyle("display")!=="none"&&!a.ancestor().hasClass("disabled")&&(a.hasClass("disabled")?a.one(".icon-help")&&a.one(".help-text")&&w.push(a.one(".icon-help")):(f===undefined&&a.hasClass(n)&&(f=r),w.push(a),x&&(i=a.one("em"),i&&(s=i.get("childNodes"),s&&(o=s.item(0),o&&x===o.get("text")&&(S=a)))),r++));p.all("li."+n).removeClass(n),E=typeof f=="undefined"?-1:f}function _(e,t){t.set("aria-haspopup","true"),e.setAttrs({role:"menu","aria-labelledby":t.getAttribute("id"),"aria-hidden":"true"})}function D(t){var n,r=t instanceof e.Node;if(r||typeof t=="string")r?n=t:(f("body").append(t),n=f("body").get("lastChild"));return n.setStyles({position:"absolute",zIndex:u}),n}function P(e,t){var n,r,i,s,u=f("window"),a=u.get("winHeight"),p=t,v,b,w="",S,x,T,C=o._fixedMenuGroup,k=null;if(e===o._root&&(!d||d())&&o._link.inDoc()){n=o._link.get("region");if(m)y&&(j(o._link),p=null),a>c&&(S=a-c),S<l&&(S=l),e.setStyles({maxHeight:S,overflowX:"hidden",overflowY:"auto",opacity:0}),r=F(p),g=t&&t.target||g;else{C&&(k=e.one("#"+C.menu),k.setStyle("maxHeight",C.height+"px")),e.setStyles({visibility:"hidden",display:"block",top:0,maxHeight:"none",opacity:0}),i=e.get("region").height,s=u.get("scrollTop"),x=n.top-s,T=a-(n.bottom-s),T>=x?w="below":i>T&&(w="above"),S=o._setMaxHeight(x,T,i,w),r=o._setPosition(n,w,i,S),e.setStyles({maxHeight:S,overflowX:"hidden",overflowY:"auto"}),k&&S<e.get("scrollHeight")&&k.setStyle("maxHeight","none"),v=e.get("winWidth"),v&&n.left+e.get("region").width>v&&(r.left="auto",r.right="0px");if(h||N)b=Math.max(n.left+n.width-e.get("region").width,0),r.left=b+"px",v>n.left+n.width&&(r.right="auto");r.visibility="visible"}O(),E=-1,e.setStyles(r),e.setStyle("opacity",1),o.dontFocus||e.focus()}}function H(e,t,n,r){var i={top:e.bottom,left:e.left,right:"auto"},s;return t==="below"?(o._overlap&&(i.top=e.top+o._offset.menuDownY),i.left+=o._offset.x):t==="above"?(o._overlap?s=e.bottom+o._offset.menuUpY:s=e.top,i.left+=o._offset.x,i.top=s-(n<r?n:r)+"px"):(o._overlap&&(i.top=e.top),i.left+=o._offset.x,i.top+=o._offset.menuDownY),i}function B(e,t,n,r){var i;return r==="below"?(i=t-c,i<l&&(i=l)):r==="above"?(i=e-c,i<l&&(i=l)):i=n,i}function j(t){var n=t.getXY(),r=parseInt(t.getStyle("height"),10)||20;return v=e.Lang.isNumber(r)?[n[0],n[1]+r]:n,v}function F(e){var t=o._root,n,r,i,s,u,a=15,f,l=o._link.get("winHeight"),c=0;return r=e?e.clientX:v[0],i=e?e.clientY:v[1],t.setStyles({display:"block",bottom:"auto",left:-1e3,right:"auto"}),f=parseInt(t.get("region").height,10),s=l-a-i<f,u=o._link.get("winWidth")-a-r<parseInt(t.get("region").width,10),n={top:i+c,left:r},s&&(n.top=l+c-f-a),u&&(n.left="auto",n.right=a+"px"),n}function I(e){e.setStyle("display","none"),e.removeClass(r),e.hasClass(t)&&e.removeClass(t),e!==o._root&&e.get("parentNode").removeClass(i),w[E]&&w[E].removeClass(n)}function q(t){var n;if(t){n=e.Node.getDOMNode(e.one(t)).nodeName,n=n.toUpperCase();switch(n){case"LI":return t;default:return t.ancestor("li")}}}function R(t){var n,r;n=q(t.target);if(!n)return;r=E,E=e.Array.indexOf(w,n),E>=0?X(r,E):E=r}function U(t){var n=E,r=t.target,i=e.one(document.activeElement),s,u,a;L=!0;switch(t.keyCode){case 38:case 40:t.halt(),W(t,n),s=w[E];if(!i||!i.hasClass("focus-node")){a=s&&s.one(".focus-node");if(!a||a.getStyle("display")==="none")a=s.one("a")||s;a&&a.focus()}break;case 27:o.hide(),t.halt(),m||(u=o._link.one("a")||o._link,u&&u.focus());break;case 13:e.use("node-event-simulate",function(){r.get("nodeName").toLowerCase()==="a"?(r.simulate("click"),t.halt(),o.hide()):r.hasClass("icon-help")?(r.simulate("click"),t.halt()):S&&(S.one("a").simulate("click"),o.hide())});break;default:b.length>0&&V(t)?o.hide(t):t.halt()}}function z(e){if(L){L=!1;return}switch(e.keyCode){case 38:case 40:e.halt()}}function W(e,t){e.keyCode===40?(E=E===w.length-1?0:E+1,X(t,E,!0)):e.keyCode===38&&(E=E<=0?w.length-1:E-1,X(t,E,!0))}function X(e,t,r){var i=this,s,o;if(s=w[e]){s.removeClass(n);if(!i.dontFocus){o=s.one(".focus-node");if(!o||o.getStyle("display")==="none")o=s.one("a")||s;o&&o.set("tabIndex",-1)}}if(s=w[t]){s.addClass(n);if(!i.dontFocus){o=s.one(".focus-node");if(!o||o.getStyle("display")==="none")o=s.one("a")||s;o&&(o.set("tabIndex",0),r&&o.scrollIntoView())}}}function V(t){var n,r,i,s,o,u,f;if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey){for(s=0;s<b.length;s++)if((r=(b[s]+"").split("+"))&&r.length>1){u=0;for(o=0;o<r.length;o++){i=r[o],f=i.toLowerCase()==="cmd"?"metaKey":i.toLowerCase()+"Key";if(a.isNumber(i*1)&&i*1!==t.keyCode||!a.isNumber(i*1)&&!t[f])break;u++}if(r.length===u){n=!0;break}}}else e.Array.indexOf(b,t.keyCode)>-1&&(n=!0);return n}function $(e){b=e}function J(e){a.isArray(e)?$(e):a.isFunction(e)?e.call(this,$):a.isString(e)&&$([e])}function K(e){e&&(a.isFunction(e)?e.call(this,Q):a.isString(e)&&Q([e]))}function Q(e){x=e}function G(){function t(){if(!o.isVisible())return;o.tmFocus&&o.tmFocus.cancel(),o._tmFocus=a.later(0,o,function(){try{var t=e.one("document").get("activeElement"),n=t.get("nodeName"),r;n!=="EMBED"&&n!=="OBJECT"&&(r=t.getAttribute("embed-type"),r!=="menu"&&o.hide())}catch(i){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-comms-shared-src-ui-menu-js-menu:1",i,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-comms-shared-src-ui-menu-js-menu:1")}})}m?(o._evt.push(o._link.on("mousedown",function(){o.hide()},o)),o._evt.push(o._link.
on("contextmenu",function(e){o.toggle(e)},o))):(o._evt.push(o._link.on("mousedown",function(e){e.halt(),o.toggle(e)},o)),o._evt.push(o._link.on("keydown",function(e){if(e.keyCode===13||e.keyCode===32)e.preventDefault(),o.toggle(e)},o))),o._evt.push(o._root.on("blur",t,o)),o._evt.push(e.on("windowresize",function(){var n=e.one("body").get("clientWidth"),r=e.one("body").get("clientHeight");if(n!==C||r!==k)C=n,k=r,t()},o)),o._evt.push(o._root.on("focus",function(){o._tmFocus&&o._tmFocus.cancel()},o)),o._evt.push(o._root.on("keydown",U,o)),o._evt.push(o._root.on("keypress",z,o)),o._evt.push(o._root.on("mouseover",R,o)),o._evt.push(o._root.on("menu:changed",function(){M(p.all("li"))}))}function Z(){return p}function et(){return g}var o=this,h=f("body").getStyle("direction")==="rtl",p,d=s.button_enabled,v=s.xy||[0,0],m=s.isContext||!1,g=s.contextTarget||null,y=s.alignToTarget||!1,b=[],w=[],E,S=null,x=null,T=-1,N=s.flushLeft,C=e.one("body").get("clientWidth"),k=e.one("body").get("clientHeight"),L=!1;A(),e.mix(o,{setVisible:P,_setPosition:H,_setMaxHeight:B,hideMenu:I,checkDescendants:O,getMenuNode:Z,getContextTarget:et,selectMenuItem:function(){this.simulate&&this.simulate("mouseover")},getHost:function(){return o._link}})}var t="menu-active",n="menu-active-item",r="menu-visible",i="menu-visible-path",s="role",o="aria-hidden",u=15500,a=e.Lang,f=e.one,l=80,c=40;h.prototype={_detachHdlr:null,setAriaAttrs:function(e){var t=this;e.all("ul").set(s,"group"),e.all("li,div,h4").each(function(e){e.get(s)||e.set(s,"presentation")});var n=e.all("a");n.set(s,"menuitem"),t.dontFocus&&n.set("tabIndex",-1)},show:function(e){var n=this,r=n._root,i;n.isVisible()||(r.addClass(t),n.setVisible(r,e),r.set(o,!1),n.attachClickHdlr(!0),r.fire("menu:state",{state:"show",link:n._link,context:e&&e.context}))},hide:function(e){var t=this,n,r=t._root,i=e?e.type:null;t.isVisible()&&t.closeMenu&&(r.set(o,!0),!t.dontFocus&&(n=r.one('a[tabindex="0"]'))&&n.set("tabIndex",-1),t.hideMenu(r),r.fire("menu:state",{state:"hide",link:t._link,origEvtType:i})),t._detachHdlr&&t.closeMenu&&t.attachClickHdlr(!1)},toggle:function(e){this[this.isVisible()?"hide":"show"](e)},attachClickHdlr:function(t){var n=this;n._detachHdlr&&(n._detachHdlr.detach(),n._detachHdlr=null);if(t===!1)return;n._detachHdlr=e.on("click",function(t){var r=t.target,i=e.Node.getDOMNode(r),s=n._link.contains(r)||n._link===r,o=!1;e.UA.webkit&&!e.UA.chrome&&i.nodeName==="UL"&&(o=!0),t.preventDefault(),!o&&!s&&(n._tmFocus&&n._tmFocus.cancel(),n._root&&n._root._node&&n.hide())},document),e.UA.webkit&&!e.UA.chrome&&n._root.on("mousedown",function(t){var n=t.target,r=e.Node.getDOMNode(n).nodeName;r!=="A"&&(n=n.ancestor("a")),n&&n.focus()})},destroy:function(){var t,n=this;n.attachClickHdlr(!1);for(t in n._evt)e.detach(n._evt[t])},isVisible:function(){var t=this._root;return!t._node&&e.one(".dummy_menu_node")&&(t=e.one(".dummy_menu_node").menu._root),t._node?t.getStyle("display")!=="none":!1}},h.NAME="Menu",h.NS="menu",e.namespace("Plugin").Menu=h},"1.0.0");
YUI.add("_shared_module_offscreen_bin_menus_loading",function(A){A.namespace("ui.Templates");A.ui.Templates._shared_module_offscreen_bin_menus_loading={base:'<div role = "menu" id = "loadingMenu" class="optionMenu" aria-live="polite"> <ul> <li><a href="#"><span>{{str_galaxy_status_loading}}</span></a></li> </ul></div>'};},"1.0.0");YUI.add('contacts_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_form_placeholder_first":"\u540d","str_form_placeholder_middle":"\u4e2d\u9593\u540d","str_form_placeholder_last":"\u59d3","str_cont_edit_cont":"","str_cont_add_to_cont":"\u52a0\u5230\u901a\u8a0a\u9304","str_help":"\u670d\u52d9\u4e2d\u5fc3","str_cont_lbl_add_xtra_email":"\u65b0\u589e\u53e6\u4e00\u96fb\u90f5\u5730\u5740","str_cont_lbl_remove_xtra_email":"\u79fb\u9664\u96fb\u5b50\u4fe1\u7bb1\u5e33\u865f","str_form_lbl_email":"\u96fb\u5b50\u4fe1\u4ef6\uff1a","str_form_lbl_email_email":"\u96fb\u5b50\u90f5\u4ef6","str_form_lbl_email_work":"\u516c\u53f8\u96fb\u5b50\u4fe1\u7bb1","str_form_lbl_email_home":"\u500b\u4eba\u96fb\u5b50\u4fe1\u7bb1","str_form_lbl_im_dont_add":"\u4e0d\u52a0\u5165 {{str_branding_messenger}}","str_cont_lbl_add_xtra_im":"\u65b0\u589e\u53e6\u4e00\u5373\u6642\u901a\u5e33\u865f","str_cont_lbl_remove_xtra_im":"\u79fb\u9664\u5373\u6642\u901a\u5e33\u865f","str_form_lbl_im":"\u5373\u6642\u901a\u5e33\u865f\uff1a","str_form_lbl_im_ymsgr":"{{str_branding_messenger}}","str_form_lbl_im_msn":"Windows Live (MSN)","str_form_lbl_im_aol":"AOL\/AIM","str_form_lbl_im_gtalk":"GTalk","str_form_lbl_im_icq":"ICQ","str_form_lbl_im_irc":"IRC","str_form_lbl_im_qq":"QQ","str_form_lbl_im_skype":"Skype","str_form_lbl_im_ali":"Ali Wangwang","str_form_lbl_im_yjapan":"Yahoo \u65e5\u672c","str_form_lbl_im_jabber":"Jabber","str_form_lbl_im_mslcs":"Microsoft LCS","str_form_lbl_im_lotus":"Lotus Sametime","str_cont_lbl_add_xtra_phone":"\u65b0\u589e\u53e6\u4e00\u96fb\u8a71\u865f\u78bc","str_cont_lbl_remove_xtra_phone":"\u79fb\u9664\u96fb\u8a71\u865f\u78bc","str_form_lbl_phone":"\u96fb\u8a71\u865f\u78bc\uff1a","str_form_lbl_phone_phone":"\u96fb\u8a71","str_form_lbl_phone_mobile":"\u624b\u6a5f","str_form_lbl_phone_home":"\u4f4f\u5bb6\u96fb\u8a71","str_form_lbl_phone_work":"\u516c\u53f8\u96fb\u8a71","str_form_lbl_phone_pager":"\u547c\u53eb\u5668","str_form_lbl_phone_fax":"\u50b3\u771f\u96fb\u8a71","str_cont_add_contact_confirm_short":"\u5df2\u52a0\u5165\u8a72\u9023\u7d61\u4eba\u3002","str_cont_add_contact_confirm_update":"\u806f\u7d61\u4eba\u8cc7\u6599\u5df2\u66f4\u65b0\u3002","str_cont_add_contact_confirm_long":"\u5c07\u6703\u6536\u5230\u4f60\u60f3\u8207\u5176\u5206\u4eab\u806f\u7d61\u8cc7\u8a0a\u7684\u4fe1\u4ef6\u3002","str_cont_add_to_cont_confirm":"\u65b0\u589e\u7684\u9023\u7d61\u4eba","str_cont_choose_one_selected":"\u5df2\u9078\u53d6 1 \u4f4d\u6536\u4ef6\u4eba","str_cont_all_contacts":"\u6240\u6709\u9023\u7d61\u4eba","str_cont_choose_contacts":"\u9078\u64c7\u9023\u7d61\u4eba","str_cont_add_contacts_to_list":"\u65b0\u589e\u9023\u7d61\u4eba\u81f3\u7fa4\u7d44\u540d\u55ae {{list_name}}","str_cont_look_for_filter":"\u6aa2\u8996\uff1a","str_con_list_look_for_attr":"\u8f38\u5165\u8981\u641c\u5c0b\u7684\u4eba\u540d\u6216\u5730\u5740","str_cont_look_for":"\u5c0b\u627e...","str_cont_list_select_all_cont":"\u9078\u64c7\u5168\u90e8","str_cont_search_no_contacts_found":"\u627e\u4e0d\u5230\u9023\u7d61\u4eba","str_cont_loading":"\u6b63\u5728\u8f09\u5165\u901a\u8a0a\u9304...","str_cont_choose_select_count":"\u5df2\u9078\u53d6 {{contacts_selected}} \u9023\u7d61\u4eba","str_cont_choose_none_selected":"\u5df2\u9078\u53d6 0 \u4f4d\u9023\u7d61\u4eba","str_contact_card_copy_mac":"Cmd+C","str_contact_card_copy_pc":"Ctrl+C","str_menu_email_history":"\u5f9e\u4e0b\u5217\u4f4d\u7f6e\u641c\u5c0b\u90f5\u4ef6...","str_menu_edit_address":"\u7de8\u8f2f\u5730\u5740","str_menu_copy_address":"\u8907\u88fd\u5730\u5740","str_menu_remove_address":"\u79fb\u9664\u5730\u5740","str_menu_view_contact_details":"\u6aa2\u8996\u806f\u7d61\u4eba\u8a73\u7d30\u8cc7\u6599","str_menu_add_to_contacts":"\u52a0\u5230\u901a\u8a0a\u9304...","str_menu_new_message":"\u7de8\u5beb\u65b0\u4fe1","str_menu_new_instant_message":"\u65b0\u5373\u6642\u8a0a\u606f","str_cont_btn_stop_following_attr":"\u505c\u6b62\u8ddf\u96a8","str_cont_btn_stop_following":"\u505c\u6b62\u8ddf\u96a8","str_cont_btn_follow_attr":"\u8ddf\u96a8","str_cont_btn_follow":"\u8ddf\u96a8","str_cont_btn_following":"\u8ddf\u96a8","str_hovercard_phone_src":"\u5df2\u4f7f\u7528\u96fb\u5b50\u4fe1\u4ef6\u50b3\u9001","str_hovercard_facebook_profile":"Facebook \u500b\u4eba\u6a94\u6848","str_hovercard_linkedin_profile":"Linkedin \u500b\u4eba\u6a94\u6848","str_hovercard_twitter_profile":"Twitter \u500b\u4eba\u6a94\u6848","str_hovercard_backyard_profile":"Backyard \u500b\u4eba\u6a94\u6848","str_hovercard_flickr_profile":"Flickr \u500b\u4eba\u6a94\u6848","str_people_card_search_msgs":"\u641c\u5c0b\u96fb\u5b50\u4fe1\u4ef6","str_people_card_msgs":"\u641c\u5c0b\u96fb\u5b50\u4fe1\u4ef6","str_hovercard_copy_email":"\u8907\u88fd\u96fb\u5b50\u4fe1\u7bb1","str_hovercard_copy_all":"\u8907\u88fd\u6240\u6709\u8a73\u7d30\u8cc7\u6599","str_hovercard_fb_dismiss":"\u5ffd\u7565","str_hovercard_get_photos":"\u53d6\u5f97\u76f8\u7247","str_people_card_new_compose":"\u64b0\u5beb\u65b0\u96fb\u5b50\u4fe1\u4ef6","str_people_card_add_contacts":"\u65b0\u589e\u81f3\u806f\u7d61\u4eba","str_hovercard_edit_card":"\u7de8\u8f2f\u8cc7\u6599","str_hovercard_home_email":"\u4f4f\u5bb6\u96fb\u5b50\u4fe1\u4ef6","str_hovercard_work_email":"\u516c\u53f8\u96fb\u5b50\u4fe1\u4ef6","str_hovercard_mobile":"\u624b\u6a5f","str_hovercard_home_phone":"\u4f4f\u5bb6\u96fb\u8a71","str_hovercard_work_phone":"\u516c\u53f8\u96fb\u8a71","str_hovercard_pager":"\u50b3\u547c\u5668","str_hovercard_fax":"\u50b3\u771f","str_hovercard_email":"\u96fb\u5b50\u4fe1\u4ef6","str_hovercard_phone":"\u96fb\u8a71","str_hovercard_add_successful":"\u5df2\u6210\u529f\u65b0\u589e\u806f\u7d61\u4eba\u3002","str_hovercard_edit_successful":"\u5df2\u6210\u529f\u66f4\u65b0\u5361\u7247\u8a73\u7d30\u8cc7\u6599\u3002","str_hovercard_edit_details":"\u7de8\u8f2f\u8a73\u7d30\u8cc7\u6599","str_hovercard_for_email":"\u7de8\u8f2f {{email}} \u7684\u8cc7\u6599","str_hovercard_edit_error":"\u7121\u6cd5\u7de8\u8f2f\u806f\u7d61\u4eba\u8a73\u7d30\u8cc7\u6599\u3002 \u8acb\u7a0d\u5f8c\u518d\u8a66\u4e00\u6b21\u3002","str_hovercard_remove_image":"\u79fb\u9664\u9019\u4f4d\u806f\u7d61\u4eba\u7684\u5716\u7247","str_hovercard_lbl_name":"\u540d\u7a31","str_hovercard_lbl_company":"\u516c\u53f8","str_hovercard_lbl_position":"\u8077\u4f4d","str_hovercard_lbl_location":"\u4f4d\u7f6e","str_hovercard_show_more":"\u986f\u793a\u66f4\u591a","str_hovercard_edit_learn_how":"\u9019\u662f\u65b0\u7684\u806f\u7d61\u4eba\u3002\u6bcf\u7576\u60a8\u5132\u5b58\u4efb\u4f55\u8b8a\u66f4\uff0c\u6211\u5011\u6703\u81ea\u52d5\u5c07\u8b8a\u66f4\u7684\u5167\u5bb9\u65b0\u589e\u81f3\u901a\u8a0a\u9304\u3002<a href=\"{{str_cfg_url_hovercard_help}}\" target=\"_blank\">\u9019\u662f\u4ec0\u9ebc\uff1f<\/a>","str_hovercard_add_email":"\u65b0\u589e\u96fb\u5b50\u4fe1\u4ef6","str_hovercard_remove":"\u79fb\u9664","str_hovercard_add_phone":"\u65b0\u589e\u96fb\u8a71","str_hovercard_yahoo_messenger":"Yahoo\u5947\u6469\u5373\u6642\u901a","str_hovercard_add_contact":"\u65b0\u589e\u806f\u7d61\u4eba","str_hovercard_add_error":"\u7121\u6cd5\u65b0\u589e\u806f\u7d61\u4eba\u3002 \u8acb\u7a0d\u5f8c\u518d\u8a66\u4e00\u6b21\u3002","str_hovercard_lbl_firstname":"\u540d\u5b57","str_hovercard_lbl_lastname":"\u59d3\u6c0f","str_hovercard_new_callerid":"\u65b0\u529f\u80fd\uff01 \u96fb\u5b50\u4fe1\u4ef6\u7684\u4f86\u96fb\u8005 ID"});
}, '1.0.0');YUI.add("common-ui-menu-helper",function(e){e.namespace("common.ui");var t=function(){function t(t,n,r){var i,s=e.one("#loadingMenu");t.menu&&t.unplug(e.Plugin.Menu),n.menu&&n.menu instanceof e.Node&&n.menu.detachAll(),n=n||{},s&&s.remove(),t.plug(e.Plugin.Menu,n),t.menuCreated=!0;if(t.menu){t.menu._root.on("menu:state",function(t){e.fire("menu:display-state",{state:t.state,intl:NeoConfig.intl})}),e.on("menu:display-menu-close",function(){t&&t.menu&&t.menu.hide()}),i=t.menu.getMenuNode(),i.delegate("click",function(r){var s=e.common.Utils.getDataAction(r),o=s.action,u,a=s.node,f=r.currentTarget.one("a");if(!o||a&&a.hasClass("disabled")){r.halt();return}f&&(!f.getAttribute("href")||"#"===f.getAttribute("href"))&&r.preventDefault();if(r.target.hasClass("icon-help")){u=r.target.get("parentNode").get("parentNode").one(".help-text");if(u){e.Node(r._currentTarget).all(".help-text").each(function(e){e!==u&&e.addClass("hidden")}),u.toggleClass("hidden"),r.halt();return}}n.allowSimClick&&i._node.click(),i.fire("menuSelected",{dataAction:o,item:a});try{t.menu&&t.menu.hide(),n.isContext?i.blur():n.blur||(t.one("a")?t.one("a").focus():t.focus())}catch(l){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-menuhelper-menuhelper:1",l,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-menuhelper-menuhelper:1")}},"li, dd a"),e.fire("menu:created",i),!n.cbafter&&r&&r(),t.menu.show();if(!n.cbafter)return}r&&r()}function n(t,n){e.Lang.later(500,this,function(){var i=n?n.isContext?!0:!1:!1,s=t.get("region"),o=NeoConfig.isRTL,u=e.ui.Templates._shared_module_offscreen_bin_menus_loading,a=e.one("window"),f,l,c,h,p,d;if(e.one("#loadingMenu")||t.menuCreated)return;e.one("body").append(e.common.Utils.substitute(u.base,null,0,0,strings)),c=e.one("body").get("lastChild"),i?(f=n.xy||t.getXY(),l=r(t,c,f)):(c.setStyles({position:"absolute",visibility:"hidden",display:"block",top:0}),l={top:s.bottom,left:s.left,right:"auto"},h=c.get("region").height,p=a.get("scrollTop"),d=a.get("winHeight"),h>d-(s.bottom-p)&&h<s.top-p&&(l.top=s.top-h+"px"),o&&(l.left=s.left+s.width-c.get("region").width+"px"),l.visibility="visible"),l.zIndex=4e3,c.setStyles(l)})}function r(t,n,r){var i,s=r[0],o=r[1],u,a,f=15,l,c=t.get("winHeight"),h=e.one("window").get("scrollTop")||0;return n.setStyles({display:"block",bottom:"auto",left:-1e3,right:"auto",position:"absolute"}),l=parseInt(n.get("region").height,10),u=c-f-o<l,a=t.get("docWidth")-f-s<parseInt(n.get("region").width,10),i={top:o+h,left:s},u&&(i.top=c+h-l-f),a&&(i.left="auto",i.right=f+"px"),i}e.mix(this,{create:t,createLoadingMenu:n})};e.common.ui.MenuHelper=new t},"1.0.0",{requires:["common-utils","comms-ui-menu-base","_shared_module_offscreen_bin_menus_loading"]});
YUI.add("comms-intl-bidi",function(A){A.mix(A.namespace("Intl"),{_rtlChars:"[\uD83A\uD83B][\uDC00-\uDFFF]|[\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05FF\u0604\u0605\u0608\u060B\u060D\u061B-\u064A\u065F\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070E\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u082E-\u08FF\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFC\uFDFE\uFDFF\uFE70-\uFEFE]|\uD803[\uDC00-\uDE5F\uDE7F-\uDFFF]|\uD802[\uDC00-\uDD1E\uDD20-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDF38\uDF40-\uDFFF]",_neutralChars:"[\uDB40-\uDB43][\uDC00-\uDFFF]|\uD802[\uDD1F\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDF39-\uDF3F]|\uD804[\uDC80\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA]|\uD803[\uDE60-\uDE7E]|\uD800[\uDD01\uDD40-\uDD8A\uDD90-\uDD9B\uDDFD]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDD00-\uDD0A]|[\u0000-\u0040\u005B-\u0060\u007B-\u00A9\u00AB-\u00B4\u00B6-\u00B9\u00BB-\u00BF\u00D7\u00F7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0600-\u0603\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065E\u0660-\u066C\u0670\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0900-\u0902\u093C\u0941-\u0948\u094D\u0951-\u0955\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0CF1\u0CF2\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135F\u1390-\u1399\u1400\u1680\u169B\u169C\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180E\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1DC0-\u1DE6\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200D\u2010-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20B8\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189\u2190-\u2335\u237B-\u2394\u2396-\u23E8\u2400-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u26CD\u26CF-\u26E1\u26E3\u26E8-\u26FF\u2701-\u2704\u2706-\u2709\u270C-\u2727\u2729-\u274B\u274D\u274F-\u2752\u2756-\u275E\u2761-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u27CA\u27CC\u27D0-\u27FF\u2900-\u2B4C\u2B50-\u2B59\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2DE0-\u2E31\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA673\uA67C-\uA67F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82B\uA838\uA839\uA874-\uA877\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE5\uABE8\uABED\uFB1E\uFB29\uFD3E\uFD3F\uFDD0-\uFDEF\uFDFD\uFE00-\uFE19\uFE20-\uFE26\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF0-\uFFFF]|\uD835[\uDEDB\uDF15\uDF4F\uDF89\uDFC3\uDFCE-\uDFFF]|\uD834[\uDD67-\uDD69\uDD73-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE00-\uDE45\uDF00-\uDF56]",_initializeBidiPatterns:function(){this._rtlPattern=new RegExp("^(?:"+this._neutralChars+")*(?:"+this._rtlChars+")");this._neturalPattern=new RegExp("^(?:"+this._neutralChars+")*$");},setBidiChars:function(B,C){if(B!==undefined){this._rtlChars=B;}if(C!==undefined){this._neutralChars=C;}this._initializeBidiPatterns();},detectDirection:function(C,B){if(this._rtlPattern.test(C)){return"rtl";}else{if(B==="ltr"){return"ltr";}else{if(this._neturalPattern.test(C)){if(B==="rtl"){return"rtl";}else{return"";}}else{return"ltr";}}}}});A.Intl._initializeBidiPatterns();A.mix(A.namespace("Intl"),{bidiDirection:A.Intl.detectDirection});},"1.0.0");/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("classnamemanager",function(e,t){var n="classNamePrefix",r="classNameDelimiter",i=e.config;i[n]=i[n]||"yui3",i[r]=i[r]||"-",e.ClassNameManager=function(){var t=i[n],s=i[r];return{getClassName:e.cached(function(){var n=e.Array(arguments);return n[n.length-1]!==!0?n.unshift(t):n.pop(),n.join(s)})}}()},"3.16.0",{requires:["yui-base"]});
YUI.add("comms-node-setdir",function(B){var A={ltr:"rtl",rtl:"ltr"};B.Node.addMethod("setDirection",function(E,F){var D,C;if(F==="ltr"||F==="rtl"){D=B.one(E);C=D.getStyle("direction");D.setAttribute("dir",F);D.setStyle("direction","");D.removeClass(B.ClassNameManager.getClassName(A[F]));D.addClass(B.ClassNameManager.getClassName(F));if(F!==C){B.fire("directionChange",{target:D,dir:F});}}return D;});},"1.0.0",{requires:["classnamemanager","node-base","node-style"]});YUI.add("comms-bidi-textentry",function(B){function A(){A.superclass.constructor.apply(this,arguments);}A.NS="bidiTextEntry";A.NAME="bidiTextEntry";B.extend(A,B.Plugin.Base,{initializer:function(C){var E=this.get("host"),D;E.BIDI_DISABLED=false;E.PREVIOUS_DIRECTION=E.getStyle("direction");if(!E.PREVIOUS_DIRECTION){E.PREVIOUS_DIRECTION=E.getAttribute("dir");}E.DETECT_DEFAULT_DIRECTION=(C&&C.detect_default_direction===true);if(!E.DETECT_DEFAULT_DIRECTION){E.setDirection(E.PREVIOUS_DIRECTION);}else{D=B.Intl.detectDirection(E.get("value"));E.setDirection(D);E.PREVIOUS_DIRECTION=D;}this.afterHostEvent("valueChange",function(H){var G=this.get("host"),J,I=G.BIDI_DISABLED,F=G.PREVIOUS_DIRECTION,K;if(I){return;}K=G.getAttribute("dir");if(F!==K){G.BIDI_DISABLED=true;return;}J=B.Intl.detectDirection(H.newVal);if(J==="rtl"||J==="ltr"){G.PREVIOUS_DIRECTION=J;}G.setDirection(J);});}});B.namespace("Plugin");B.Plugin.BidiTextEntry=A;B.Plugin.BidiTextInput=A;},"1.0.0",{requires:["plugin","event-valuechange","comms-intl-bidi","comms-node-setdir"]});/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css3",function(e,t){e.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,e.Selector._getNth=function(t,n,r,i){e.Selector._reNth.test(n);var s=parseInt(RegExp.$1,10),o=RegExp.$2,u=RegExp.$3,a=parseInt(RegExp.$4,10)||0,f=[],l=e.DOM._children(t.parentNode,r),c;u?(s=2,c="+",o="n",a=u==="odd"?1:0):isNaN(s)&&(s=o?1:0);if(s===0)return i&&(a=l.length-a+1),l[a-1]===t?!0:!1;s<0&&(i=!!i,s=Math.abs(s));if(!i){for(var h=a-1,p=l.length;h<p;h+=s)if(h>=0&&l[h]===t)return!0}else for(var h=l.length-a,p=l.length;h>=0;h-=s)if(h<p&&l[h]===t)return!0;return!1},e.mix(e.Selector.pseudos,{root:function(e){return e===e.ownerDocument.documentElement},"nth-child":function(t,n){return e.Selector._getNth(t,n)},"nth-last-child":function(t,n){return e.Selector._getNth(t,n,null,!0)},"nth-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName)},"nth-last-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName,!0)},"last-child":function(t){var n=e.DOM._children(t.parentNode);return n[n.length-1]===t},"first-of-type":function(t){return e.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n[n.length-1]===t},"only-child":function(t){var n=e.DOM._children(t.parentNode);return n.length===1&&n[0]===t},"only-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n.length===1&&n[0]===t},empty:function(e){return e.childNodes.length===0},not:function(t,n){return!e.Selector.test(t,n)},contains:function(e,t){var n=e.innerText||e.textContent||"";return n.indexOf(t)>-1},checked:function(e){return e.checked===!0||e.selected===!0},enabled:function(e){return e.disabled!==undefined&&!e.disabled},disabled:function(e){return e.disabled}}),e.mix(e.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),e.Selector.combinators["~"]={axis:"previousSibling"}},"3.16.0",{requires:["selector-native","selector-css2"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("frame",function(e,t){var n=e.Lang,r="contentready",i="host",s=function(){s.superclass.constructor.apply(this,arguments)};e.extend(s,e.Plugin.Base,{_ready:null,_rendered:null,_iframe:null,_instance:null,_create:function(t){var n,r="",i,o=this.get("src")===s.ATTRS.src.value,u=this.get("extracss")?'<style id="extra_css">'+this.get("extracss")+"</style>":"";this._iframe=e.one(e.config.doc.createElement("iframe")),this._iframe.setAttrs(s.IFRAME_ATTRS),this._iframe.setStyle("visibility","hidden"),this._iframe.set("src",this.get("src")),this.get("container").append(this._iframe),this._iframe.set("height","99%"),o&&(r=e.Lang.sub(s.PAGE_HTML,{DIR:this.get("dir"),LANG:this.get("lang"),TITLE:this.get("title"),META:s.META,LINKED_CSS:this.get("linkedcss"),CONTENT:this.get("content"),BASE_HREF:this.get("basehref"),DEFAULT_CSS:s.DEFAULT_CSS,EXTRA_CSS:u}),e.config.doc.compatMode!=="BackCompat"&&(r=s.getDocType()+"\n"+r)),n=this._resolveWinDoc(),r&&(n.doc.open(),n.doc.write(r),n.doc.close()),n.doc.documentElement?t(n):i=e.later(1,this,function(){n.doc&&n.doc.documentElement&&(t(n),i.cancel())},null,!0)},_resolveWinDoc:function(t){var n=t?t:{};return n.win=e.Node.getDOMNode(this._iframe.get("contentWindow")),n.doc=e.Node.getDOMNode(this._iframe.get("contentWindow.document")),n.doc||(n.doc=e.config.doc),n.win||(n.win=e.config.win),n},_onDomEvent:function(t){var n,r;if(!e.Node.getDOMNode(this._iframe))return;t.frameX=t.frameY=0,(t.pageX>0||t.pageY>0)&&t.type.substring(0,3)!=="key"&&(r=this._instance.one("win"),n=this._iframe.getXY(),t.frameX=n[0]+t.pageX-r.get("scrollLeft"),t.frameY=n[1]+t.pageY-r.get("scrollTop")),t.frameTarget=t.target,t.frameCurrentTarget=t.currentTarget,t.frameEvent=t,this.fire("dom:"+t.type,t)},initializer:function(){var e=this.get(i);e&&(e.frame=this),this.publish("ready",{emitFacade:!0,defaultFn:this._defReadyFn})},destructor:function(){var e=this.getInstance();e.one("doc").detachAll(),e=null,this._iframe.remove()},_DOMPaste:function(e){var t=this.getInstance(),n="",r=t.config.win;e._event.originalTarget&&(n=e._event.originalTarget),e._event.clipboardData&&(n=e._event.clipboardData.getData("Text")),r.clipboardData&&(n=r.clipboardData.getData("Text"),n===""&&(r.clipboardData.setData("Text",n)||(n=null))),e.frameTarget=e.target,e.frameCurrentTarget=e.currentTarget,e.frameEvent=e,n?e.clipboardData={data:n,getData:function(){return n}}:e.clipboardData=null,this.fire("dom:paste",e)},_defReadyFn:function(){var t=this.getInstance();e.each(s.DOM_EVENTS,function(n,r){var i=e.bind(this._onDomEvent,this),o=e.UA.ie&&s.THROTTLE_TIME>0?e.throttle(i,s.THROTTLE_TIME):i;t.Node.DOM_EVENTS[r]||(t.Node.DOM_EVENTS[r]=1),n===1&&r!=="focus"&&r!=="blur"&&r!=="paste"&&(r.substring(0,3)==="key"?t.on(r,o,t.config.doc):t.on(r,i,t.config.doc))},this),t.Node.DOM_EVENTS.paste=1,t.on("paste",e.bind(this._DOMPaste,this),t.one("body")),t.on("focus",e.bind(this._onDomEvent,this),t.config.win),t.on("blur",e.bind(this._onDomEvent,this),t.config.win),t.__use=t.use,t.use=e.bind(this.use,this),this._iframe.setStyles({visibility:"inherit"}),t.one("body").setStyle("display","block")},_fixIECursors:function(){var e=this.getInstance(),t=e.all("table"),n=e.all("br"),r;t.size()&&n.size()&&(r=t.item(0).get("sourceIndex"),n.each(function(t){var n=t.get("parentNode"),i=n.get("children"),s=n.all(">br");n.test("div")&&(i.size()>2?t.replace(e.Node.create("<wbr>")):t.get("sourceIndex")>r?s.size()&&t.replace(e.Node.create("<wbr>")):s.size()>1&&t.replace(e.Node.create("<wbr>")))}))},_onContentReady:function(t){if(!this._ready){this._ready=!0;var n=this.getInstance(),r=e.clone(this.get("use"));this.fire("contentready"),t&&(n.config.doc=e.Node.getDOMNode(t.target)),r.push(e.bind(function(){n.EditorSelection&&(n.EditorSelection.DEFAULT_BLOCK_TAG=this.get("defaultblock")),this.get("designMode")&&(e.UA.ie?(n.config.doc.body.contentEditable="true",this._ieSetBodyHeight(),n.on("keyup",e.bind(this._ieSetBodyHeight,this),n.config.doc)):n.config.doc.designMode="on"),this.fire("ready")},this)),n.use.apply(n,r),n.one("doc").get("documentElement").addClass("yui-js-enabled")}},_ieHeightCounter:null,_ieSetBodyHeight:function(t){this._ieHeightCounter||(this._ieHeightCounter=0),this._ieHeightCounter++;var n=!1,r,i,s;t||(n=!0);if(t){switch(t.keyCode){case 8:case 13:n=!0}if(t.ctrlKey||t.shiftKey)n=!0}if(n)try{r=this.getInstance(),i=this._iframe.get("offsetHeight"),s=r.config.doc.body.scrollHeight,i>s?(i=i-15+"px",r.config.doc.body.style.height=i):r.config.doc.body.style.height="auto"}catch(t){this._ieHeightCounter<100&&e.later(200,this,this._ieSetBodyHeight)}},_resolveBaseHref:function(t){if(!t||t==="")t=e.config.doc.location.href,t.indexOf("?")!==-1&&(t=t.substring(0,t.indexOf("?"))),t=t.substring(0,t.lastIndexOf("/"))+"/";return t},_getHTML:function(e){if(this._ready){var t=this.getInstance();e=t.one("body").get("innerHTML")}return e},_setHTML:function(t){if(this._ready){var n=this.getInstance();n.one("body").set("innerHTML",t)}else this.once(r,e.bind(this._setHTML,this,t));return t},_getLinkedCSS:function(t){e.Lang.isArray(t)||(t=[t]);var n="";return this._ready?n=t:e.each(t,function(e){e&&(n+='<link rel="stylesheet" href="'+e+'" type="text/css">')}),n},_setLinkedCSS:function(e){if(this._ready){var t=this.getInstance();t.Get.css(e)}return e},_setExtraCSS:function(t){if(this._ready){var n=this.getInstance(),i=n.one("#extra_css");i&&i.remove(),n.one("head").append('<style id="extra_css">'+t+"</style>")}else this.once(r,e.bind(this._setExtraCSS,this,t));return t},_instanceLoaded:function(t){this._instance=t,this._onContentReady();var n=this._instance.config.doc;if(this.get("designMode")&&!e.UA.ie)try{n.execCommand("styleWithCSS",!1,!1),n.execCommand("insertbronreturn",!1,!1)}catch(r){}},use:function(){var t=this.getInstance(),n=e.Array(arguments),r=!1;return e.Lang.isFunction(n[n.length-1])&&(r=n.pop()),r&&n.push(function(){r.apply(t,arguments)}),t.__use.apply(t,n)},delegate:function(e,t,n,r){var i=this.getInstance();return i?(r||(r=n,n="body"),i.delegate
(e,t,n,r)):!1},getInstance:function(){return this._instance},render:function(t){return this._rendered?this:(this._rendered=!0,t&&this.set("container",t),this._create(e.bind(function(t){var n,r,s=e.bind(function(e){this._instanceLoaded(e)},this),o=e.clone(this.get("use")),u={debug:!1,win:t.win,doc:t.doc},a=e.bind(function(){u=this._resolveWinDoc(u),n=YUI(u),n.host=this.get(i);try{n.use("node-base",s),r&&clearInterval(r)}catch(e){r=setInterval(function(){a()},350)}},this);o.push(a),e.use.apply(e,o)},this)),this)},_handleFocus:function(){var e=this.getInstance(),t=new e.EditorSelection,n,r,i,s;t.anchorNode&&(n=t.anchorNode,n.test("p")&&n.get("innerHTML")===""&&(n=n.get("parentNode")),r=n.get("childNodes"),r.size()&&(r.item(0).test("br")?t.selectNode(n,!0,!1):r.item(0).test("p")?(n=r.item(0).one("br.yui-cursor"),n&&(n=n.get("parentNode")),n||(n=r.item(0).get("firstChild")),n||(n=r.item(0)),n&&t.selectNode(n,!0,!1)):(i=e.one("br.yui-cursor"),i&&(s=i.get("parentNode"),s&&t.selectNode(s,!0,!1)))))},_validateLinkedCSS:function(e){return n.isString(e)||n.isArray(e)},focus:function(t){if(e.UA.ie&&e.UA.ie<9){try{e.one("win").focus(),this.getInstance()&&this.getInstance().one("win")&&this.getInstance().one("win").focus()}catch(n){}t===!0&&this._handleFocus(),e.Lang.isFunction(t)&&t()}else try{e.one("win").focus(),e.later(100,this,function(){this.getInstance()&&this.getInstance().one("win")&&this.getInstance().one("win").focus(),t===!0&&this._handleFocus(),e.Lang.isFunction(t)&&t()})}catch(r){}return this},show:function(){this._iframe.setStyles({position:"static",left:""});if(e.UA.gecko){try{this.getInstance()&&(this.getInstance().config.doc.designMode="on")}catch(t){}this.focus()}return this},hide:function(){return this._iframe.setStyles({position:"absolute",left:"-999999px"}),this}},{THROTTLE_TIME:100,DOM_EVENTS:{dblclick:1,click:1,paste:1,mouseup:1,mousedown:1,keyup:1,keydown:1,keypress:1,activate:1,deactivate:1,beforedeactivate:1,focusin:1,focusout:1},DEFAULT_CSS:"body { background-color: #fff; font: 13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small; } a, a:visited, a:hover { color: blue !important; text-decoration: underline !important; cursor: text !important; } img { cursor: pointer !important; border: none; }",IFRAME_ATTRS:{border:"0",frameBorder:"0",marginWidth:"0",marginHeight:"0",leftMargin:"0",topMargin:"0",allowTransparency:"true",width:"100%",height:"99%"},PAGE_HTML:'<html dir="{DIR}" lang="{LANG}"><head><title>{TITLE}</title>{META}<base href="{BASE_HREF}"/>{LINKED_CSS}<style id="editor_css">{DEFAULT_CSS}</style>{EXTRA_CSS}</head><body>{CONTENT}</body></html>',getDocType:function(){var t=e.config.doc.doctype,n=s.DOC_TYPE;return t?n="<!DOCTYPE "+t.name+(t.publicId?" "+t.publicId:"")+(t.systemId?" "+t.systemId:"")+">":e.config.doc.all&&(t=e.config.doc.all[0],t.nodeType&&t.nodeType===8&&t.nodeValue&&t.nodeValue.toLowerCase().indexOf("doctype")!==-1&&(n="<!"+t.nodeValue+">")),n},DOC_TYPE:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',META:'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=7">',NAME:"frame",NS:"frame",ATTRS:{title:{value:"Blank Page"},dir:{value:"ltr"},lang:{value:"en-US"},src:{value:"javascript"+(e.UA.ie?":false":":")+";"},designMode:{writeOnce:!0,value:!1},content:{validator:n.isString,value:"<br>",setter:"_setHTML",getter:"_getHTML"},basehref:{value:!1,getter:"_resolveBaseHref"},use:{writeOnce:!0,value:["node","node-style","selector-css3"]},container:{value:"body",setter:function(t){return e.one(t)}},node:{readOnly:!0,value:null,getter:function(){return this._iframe}},id:{writeOnce:!0,getter:function(t){return t||(t="iframe-"+e.guid()),t}},linkedcss:{validator:"_validateLinkedCSS",getter:"_getLinkedCSS",setter:"_setLinkedCSS"},extracss:{validator:n.isString,setter:"_setExtraCSS"},defaultblock:{value:"p"}}}),e.namespace("Plugin"),e.Plugin.Frame=s,e.Frame=s},"3.16.0",{requires:["base","node","plugin","selector-css3","yui-throttle"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("exec-command",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r=function(t,n,r){var i=this.getInstance(),s=i.config.doc,o=s.selection.createRange(),u=s.queryCommandValue(t),a,f,l,c,h,p,d;u&&(a=o.htmlText,f=new RegExp(r,"g"),l=a.match(f),l&&(a=a.replace(r+";","").replace(r,""),o.pasteHTML('<var id="yui-ie-bs">'),c=s.getElementById("yui-ie-bs"),h=s.createElement("div"),p=s.createElement(n),h.innerHTML=a,c.parentNode!==i.config.doc.body&&(c=c.parentNode),d=h.childNodes,c.parentNode.replaceChild(p,c),e.each(d,function(e){p.appendChild(e)}),o.collapse(),o.moveToElementText&&o.moveToElementText(p),o.select())),this._command(t)};e.extend(n,e.Base,{_lastKey:null,_inst:null,command:function(e,t){var r=n.COMMANDS[e];return r?r.call(this,e,t):this._command(e,t)},_command:function(e,t){var n=this.getInstance();try{try{n.config.doc.execCommand("styleWithCSS",null,1)}catch(r){try{n.config.doc.execCommand("useCSS",null,0)}catch(i){}}n.config.doc.execCommand(e,null,t)}catch(s){}},getInstance:function(){return this._inst||(this._inst=this.get("host").getInstance()),this._inst},initializer:function(){e.mix(this.get("host"),{execCommand:function(e,t){return this.exec.command(e,t)},_execCommand:function(e,t){return this.exec._command(e,t)}}),this.get("host").on("dom:keypress",e.bind(function(e){this._lastKey=e.keyCode},this))},_wrapContent:function(e,t){var n=this.getInstance().host.editorPara&&!t?!0:!1;return n?e="<p>"+e+"</p>":e+="<br>",e}},{NAME:"execCommand",NS:"exec",ATTRS:{host:{value:!1}},COMMANDS:{wrap:function(e,t){var n=this.getInstance();return(new n.EditorSelection).wrapContent(t)},inserthtml:function(t,n){var r=this.getInstance();if(r.EditorSelection.hasCursor()||e.UA.ie)return(new r.EditorSelection).insertContent(n);this._command("inserthtml",n)},insertandfocus:function(e,t){var n=this.getInstance(),r,i;return n.EditorSelection.hasCursor()?(t+=n.EditorSelection.CURSOR,r=this.command("inserthtml",t),i=new n.EditorSelection,i.focusCursor(!0,!0)):this.command("inserthtml",t),r},insertbr:function(){var t=this.getInstance(),n=new t.EditorSelection,r="<var>|</var>",i=null,s=t.EditorSelection.ROOT,o=e.UA.webkit?"span.Apple-style-span,var":"var",u=function(e){var n=t.Node.create("<br>");return e.insert(n,"before"),n};n._selection.pasteHTML?n._selection.pasteHTML(r):this._command("inserthtml",r),s.all(o).each(function(t){var n=!0,r;e.UA.webkit&&(n=!1,t.get("innerHTML")==="|"&&(n=!0)),n&&(i=u(t),(!i.previous()||!i.previous().test("br"))&&e.UA.gecko&&(r=i.cloneNode(),i.insert(r,"after"),i=r),t.remove())}),e.UA.webkit&&i&&(u(i),n.selectNode(i))},insertimage:function(e,t){return this.command("inserthtml",'<img src="'+t+'">')},addclass:function(e,t){var n=this.getInstance();return(new n.EditorSelection).getSelected().addClass(t)},removeclass:function(e,t){var n=this.getInstance();return(new n.EditorSelection).getSelected().removeClass(t)},forecolor:function(t,n){var r=this.getInstance(),i=new r.EditorSelection,s;e.UA.ie||this._command("useCSS",!1);if(r.EditorSelection.hasCursor())return i.isCollapsed?(i.anchorNode&&i.anchorNode.get("innerHTML")==="&nbsp;"?(i.anchorNode.setStyle("color",n),s=i.anchorNode):(s=this.command("inserthtml",'<span style="color: '+n+'">'+r.EditorSelection.CURSOR+"</span>"),i.focusCursor(!0,!0)),s):this._command(t,n);this._command(t,n)},backcolor:function(t,n){var r=this.getInstance(),i=new r.EditorSelection,s;if(e.UA.gecko||e.UA.opera)t="hilitecolor";e.UA.ie||this._command("useCSS",!1);if(r.EditorSelection.hasCursor())return i.isCollapsed?(i.anchorNode&&i.anchorNode.get("innerHTML")==="&nbsp;"?(i.anchorNode.setStyle("backgroundColor",n),s=i.anchorNode):(s=this.command("inserthtml",'<span style="background-color: '+n+'">'+r.EditorSelection.CURSOR+"</span>"),i.focusCursor(!0,!0)),s):this._command(t,n);this._command(t,n)},hilitecolor:function(){return n.COMMANDS.backcolor.apply(this,arguments)},fontname2:function(e,t){this._command("fontname",t);var n=this.getInstance(),r=new n.EditorSelection;r.isCollapsed&&this._lastKey!==32&&r.anchorNode.test("font")&&r.anchorNode.set("face",t)},fontsize2:function(t,n){this._command("fontsize",n);var r=this.getInstance(),i=new r.EditorSelection,s;i.isCollapsed&&i.anchorNode&&this._lastKey!==32&&(e.UA.webkit&&i.anchorNode.getStyle("lineHeight")&&i.anchorNode.setStyle("lineHeight",""),i.anchorNode.test("font")?i.anchorNode.set("size",n):e.UA.gecko&&(s=i.anchorNode.ancestor(r.EditorSelection.DEFAULT_BLOCK_TAG),s&&s.setStyle("fontSize","")))},insertunorderedlist:function(){this.command("list","ul")},insertorderedlist:function(){this.command("list","ol")},list:function(t,n){var r=this.getInstance(),i,s=this,o="dir",u="yui3-touched",a,f,l,c,h,p,d,v,m,g,y=r.host.editorPara?!0:!1,b,w,E,S,x=r.EditorSelection.ROOT,T=new r.EditorSelection;t="insert"+(n==="ul"?"un":"")+"orderedlist";if(e.UA.ie&&e.UA.ie<11&&!T.isCollapsed){f=T._selection,i=f.htmlText,l=r.Node.create(i)||x;if(l.test("li")||l.one("li")){this._command(t,null);return}l.test(n)?(c=f.item?f.item(0):f.parentElement(),h=r.one(c),g=h.all("li"),p="<div>",g.each(function(e){p=s._wrapContent(e.get("innerHTML"))}),p+="</div>",d=r.Node.create(p),h.get("parentNode").test("div")&&(h=h.get("parentNode")),h&&h.hasAttribute(o)&&(y?d.all("p").setAttribute(o,h.getAttribute(o)):d.setAttribute(o,h.getAttribute(o))),y?h.replace(d.get("innerHTML")):h.replace(d),f.moveToElementText&&f.moveToElementText(d._node),f.select()):(v=e.one(f.parentElement()),v.test(r.EditorSelection.BLOCKS)||(v=v.ancestor(r.EditorSelection.BLOCKS)),v&&v.hasAttribute(o)&&(a=v.getAttribute(o)),i.indexOf("<br>")>-1?i=i.split(/<br>/i):(b=r.Node.create(i),ps=b?b.all("p"):null,ps&&ps.size()?(i=[],ps.each(function(e){i.push(e.get("innerHTML"))})):i=[i]),m="<"+n+' id="ie-list">',e.each(i,function(e){var t=r.Node.create(e);t&&t.test("p")&&(t.hasAttribute(o)&&(a=t.getAttribute(o)),e=t.get("innerHTML")),m+="<li>"+e+"</li>"}),m+="</"+n+">",f.pasteHTML(m),c=r.config.doc.getElementById("ie-list"),c.id="",a&&c.setAttribute
(o,a),f.moveToElementText&&f.moveToElementText(c),f.select())}else e.UA.ie&&e.UA.ie<11?(v=r.one(T._selection.parentElement()),v.test("p")?(v&&v.hasAttribute(o)&&(a=v.getAttribute(o)),i=e.EditorSelection.getText(v),i===""?(w="",a&&(w=' dir="'+a+'"'),m=r.Node.create(e.Lang.sub("<{tag}{dir}><li></li></{tag}>",{tag:n,dir:w})),v.replace(m),T.selectNode(m.one("li"))):this._command(t,null)):this._command(t,null)):(x.all(n).addClass(u),T.anchorNode.test(r.EditorSelection.BLOCKS)?v=T.anchorNode:v=T.anchorNode.ancestor(r.EditorSelection.BLOCKS),v||(v=T.anchorNode.one(r.EditorSelection.BLOCKS)),v&&v.hasAttribute(o)&&(a=v.getAttribute(o)),v&&v.test(n)?(E=v.ancestor("p"),i=r.Node.create("<div/>"),c=v.all("li"),c.each(function(e){i.append(s._wrapContent(e.get("innerHTML"),E))}),a&&(y?i.all("p").setAttribute(o,a):i.setAttribute(o,a)),y&&(i=r.Node.create(i.get("innerHTML"))),S=i.get("firstChild"),v.replace(i),T.selectNode(S)):this._command(t,null),m=x.all(n),a&&m.size()&&m.each(function(e){e.hasClass(u)||e.setAttribute(o,a)}),m.removeClass(u))},justify:function(t,n){if(e.UA.webkit){var r=this.getInstance(),i=new r.EditorSelection,s=i.anchorNode,o,u=s.getStyle("backgroundColor");this._command(n),i=new r.EditorSelection,i.anchorNode.test("div")&&(o="<span>"+i.anchorNode.get("innerHTML")+"</span>",i.anchorNode.set("innerHTML",o),i.anchorNode.one("span").setStyle("backgroundColor",u),i.selectNode(i.anchorNode.one("span")))}else this._command(n)},justifycenter:function(){this.command("justify","justifycenter")},justifyleft:function(){this.command("justify","justifyleft")},justifyright:function(){this.command("justify","justifyright")},justifyfull:function(){this.command("justify","justifyfull")}}}),e.UA.ie&&e.UA.ie<11&&(n.COMMANDS.bold=function(){r.call(this,"bold","b","FONT-WEIGHT: bold")},n.COMMANDS.italic=function(){r.call(this,"italic","i","FONT-STYLE: italic")},n.COMMANDS.underline=function(){r.call(this,"underline","u","TEXT-DECORATION: underline")}),e.namespace("Plugin"),e.Plugin.ExecCommand=n},"3.16.0",{requires:["frame"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("editor-selection",function(e,t){var n="textContent",r="innerHTML",i="fontFamily";e.UA.ie&&e.UA.ie<11&&(n="nodeValue"),e.EditorSelection=function(t){var n,r,i,s,o,u,a,f=0,l,c,h=e.EditorSelection.ROOT;e.config.win.getSelection&&(!e.UA.ie||e.UA.ie>8)?n=e.config.win.getSelection():e.config.doc.selection&&(n=e.config.doc.selection.createRange()),this._selection=n;if(!n)return!1;if(n.pasteHTML){this.isCollapsed=n.compareEndPoints("StartToEnd",n)?!1:!0;if(this.isCollapsed){this.anchorNode=this.focusNode=e.one(n.parentElement()),t&&(i=e.config.doc.elementFromPoint(t.clientX,t.clientY)),o=n.duplicate();if(!i){r=n.parentElement(),s=r.childNodes;for(u=0;u<s.length;u++)o.inRange(n)&&(i||(i=s[u]))}this.ieNode=i,i&&(i.nodeType!==3&&(i.firstChild&&(i=i.firstChild),h.compareTo(i)&&i.firstChild&&(i=i.firstChild)),this.anchorNode=this.focusNode=e.EditorSelection.resolve(i),o.moveToElementText(n.parentElement()),a=n.compareEndPoints("StartToStart",o),a&&(f=this.getEditorOffset(h),n.move("character",-f)),this.anchorOffset=this.focusOffset=f,this.anchorTextNode=this.focusTextNode=e.one(i))}else n.htmlText&&n.htmlText!==""&&(l=e.Node.create(n.htmlText),l&&l.get("id")?(c=l.get("id"),this.anchorNode=this.focusNode=e.one("#"+c)):l&&(l=l.get("childNodes"),this.anchorNode=this.focusNode=l.item(0)))}else this.isCollapsed=n.isCollapsed,this.anchorNode=e.EditorSelection.resolve(n.anchorNode),this.focusNode=e.EditorSelection.resolve(n.focusNode),this.anchorOffset=n.anchorOffset,this.focusOffset=n.focusOffset,this.anchorTextNode=e.one(n.anchorNode||this.anchorNode),this.focusTextNode=e.one(n.focusNode||this.focusNode);e.Lang.isString(n.text)?this.text=n.text:n.toString?this.text=n.toString():this.text=""},e.EditorSelection.removeFontFamily=function(t){t.removeAttribute("face");var n=t.getAttribute("style").toLowerCase();(n===""||n==="font-family: ")&&t.removeAttribute("style"),n.match(e.EditorSelection.REG_FONTFAMILY)&&(n=n.replace(e.EditorSelection.REG_FONTFAMILY,""),t.setAttribute("style",n))},e.EditorSelection.filter=function(t){var n=(new Date).getTime(),r=e.EditorSelection,s=r.ROOT,o,u=s.all(r.ALL),a=s.all("strong,em"),f=e.config.doc,l,c={},h="",p,d=(new Date).getTime(),v;u.each(function(t){var n=e.Node.getDOMNode(t);n.style[i]&&(c["."+t._yuid]=n.style[i],t.addClass(t._yuid),r.removeFontFamily(n))}),v=(new Date).getTime(),s.all(".hr").addClass("yui-skip").addClass("yui-non"),e.UA.ie&&(l=e.Node.getDOMNode(s).getElementsByTagName("hr"),e.each(l,function(e){var t=f.createElement("div"),n=t.style;t.className="hr yui-non yui-skip",t.setAttribute("readonly",!0),t.setAttribute("contenteditable",!1),e.parentNode&&e.parentNode.replaceChild(t,e),n.border="1px solid #ccc",n.lineHeight="0",n.height="0",n.fontSize="0",n.marginTop="5px",n.marginBottom="5px",n.marginLeft="0px",n.marginRight="0px",n.padding="0"})),e.each(c,function(e,t){h+=t+" { font-family: "+e.replace(/"/gi,"")+"; }"}),e.StyleSheet(h,"editor"),a.each(function(e,t){var n=e.get("tagName").toLowerCase(),i="i";n==="strong"&&(i="b"),r.prototype._swap(a.item(t),i)}),p=s.all("ol,ul"),p.each(function(e){var t=e.all("li");t.size()||e.remove()}),t&&r.filterBlocks(),o=(new Date).getTime()},e.EditorSelection.filterBlocks=function(){var t=(new Date).getTime(),r,i=e.Node.getDOMNode(e.EditorSelection.ROOT).childNodes,s,o,u=!1,a=!0,f,l,c,h,p,d;if(i){for(s=0;s<i.length;s++)o=e.one(i[s]),o.test(e.EditorSelection.BLOCKS)?u=e.EditorSelection._wrapBlock(u):(a=!0,i[s].nodeType===3&&(h=i[s][n].match(e.EditorSelection.REG_CHAR),p=i[s][n].match(e.EditorSelection.REG_NON),h===null&&p&&(a=!1)),a&&(u||(u=[]),u.push(i[s])));u=e.EditorSelection._wrapBlock(u)}l=e.all(e.EditorSelection.DEFAULT_BLOCK_TAG);if(l.size()===1){c=l.item(0).all("br");if(c.size()===1){c.item(0).test(".yui-cursor")||c.item(0).remove(),d=l.item(0).get("innerHTML");if(d===""||d===" ")l.set("innerHTML",e.EditorSelection.CURSOR),f=new e.EditorSelection,f.focusCursor(!0,!0);c.item(0).test(".yui-cursor")&&e.UA.ie&&c.item(0).remove()}}else l.each(function(e){var t=e.get("innerHTML");t===""&&e.remove()});r=(new Date).getTime()},e.EditorSelection.REG_FONTFAMILY=/font-family:\s*;/,e.EditorSelection.REG_CHAR=/[a-zA-Z-0-9_!@#\$%\^&*\(\)-=_+\[\]\\{}|;':",.\/<>\?]/gi,e.EditorSelection.REG_NON=/[\s|\n|\t]/gi,e.EditorSelection.REG_NOHTML=/<\S[^><]*>/g,e.EditorSelection._wrapBlock=function(t){if(t){var n=e.Node.create("<"+e.EditorSelection.DEFAULT_BLOCK_TAG+"></"+e.EditorSelection.DEFAULT_BLOCK_TAG+">"),r=e.one(t[0]),i;for(i=1;i<t.length;i++)n.append(t[i]);r.replace(n),n.prepend(r)}return!1},e.EditorSelection.unfilter=function(){var t=e.EditorSelection.ROOT,n=t.all("[class]"),r="",s,o,u=t;return n.each(function(e){e.hasClass(e._yuid)&&(e.setStyle(i,e.getStyle(i)),e.removeClass(e._yuid),e.getAttribute("class")===""&&e.removeAttribute("class"))}),s=t.all(".yui-non"),s.each(function(e){!e.hasClass("yui-skip")&&e.get("innerHTML")===""?e.remove():e.removeClass("yui-non").removeClass("yui-skip")}),o=t.all("[id]"),o.each(function(e){e.get("id").indexOf("yui_3_")===0&&(e.removeAttribute("id"),e.removeAttribute("_yuid"))}),u&&(r=u.get("innerHTML")),t.all(".hr").addClass("yui-skip").addClass("yui-non"),r},e.EditorSelection.resolve=function(t){if(!t)return e.EditorSelection.ROOT;if(t&&t.nodeType===3)try{t=t.parentNode}catch(n){t=e.EditorSelection.ROOT}return e.one(t)},e.EditorSelection.getText=function(t){var n=t.get("innerHTML").replace(e.EditorSelection.REG_NOHTML,"");return n=n.replace("<span><br></span>","").replace("<br>",""),n},e.EditorSelection.DEFAULT_BLOCK_TAG="p",e.EditorSelection.ALL="[style],font[face]",e.EditorSelection.BLOCKS="p,div,ul,ol,table,style",e.EditorSelection.TMP="yui-tmp",e.EditorSelection.DEFAULT_TAG="span",e.EditorSelection.CURID="yui-cursor",e.EditorSelection.CUR_WRAPID="yui-cursor-wrapper",e.EditorSelection.CURSOR='<span><br class="yui-cursor"></span>',e.EditorSelection.ROOT=e.one("body"),e.EditorSelection.hasCursor=function(){var t=e.all("#"+e.EditorSelection.CUR_WRAPID);return t.size()},e.EditorSelection.cleanCursor=
function(){var t,n="br.yui-cursor";t=e.all(n),t.size()&&t.each(function(t){var n=t.get("parentNode.parentNode.childNodes"),r;n.size()?t.remove():(r=e.EditorSelection.getText(n.item(0)),r!==""&&t.remove())})},e.EditorSelection.prototype={text:null,isCollapsed:null,anchorNode:null,anchorOffset:null,anchorTextNode:null,focusNode:null,focusOffset:null,focusTextNode:null,_selection:null,_wrap:function(t,n){var i=e.Node.create("<"+n+"></"+n+">");return i.set(r,t.get(r)),t.set(r,""),t.append(i),e.Node.getDOMNode(i)},_swap:function(t,n){var i=e.Node.create("<"+n+"></"+n+">");return i.set(r,t.get(r)),t.replace(i,t),e.Node.getDOMNode(i)},getSelected:function(){var t=e.EditorSelection,n=t.ROOT,r,s=[];return t.filter(),e.config.doc.execCommand("fontname",null,t.TMP),r=n.all(t.ALL),r.each(function(o,u){o.getStyle(i)===t.TMP&&(o.setStyle(i,""),t.removeFontFamily(o),o.compareTo(n)||s.push(e.Node.getDOMNode(r.item(u))))}),e.all(s)},insertContent:function(e){return this.insertAtCursor(e,this.anchorTextNode,this.anchorOffset,!0)},insertAtCursor:function(t,r,i,s){var o=e.Node.create("<"+e.EditorSelection.DEFAULT_TAG+' class="yui-non"></'+e.EditorSelection.DEFAULT_TAG+">"),u,a,f,l,c=this.createRange(),h,p=e.EditorSelection.ROOT;p.compareTo(r)&&(h=e.Node.create("<span></span>"),r.append(h),r=h);if(c.pasteHTML){if(i===0&&r&&!r.previous()&&r.get("nodeType")===3)return r.insert(t,"before"),c.moveToElementText&&c.moveToElementText(e.Node.getDOMNode(r.previous())),c.collapse(!1),c.select(),r.previous();l=e.Node.create(t);try{c.pasteHTML('<span id="rte-insert"></span>')}catch(d){}u=p.one("#rte-insert");if(u)return u.set("id",""),u.replace(l),c.moveToElementText&&c.moveToElementText(e.Node.getDOMNode(l)),c.collapse(!1),c.select(),l;e.on("available",function(){u.set("id",""),u.replace(l),c.moveToElementText&&c.moveToElementText(e.Node.getDOMNode(l)),c.collapse(!1),c.select()},"#rte-insert")}else i>0?(u=r.get(n),a=e.one(e.config.doc.createTextNode(u.substr(0,i))),f=e.one(e.config.doc.createTextNode(u.substr(i))),r.replace(a,r),l=e.Node.create(t),l.get("nodeType")===11&&(h=e.Node.create("<span></span>"),h.append(l),l=h),a.insert(l,"after"),f&&(l.insert(o,"after"),o.insert(f,"after"),this.selectNode(o,s))):(r.get("nodeType")===3&&(r=r.get("parentNode")||p),l=e.Node.create(t),t=r.get("innerHTML").replace(/\n/gi,""),t===""||t==="<br>"?r.append(l):l.get("parentNode")?r.insert(l,"before"):p.prepend(l),r.get("firstChild").test("br")&&r.get("firstChild").remove());return l},wrapContent:function(t){t=t?t:e.EditorSelection.DEFAULT_TAG;if(!this.isCollapsed){var n=this.getSelected(),r=[],i,s,o,u;return n.each(function(e,i){var s=e.get("tagName").toLowerCase();s==="font"?r.push(this._swap(n.item(i),t)):r.push(this._wrap(n.item(i),t))},this),i=this.createRange(),o=r[0],s=r[r.length-1],this._selection.removeAllRanges?(i.setStart(r[0],0),i.setEnd(s,s.childNodes.length),this._selection.removeAllRanges(),this._selection.addRange(i)):(i.moveToElementText&&(i.moveToElementText(e.Node.getDOMNode(o)),u=this.createRange(),u.moveToElementText(e.Node.getDOMNode(s)),i.setEndPoint("EndToEnd",u)),i.select()),r=e.all(r),r}return e.all([])},replace:function(t,r){var i=this.createRange(),s,o,u,a;return i.getBookmark?(u=i.getBookmark(),o=this.anchorNode.get("innerHTML").replace(t,r),this.anchorNode.set("innerHTML",o),i.moveToBookmark(u),a=e.one(i.parentElement())):(s=this.anchorTextNode,o=s.get(n),u=o.indexOf(t),o=o.replace(t,""),s.set(n,o),a=this.insertAtCursor(r,s,u,!0)),a},remove:function(){return this._selection&&this._selection.removeAllRanges&&this._selection.removeAllRanges(),this},createRange:function(){return e.config.doc.selection?e.config.doc.selection.createRange():e.config.doc.createRange()},selectNode:function(t,n,r){if(!t)return;r=r||0,t=e.Node.getDOMNode(t);var i=this.createRange();if(i.selectNode){try{i.selectNode(t)}catch(s){}this._selection.removeAllRanges(),this._selection.addRange(i);if(n)try{this._selection.collapse(t,r)}catch(s){this._selection.collapse(t,0)}}else{t.nodeType===3&&(t=t.parentNode);try{i.moveToElementText(t)}catch(o){}n&&i.collapse(r?!1:!0),i.select()}return this},setCursor:function(){return this.removeCursor(!1),this.insertContent(e.EditorSelection.CURSOR)},getCursor:function(){var t=e.EditorSelection.ROOT.all("."+e.EditorSelection.CURID);return t.isEmpty()?null:t.get("parentNode")},removeCursor:function(t){var n=this.getCursor();return n&&!t&&n.all("."+e.EditorSelection.CURID).remove(),n},focusCursor:function(e,t){e!==!1&&(e=!0),t!==!1&&(t=!0);var n=this.removeCursor(!0);n&&n.each(function(n){this.selectNode(n,e,t)},this)},toString:function(){return"EditorSelection Object"},getEditorOffset:function(t){var n=(t||e.EditorSelection.ROOT).getDOMNode(),r=0,i=e.config.doc,s=e.config.win,o,u,a;return typeof s.getSelection!="undefined"?(u=s.getSelection().getRangeAt(0),a=u.cloneRange(),a.selectNodeContents(n),a.setEnd(u.endContainer,u.endOffset),r=a.toString().length):(o=i.selection,o&&o.type!=="Control"&&(u=o.createRange(),a=i.body.createTextRange(),a.moveToElementText(n),a.setEndPoint("EndToEnd",u),r=a.text.length)),r}},e.Selection=e.EditorSelection},"3.16.0",{requires:["node"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("editor-base",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)},i=":last-child";e.extend(r,e.Base,{frame:null,initializer:function(){this.publish("nodeChange",{emitFacade:!0,bubbles:!0,defaultFn:this._defNodeChangeFn})},destructor:function(){this.detachAll()},copyStyles:function(t,n){if(t.test("a"))return;var r=["color","fontSize","fontFamily","backgroundColor","fontStyle"],i={};e.each(r,function(e){i[e]=t.getStyle(e)}),t.ancestor("b,strong")&&(i.fontWeight="bold"),t.ancestor("u")&&(i.textDecoration||(i.textDecoration="underline")),n.setStyles(i)},_lastBookmark:null,_resolveChangedNode:function(e){var t=this.getInstance(),n,r,s,o=this._getRoot(),u;e&&e.compareTo(o)&&(u=new t.EditorSelection,u&&u.anchorNode&&(e=u.anchorNode));if(t&&e&&e.test("html")){n=o.one(i);while(!s)n?(r=n.one(i),r?n=r:s=!0):s=!0;n&&(n.test("br")&&(n.previous()?n=n.previous():n=n.get("parentNode")),n&&(e=n))}return e||(e=o),e},_getRoot:function(){return this.getInstance().EditorSelection.ROOT},_defNodeChangeFn:function(t){var n=(new Date).getTime(),i=this.getInstance(),s,o,u,a={},f,l,c=[],h="",p="",d,v=!1,m=this._getRoot();if(e.UA.ie&&e.UA.ie<11)try{s=i.config.doc.selection.createRange(),s.getBookmark&&(this._lastBookmark=s.getBookmark())}catch(g){}t.changedNode=this._resolveChangedNode(t.changedNode);switch(t.changedType){case"backspace-up":e.UA.webkit&&t.changedNode&&t.changedNode.set("innerHTML",t.changedNode.get("innerHTML"))}e.UA.webkit&&t.commands&&(t.commands.indent||t.commands.outdent)&&(d=m.all(".webkit-indent-blockquote, blockquote"),d.size()&&d.setStyle("margin","")),o=this.getDomPath(t.changedNode,!1),t.commands&&(a=t.commands),e.each(o,function(t){var n=t.tagName.toLowerCase(),s=r.TAG2CMD[n],o,u,d,m,g;s&&(a[s]=1),o=t.currentStyle||t.style,""+o.fontWeight=="normal"&&(v=!0),""+o.fontWeight=="bold"&&(a.bold=1),e.UA.ie&&o.fontWeight>400&&(a.bold=1),o.fontStyle==="italic"&&(a.italic=1),o.textDecoration.indexOf("underline")>-1&&(a.underline=1),o.textDecoration.indexOf("line-through")>-1&&(a.strikethrough=1),u=i.one(t),u.getStyle("fontFamily")&&(d=u.getStyle("fontFamily").split(",")[0].toLowerCase(),d&&(f=d),f&&(f=f.replace(/'/g,"").replace(/"/g,""))),l=r.NORMALIZE_FONTSIZE(u),m=t.className.split(" "),e.each(m,function(e){e!==""&&e.substr(0,4)!=="yui_"&&c.push(e)}),h=r.FILTER_RGB(u.getStyle("color")),g=r.FILTER_RGB(o.backgroundColor),g!=="transparent"&&g!==""&&(p=g)}),v&&(delete a.bold,delete a.italic),t.dompath=i.all(o),t.classNames=c,t.commands=a,t.fontFamily||(t.fontFamily=f),t.fontSize||(t.fontSize=l),t.fontColor||(t.fontColor=h),t.backgroundColor||(t.backgroundColor=p),u=(new Date).getTime()},getDomPath:function(e,t){var n=[],r,i,s=this._getRoot(),o=this.frame.getInstance();r=o.Node.getDOMNode(e),i=o.Node.getDOMNode(s);while(r!==null){if(r===o.config.doc.documentElement||r===o.config.doc||!r.tagName){r=null;break}if(!o.DOM.inDoc(r)){r=null;break}r.nodeName&&r.nodeType&&r.nodeType===1&&n.push(r);if(r===i){r=null;break}r=r.parentNode}return n.length===0&&(n[0]=o.config.doc.body),t?o.all(n.reverse()):n.reverse()},_afterFrameReady:function(){var t=this.frame.getInstance();this.frame.on("dom:mouseup",e.bind(this._onFrameMouseUp,this)),this.frame.on("dom:mousedown",e.bind(this._onFrameMouseDown,this)),this.frame.on("dom:keydown",e.bind(this._onFrameKeyDown,this)),e.UA.ie&&e.UA.ie<11&&(this.frame.on("dom:activate",e.bind(this._onFrameActivate,this)),this.frame.on("dom:beforedeactivate",e.bind(this._beforeFrameDeactivate,this))),this.frame.on("dom:keyup",e.bind(this._onFrameKeyUp,this)),this.frame.on("dom:keypress",e.bind(this._onFrameKeyPress,this)),this.frame.on("dom:paste",e.bind(this._onPaste,this)),t.EditorSelection.filter(),this.fire("ready")},_beforeFrameDeactivate:function(e){if(e.frameTarget.test("html"))return;var t=this.getInstance(),n=t.config.doc.selection.createRange();n.compareEndPoints&&!n.compareEndPoints("StartToEnd",n)&&n.pasteHTML('<var id="yui-ie-cursor">')},_onFrameActivate:function(e){if(e.frameTarget.test("html"))return;var t=this.getInstance(),n=new t.EditorSelection,r=n.createRange(),i=this._getRoot(),s=i.all("#yui-ie-cursor");s.size()&&s.each(function(e){e.set("id","");if(r.moveToElementText)try{r.moveToElementText(e._node);var t=r.move("character",-1);t===-1&&r.move("character",1),r.select(),r.text=""}catch(n){}e.remove()})},_onPaste:function(e){this.fire("nodeChange",{changedNode:e.frameTarget,changedType:"paste",changedEvent:e.frameEvent})},_onFrameMouseUp:function(e){this.fire("nodeChange",{changedNode:e.frameTarget,changedType:"mouseup",changedEvent:e.frameEvent})},_onFrameMouseDown:function(e){this.fire("nodeChange",{changedNode:e.frameTarget,changedType:"mousedown",changedEvent:e.frameEvent})},_currentSelection:null,_currentSelectionTimer:null,_currentSelectionClear:null,_onFrameKeyDown:function(t){var n,i;this._currentSelection?i=this._currentSelection:(this._currentSelectionTimer&&this._currentSelectionTimer.cancel(),this._currentSelectionTimer=e.later(850,this,function(){this._currentSelectionClear=!0}),n=this.frame.getInstance(),i=new n.EditorSelection(t),this._currentSelection=i),n=this.frame.getInstance(),i=new n.EditorSelection,this._currentSelection=i,i&&i.anchorNode&&(this.fire("nodeChange",{changedNode:i.anchorNode,changedType:"keydown",changedEvent:t.frameEvent}),r.NC_KEYS[t.keyCode]&&(this.fire("nodeChange",{changedNode:i.anchorNode,changedType:r.NC_KEYS[t.keyCode],changedEvent:t.frameEvent}),this.fire("nodeChange",{changedNode:i.anchorNode,changedType:r.NC_KEYS[t.keyCode]+"-down",changedEvent:t.frameEvent})))},_onFrameKeyPress:function(e){var t=this._currentSelection;t&&t.anchorNode&&(this.fire("nodeChange",{changedNode:t.anchorNode,changedType:"keypress",changedEvent:e.frameEvent}),r.NC_KEYS[e.keyCode]&&this.fire("nodeChange",{changedNode:t.anchorNode,changedType:r.NC_KEYS[e.keyCode]+"-press",changedEvent:e.frameEvent}))},_onFrameKeyUp:function(e){var t=this.frame.getInstance(),n=new t.EditorSelection(e);n&&n.anchorNode&&(this
.fire("nodeChange",{changedNode:n.anchorNode,changedType:"keyup",selection:n,changedEvent:e.frameEvent}),r.NC_KEYS[e.keyCode]&&this.fire("nodeChange",{changedNode:n.anchorNode,changedType:r.NC_KEYS[e.keyCode]+"-up",selection:n,changedEvent:e.frameEvent})),this._currentSelectionClear&&(this._currentSelectionClear=this._currentSelection=null)},_validateLinkedCSS:function(e){return n.isString(e)||n.isArray(e)},execCommand:function(e,t){var n=this.frame.execCommand(e,t),r=this.frame.getInstance(),i=new r.EditorSelection,s={},o={changedNode:i.anchorNode,changedType:"execcommand",nodes:n};switch(e){case"forecolor":o.fontColor=t;break;case"backcolor":o.backgroundColor=t;break;case"fontsize":o.fontSize=t;break;case"fontname":o.fontFamily=t}return s[e]=1,o.commands=s,this.fire("nodeChange",o),n},getInstance:function(){return this.frame.getInstance()},render:function(t){var n=this.frame;return n||(this.plug(e.Plugin.Frame,{designMode:!0,title:r.STRINGS.title,use:r.USE,dir:this.get("dir"),extracss:this.get("extracss"),linkedcss:this.get("linkedcss"),defaultblock:this.get("defaultblock")}),n=this.frame),n.hasPlugin("exec")||n.plug(e.Plugin.ExecCommand),n.after("ready",e.bind(this._afterFrameReady,this)),n.addTarget(this),n.set("content",this.get("content")),n.render(t),this},focus:function(e){return this.frame.focus(e),this},show:function(){return this.frame.show(),this},hide:function(){return this.frame.hide(),this},getContent:function(){var e="",t=this.getInstance();return t&&t.EditorSelection&&(e=t.EditorSelection.unfilter()),e=e.replace(/ _yuid="([^>]*)"/g,""),e}},{NORMALIZE_FONTSIZE:function(e){var t=e.getStyle("fontSize"),n=t;switch(t){case"-webkit-xxx-large":t="48px";break;case"xx-large":t="32px";break;case"x-large":t="24px";break;case"large":t="18px";break;case"medium":t="16px";break;case"small":t="13px";break;case"x-small":t="10px"}return n!==t&&e.setStyle("fontSize",t),t},TABKEY:'<span class="tab">&nbsp;&nbsp;&nbsp;&nbsp;</span>',FILTER_RGB:function(e){if(e.toLowerCase().indexOf("rgb")!==-1){var t=new RegExp("(.*?)rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)(.*?)","gi"),n=e.replace(t,"$1,$2,$3,$4,$5").split(","),r,i,s;n.length===5&&(r=parseInt(n[1],10).toString(16),i=parseInt(n[2],10).toString(16),s=parseInt(n[3],10).toString(16),r=r.length===1?"0"+r:r,i=i.length===1?"0"+i:i,s=s.length===1?"0"+s:s,e="#"+r+i+s)}return e},TAG2CMD:{b:"bold",strong:"bold",i:"italic",em:"italic",u:"underline",sup:"superscript",sub:"subscript",img:"insertimage",a:"createlink",ul:"insertunorderedlist",ol:"insertorderedlist"},NC_KEYS:{8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete"},USE:["node","selector-css3","editor-selection","stylesheet"],NAME:"editorBase",STRINGS:{title:"Rich Text Editor"},ATTRS:{content:{validator:n.isString,value:'<br class="yui-cursor">',setter:function(t){return t.substr(0,1)==="\n"&&(t=t.substr(1)),t===""&&(t='<br class="yui-cursor">'),t===" "&&e.UA.gecko&&(t='<br class="yui-cursor">'),this.frame.set("content",t)},getter:function(){return this.frame.get("content")}},dir:{validator:n.isString,writeOnce:!0,value:"ltr"},linkedcss:{validator:"_validateLinkedCSS",value:"",setter:function(e){return this.frame&&this.frame.set("linkedcss",e),e}},extracss:{validator:n.isString,value:"",setter:function(e){return this.frame&&this.frame.set("extracss",e),e}},defaultblock:{validator:n.isString,value:"p"}}}),e.EditorBase=r},"3.16.0",{requires:["base","frame","node","exec-command","editor-selection"]});
YUI.add("comms-editor-autobidi",function(D){var B=function(){B.superclass.constructor.apply(this,arguments);},A="host",C="text";D.extend(B,D.Base,{autoBidiOff:false,watchForAction:true,redetectDirection:false,disableAutoBidi:false,throttledFindEmptyParas:null,findEmptyParas:function(){var F=this.get(A).getInstance();if(F){var E=F.Selection.DEFAULT_BLOCK_TAG;if(F.all(E).size()===0){E=B.PARAGRAPHS;}F.all(E).each(function(H){var G=H.get(C);if(G===""||G===" "||G==="\u00A0"){H.setData(B.AUTO_BIDI,true);}});}},_onKeyDown:function(E){if(this.watchForAction&&!(E.crtlKey||E.metaKey)){this.throttledFindEmptyParas();this.watchForAction=false;}},autoBidi:function(J){var I,H,G,F,E;if(((J&&J.keyCode&&!B.NODETECT_KEYS[J.keyCode])||(J&&J.type&&J.type==="paste"))&&!this.autoBidiOff&&!this.disableAutoBidi){I=this.get(A).getInstance();E=I.Selection.DEFAULT_BLOCK_TAG;H=new I.Selection();G=H.anchorNode;if(G&&!(G.test(B.PARAGRAPHS))){G=G.ancestor(B.PARAGRAPHS);}if((G&&G.getData(B.AUTO_BIDI))||(G&&this.redetectDirection)){F=D.Intl.detectDirection(G.get(C));if(F){G.setAttribute("dir",F);G.setData(B.AUTO_BIDI,false);this.redetectDirection=false;}}}},_afterNodeChange:function(E){if(E.changedType==="mouseup"||(E.changedType==="keydown"&&(E.changedEvent.crtlKey||E.changedEvent.metaKey))){this.watchForAction=true;this.redetectDirection=true;}if(B.AFFECTING_EVENTS[E.changedType]){this.watchForAction=true;this.disableAutoBidi=false;}else{if(B.REDIRECTING_EVENTS[E.changedType]&&!this.disableAutoBidi){this.redetectDirection=true;}else{if(E.changedType!=="keydown"&&E.changedType!=="keyup"){D.later(50,this,this.autoBidi,E.changedEvent);}}}},_disableAutoBidi:function(){this.watchForAction=false;this.disableAutoBidi=true;},_turnAutoBidiOff:function(E){this.autoBidiOff=E.status;},initializer:function(){var E=this.get(A);E.on("ready",function(){E.after("nodeChange",D.bind(this._afterNodeChange,this));E.frame.on("dom:keydown",D.bind(this._onKeyDown,this));E.on("disableautobidi",D.bind(this._disableAutoBidi,this));E.on("turnautobidioff",D.bind(this._turnAutoBidiOff,this));this.throttledFindEmptyParas=D.throttle(D.bind(this.findEmptyParas,this),150);},this);}},{PARAGRAPHS:"P, DIV, UL, OL",AUTO_BIDI:"autobidi",AFFECTING_EVENTS:{"enter":true,"backspace":true,"delete":true},REDIRECTING_EVENTS:{"home":true,"left":true,"right":true},NODETECT_KEYS:{8:"backspace",9:"tab",13:"enter",16:"shift",18:"alt",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete"},NAME:"editorAutoBidi",NS:"editorAutoBidi",ATTRS:{host:{value:false}}});D.namespace("Plugin");D.Plugin.EditorAutoBidi=B;},"1.0.0",{requires:["editor-base","comms-intl-bidi"]});YUI.add("contacts-api-config",function(F){F.namespace("contacts");var A=F.contacts,D={1:"asc",2:"desc"},C={1:"first",3:"last",6:"email"},B;B=function(){var I=this,H=function(J){return !!J;},G={baseHost:{validator:H},uri:{},headers:{},wssid:{},guid:{},requestFn:{},wspath:{value:"/ws/sd",validator:H},start:{},count:{value:"max",validator:H},sortfields:{},out:{value:"guid,nickname,email,yahooid,otherid,phone,jobtitle,company,notes,link,custom,name,address,birthday,anniversary,image"},prefs:{value:null},sort:{},fields:{},view:{value:["compact"]},rev:{value:0,validator:H},loadSmartContacts:{value:true},reloadOnUpdate:{value:true},fieldsToProcess:{value:["name","nickname","email","yahooid"],validator:function(J){return F.Lang.isArray(J);}}};I.addAttrs(G);I.setSortField=function(J){I.set("sortfields",C[J]);return I.get("sortfields");};I.setSortOrder=function(J){I.set("sort",D[J]);return I.get("sort");};};F.augment(B,F.Attribute);A.config=new B();if(A.clientConfig){A.config.setAttrs(A.clientConfig);}else{if(NeoConfig){var E={guid:NeoConfig.neoguid,wssid:NeoConfig.wssid,wspath:NeoConfig.socdirProxyPath,sortfields:"first",sort:"asc"};if(F.Object.getValue(F,["common","net","SessionMgr"])){E.requestFn=F.common.net.SessionMgr.requestProxy;}A.config.setAttrs(E);}}},"1.0.0",{requires:["attribute"]});YUI.add("contacts-api-cache",function(F){F.namespace("contacts");var B=F.contacts,C=F.contacts.config,E,D=F.Lang,A={CONTACT_CHANGED:"contacts:api:contactChanged",CONTACTS_LOADED:"contacts:api:loaded",CONTACT_IMAGE_UPDATED:"contacts:api:imageUpdated"};B.EVENTS=A;E=function(){var O=this,G=false,N=0,L,P={},T={},U={},Q={},R=[],J=null,I,H,K,S,M;I=function(V,Y){var W,X;if(!Y){Q={};}for(W in V){if(V.hasOwnProperty(W)){X=V[W];Q[X.id]=Q[X.id]||X;if(Y){Q[X.id].contacts=Q[X.id].contacts||[];Q[X.id].contacts.push(Y.id);}}}};M=function(a,Z){var V=a.fields,b,d,W,c,Y,X=P[a.id]={typedFields:{},typedFieldValues:{}};if(!V){return;}Z=Z||[];b=Z.length>0;for(Y in V){if(V.hasOwnProperty(Y)){d=V[Y];W=d.value;c=d.type;if(b&&F.Array.indexOf(Z,c)===-1){continue;}if(!X.typedFields[c]){X.typedFields[c]=[];}if(!X.typedFieldValues[c]){X.typedFieldValues[c]=[];}if(c==="name"){if(W){if(W.familyName&&W.familyName.indexOf("<")!==-1){W.familyName="";}if(W.givenName&&W.givenName.indexOf("<")!==-1){W.givenName="";}}}X.typedFields[c].push(d);X.typedFieldValues[c].push(W);}}};O.loadSortPrefs=function(V,W){if(!J){J={};}J.sort_order=V;J.sort_field=W;};O.setSortPrefs=function(V,W){O.loadSortPrefs(V,W);F.later(10,O,F.contacts.api.load,[1]);};O.getSortPrefs=function(){return J;};O.load=function(Y){var b,a=C.get("loadSmartContacts"),Z,V=C.get("fieldsToProcess"),W=[];var X=Y.contacts.contact||[];U={};R=[];T={};Q={};P={};for(Z=0;Z<X.length;Z++){b=X[Z];if(!a&&b.isSmartContact){continue;}W.push(b);M(b,V);R[Z]=b.id;U[b.id]=b;H(b);I(b.categories,b);}L=Y;L.contacts.contact=W;L.contacts.count=L.contacts.total=W.length;G=true;F.later(10,O,O.fire,[A.CONTACTS_LOADED]);};O.removeFromCategories=function(V){var X=V.categories||[],W=X.length,Y,Z,a;for(Y=0;Y<W;Y++){Z=X[Y].id;a=Q[Z].contacts;if(a){a.splice(F.Array.indexOf(a,V.id),1);}}};O.update=function(k){var g,f,a,c,b=C.get("fieldsToProcess"),X=[],j=[],d=[],Z=[],e=[],h=[],W=[],V,Y;if(k.syncresult){N=k.syncresult.rev;g=k.syncresult.diff.contacts;W=k.syncresult.results.contacts;}else{if(D.isArray(k)){g=k;}else{g=[k.contact];}}for(Y=0;Y<W.length;Y+=1){f=W[Y];c=f.op;a=U[f.id];switch(c){case"remove":h.push(a);break;case"add":Z.push(f);break;case"update":e.push(f);break;}}for(Y=0;Y<g.length;Y+=1){f=g[Y];c=f.op||"add";a=U[f.id];switch(c){case"remove":if(a){K(a);R.splice(F.Array.indexOf(R,a.id),1);O.removeFromCategories(a);d.push(a);}break;default:if(a){K(a);j.push(f);}else{X.push(f);}M(f,b);I(f.categories,f);U[f.id]=f;H(f);break;}}V={created:X,modified:j,removed:d,createdCurrent:Z,modifiedCurrent:e,removedCurrent:h};if(X.length||j.length){if(C.get("reloadOnUpdate")){F.later(10,O,F.contacts.api.load,[1]);}}else{F.later(10,O,O.fire,[A.CONTACTS_LOADED]);}F.later(10,O,O.fire,[A.CONTACT_CHANGED,V]);return V;};O.updateCategories=function(){var V={categories:Q};if(C.get("reloadOnUpdate")){F.later(10,O,F.contacts.api.load,[1]);}F.later(10,O,O.fire,[A.CONTACT_CHANGED,V]);};H=function(Y){var V,X,Z,W;V=P[Y.id].typedFieldValues.email;if(!V||V.length===0){return;}for(W in V){if(V.hasOwnProperty(W)){X=V[W];Z=X.toLowerCase();T[Z]=T[Z]||[];T[Z].push(Y);}}};K=function(Z){var V,Y,W,b,a,X;V=P[Z.id].typedFieldValues.email||[];a=Z.id;for(X in V){if(V.hasOwnProperty(X)){Y=V[X];b=Y.toLowerCase();W=T[b];if(W&&W[a]){W[a]=undefined;}}}};O.isLoaded=function(){return G;};O.getResponseObject=function(){return L;};O.getContactsData=function(){return P;};O.getContacts=function(){return U;};O.getEmails=function(){return T;};O.getCategories=function(){return Q;};O.getContactOrder=function(){return R;};O.getCurrentRevision=function(){return N;};O.setCurrentRevision=function(V){N=V;};O.loadTinyUserCard=function(W){var Z=W.contacts.contact,a,V=C.get("fieldsToProcess"),Y=[],X;for(X in Z){if(Z.hasOwnProperty(X)){a=Z[X];M(a,V);U[a.id]=a;H(a);Y.push(a);}}F.later(10,O,O.fire,[A.CONTACT_IMAGE_UPDATED,Y]);return Y;};O.getContactsByBucket=function(W,b,Y){var c,d=[],X,Z=W+b,a,V=[];if(Y){X=Q[Y];if(X){d=X.contacts||[];}}else{d=R||[];}for(a=W;a<Z;a++){c=d[a];if(c){V.push(U[c]);}else{break;}}return{contacts:V,total:d.length};};O.removeFlatContact=function(a,Z){var Y=P[a].flatContacts,W,V=Y.length,X;for(W=0;W<V;W++){X=Y[W];if(X.emailField&&X.emailField.id===Z){Y.splice(W,1);break;}}};O.removeField=function(b,Y){var W=U[b];if(W){var V=W.fields,Z,X=V.length,a;for(Z=0;Z<X;Z++){a=V[Z];if(a.id===Y){V.splice(Z,1);if(a.type==="email"){O.removeFlatContact(b,Y);}break;}}}};S=(function(){var V={broadcast:1,emitFacade:true};O.publish(A.CONTACT_CHANGED,V);O.publish(A.CONTACTS_LOADED,V);O.publish(A.CONTACT_IMAGE_UPDATED,V);}());};F.augment(E,F.EventTarget);B.cache=new E();},"1.0.0",{requires:["contacts-api-config","common-utils-stats"]});YUI.add("contacts-api-utils",function(D){D.namespace("contacts");var A=D.contacts,B=A.cache,C=function(){var E=this;E.getContactsByEmail=function(F){if(!F||F===""){return null;}return B.getEmails()[F.toLowerCase()];};E.isEmailKnown=function(F,G){var H,I;H=E.getContactsByEmail(F);if(G&&H){for(I=0;I<H.length;I++){if(!(H[I].isSmartContact)){return 1;}}return 0;}return(H)?1:0;};E.getContactById=function(G){var F;F=B.getContacts()[G];return F;};E.getContactsByIds=function(G){var H,F;H=[];for(F in G){if(G.hasOwnProperty(F)){H.push(E.getContactById(G[F]));}}return H;};E.getCategoryById=function(G){var F;F=B.getCategories()[G];return F;};E.areContactsLoaded=function(){return B.isLoaded();};E.getResponseObject=function(){return B.getResponseObject();};E.getContacts=function(H){var F,I={},G=B.getContacts();if(!H){return G;}for(F in G){if(G.hasOwnProperty(F)&&G[F].id>=0){I[F]=G[F];}}return I;};E.getSmartContacts=function(){var F,G={};for(F in B.getContacts()){if(B.getContacts().hasOwnProperty(F)&&B.getContacts()[F].id<0){G[F]=B.getContacts()[F];}}return G;};E.getAllContacts=function(){return B.getContacts();};E.getCategories=function(){return B.getCategories();};E.getContactsClone=function(G){var H={},F,I,K,J;if(G){F=B.getContactsByBucket(0,B.getContactOrder().length,G).contacts;K=F.length;while(K--){H[F[K].id]=F[K];}}else{I=E.getContacts();for(J in I){H[J]=I[J];}}return H;};E.getFlatContacts=function(){var G=E.getContacts(),I=[],H,J,F;for(J in G){if(G.hasOwnProperty(J)){H=E.getBasicFlatContacts(G[J]);for(F in H){if(H.hasOwnProperty(F)){I.push(H[F]);}}}}return I;};E.getFieldsByType=function(F,G){return B.getContactsData()[F.id].typedFields[G];};E.getFieldValues=function(G,J,H){var I,F,K;if(!G||!J){return null;}if(H){F=E.getFieldsByType(G,J);if(F){I=[];for(K in F){if(F.hasOwnProperty(K)&&D.Array.indexOf(K.flags,H)){I.push(K.value);}}}return I;}return B.getContactsData()[G.id].typedFieldValues[J];};E.getShownContactName=function(H){var G,K,F=D.Lang.trim,J=F(H.name),I=H.email;if(E.isEmailKnown(I)){G=E.getContactsByEmail(I);K=E.getFirstFieldValue(G[0],"nickname");if(K){return K;}K=E.getFirstFieldValue(G[0],"name");if(K){K=K.familyName+" "+K.givenName;if(F(K)){return K;}}}return J||I;};E.getName=function(H){var G,K,F=D.Lang.trim,J=F(H.name),I=H.email;if(E.isEmailKnown(I)){G=E.getContactsByEmail(I);K=E.getFirstFieldValue(G[0],"nickname");if(K){return K;}K=E.getFirstFieldValue(G[0],"name");if(K&&(K.givenName)){K=K.givenName;if(F(K)){return K;}}else{if(K&&K.familyName){K=K.familyName;if(F(K)){return K;}}}return J;}};E.getFirstFieldValue=function(F,H,G){if(!F||!H){return null;}return(E.getFieldValues(F,H,G)||[])[0];};E.getHigherPrecedenceFieldByType=function(G,H){if(!G){return null;}function I(K,J){return K.id-J.id;}var F=(E.getFieldsByType(G,H)||[]);if(F.sort(I)[0]){return F.sort(I)[0].value;}return null;};E.getBasicFlatContacts=function(F){var K=B.getContactsData()[F.id].flatContacts,G,L,J=F.isSmartContact?1:0,I,H;if(!K){K=[];L=E.getFieldsByType(F,"email")||[];G=E.getHigherPrecedenceFieldByType(F,"name")||{};I=(L.length&&L[0])||{value:""};for(H in L){if(L.hasOwnProperty(H)){K.push({firstname:G.givenName,lastname:G.familyName,middlename:G.middleName,nickname:E.getFirstFieldValue(F,"nickname"),email:L[H].value,emailField:L[H],id:F.id,isPrimary:L[H].value===I.value,isSmartContact:J,sc_score:L[H].sc_score});}}B.getContactsData()[F.id].flatContacts=K;}return K;};E.getContactImage=function(F){var H=B.getContactsData()[F.id].image,G;if(!H){G=E.getFirstFieldValue(F,"guid");if(G){H=G.image;}B.getContactsData()[F.id].image=H;}return H;};E.getSortedFlatContacts=function(F){return E.sortFlatContacts(E.getFlatContacts(),F);};E.sortFlatContacts=function(K,J){var I=J||["sc_score","firstname","lastname","email"];function F(L){var O=0,N,P=L.matches,M;if(P){for(N in P){if(P[N].length===1){M=P[N][0];if((M.endIndex-M.startIndex)===L[N].length){O++;}}}}return O;}function G(N,L,P){var O=N[P],M=L[P];if(P==="sc_score"){if(F(N)){O++;}if(F(L)){M++;}}if(O&&M){return(O===M)?null:(P==="sc_score")?((O>M)?-1:1):((O<M)?-1:1);}else{if(!O&&!M){return null;}}return(O)?-1:1;}function H(N,M){var L,O;for(O in I){if(I.hasOwnProperty(O)){L=G(N,M,I[O]);if(L){return L;}}}return 0;}K.sort(H);return K;};E.getContactsCacheBucket=function(H,G,F){return B.getContactsByBucket(H,G,F);};E.getContactOrder=function(){return B.getContactOrder();};E.loadSortPrefs=function(F,G){B.loadSortPrefs(F,G);};E.getSortPrefs=function(){return B.getSortPrefs();};E.getSortedContacts=function(){var I=E.getContacts(),J=E.getContactOrder(),H=J.length,F=[],G;for(G=0;G<H;G++){F.push(I[J[G]]);}return F;};E.getTotalContacts=function(){return B.getContactOrder().length;};};A.utils=new C();},"1.0.0",{requires:["contacts-api-cache","common-utils-stats"]});YUI.add("contacts-api-urigenerator",function(A){var E=A.contacts,L=E.utils,M,C=A.Lang,K="/v1/user/{guid}/contacts",J="/v1/user/{guid}/contact/{cid}",N="{field}.{condition}={query}",D={"asc":1,"desc":2,1:1,2:2},I={"first":-10001,"last":-10003,"email":4,"-10001":"first","-10003":"last",4:"email",1:-10001,3:-10003,6:4};if(A.common&&A.common.Utils){M=A.common.Utils;}function B(S,T,R){var U=S.split(" "),P,O="",Q=U.length;while(Q--){P=U[Q];if(P){if(O){O+=";";}O+=N.replace("{field}",T).replace("{condition}",R).replace("{query}",encodeURIComponent(P.replace(/,/g,"\\,")));}}return O;}function H(S,U){var V={id:S.id,op:"update",fields:[],categories:[]},Y=V.fields,R=S.fields||[],W=U.fields||[],P={},T,Z,O,X,Q;S=A.clone(S,true);U=A.clone(U,true);Q=R.length;while(Q--){P[parseInt(R[Q].id,10)]=R[Q];}Q=W.length;while(Q--){O=W[Q];T=parseInt(O.id,10);X=O.categories;Z=P[T];if(!Z){Y.push({op:"add",value:O.value,type:O.type,flags:O.flags||[]});if(X){Y[Y.length-1].categories=X;}}else{if(O.type!==Z.type||!M.congruent(O.value,Z.value,false)||!M.congruent(O.flags,Z.flags,false)||!M.congruent(X,Z.categories,false)){if(O.type==="yahooid"&&!M.congruent(X,Z.categories,false)){Y.push({op:"remove",id:Z.id});Y.push({op:"add",value:O.value,type:O.type,flags:O.flags||[],categories:X});}else{Y.push({op:"update",id:T,value:O.value,type:O.type,flags:O.flags||[]});if(X){Y[Y.length-1].categories=X;}}}delete P[T];}}for(Q in P){if(P.hasOwnProperty(Q)){Y.push({op:"remove",id:Q});}}return V;}function G(S,O){S=S||[];O=O||[];var V=[],U={},R,Q,T,P;P=S.length;while(P--){U[parseInt(S[P].id,10)]=S[P];}P=O.length;while(P--){R=O[P];T=R.id;Q=U[T];if(!Q){V.push({op:"addTo",id:T});}else{delete U[T];}}for(P in U){if(U.hasOwnProperty(P)){V.push({op:"removeFrom",id:S[P].id});}}return V;}function F(O){O.path=O.wspath||"ws/sd";O.baseHost=O.baseHost||A.config.win.location.host;this.params=undefined;this.method="GET";this.rev=O.rev;this.headers=O.headers||{"Content-Type":"application/json"};this.uri=O.uri||A.config.win.location.protocol+"//"+(O.baseHost+"/"+O.path).replace("//","/")+"?";this.uri+=(O.singleContact?J.replace("{guid}",O.guid).replace("{cid}",O.id):K.replace("{guid}",O.guid));if(O.prefs){this.uri+="/preferences;";}this.init(O);}F.prototype={init:function(P){var O=F.METHODS,Q=P.type||O.DEFAULT;switch(Q){case O.SAVE:case O.DELETE:if(C.isNumber(this.rev)&&this.rev>=0){this.method="PUT";if(P.isCreateList){this.setCreateListParams(P);}else{this.setPUTParams(P);}this.setPUTUri(P);}else{this.method="POST";if(P.isCreateList){this.setCreateListParams(P);}else{this.setPOSTParams(P);}this.setPOSTUri(P);}break;case O.SAVE_PREFS:this.method="POST";this.setPOSTPrefsParams(P);this.setPOSTUri(P);break;case O.DELETE_CATEGORIES:case O.SAVE_CATEGORIES:this.method="PUT";this.setCategoriesParams(P);this.setPUTUri(P);break;case O.UPDATE_CONTACTS_CATEGORIES:this.method="PUT";this.setUpdateCategoriesParams(P);this.setPUTUri(P);break;case O.REMOVE_FIELD:this.method="PUT";this.setRemoveFieldParams(P);this.setPUTUri(P);break;default:this.method="GET";this.setGETUri(P);break;}},getURI:function(){return this.uri;},getMethod:function(){return this.method;},setMethod:function(O){this.method=O;},getHeaders:function(){return this.headers;},setHeaders:function(O){this.headers=O;},getParams:function(){return this.params;},stripContact:function(O){if(O._data){O._data=undefined;}},setPOSTPrefsParams:function(R){var Q=R.prefs,P={},O=Q.sort_order,S=Q.sort_field;this.params={};if(Q){if(O){P.sort_order=D[O];}if(S){P.sort_type=I[S];}this.params.preferences=P;}},setPOSTParams:function(P){var O={};this.params={};if(P.contacts&&C.isArray(P.contacts)&&!C.isUndefined(P.contacts[0])){O=P.contacts[0];}this.stripContact(O);this.params.contact=O;},setPOSTUri:function(O){this.uri+="?format=json";if(O.wssid){this.uri+="&wssid="+O.wssid;}},setCreateListParams:function(R){var W=R.newContacts,S=R.updateContacts,O={"name":R.category,"op":"add","refid":"01"},P=[{"refid":"01",op:"addTo"}],Q={rev:this.rev,categories:[],contacts:[]},V,U,T;Q.categories.push(O);T=W.length;while(T--){V=W[T];U={"op":"add","fields":[{"value":{givenName:V.name},"type":"name","op":"add"},{"value":V.email,"type":"email","op":"add"}],"categories":P};Q.contacts.push(U);}T=S.length;while(T--){U={"id":S[T].id,"op":"update","categories":P};Q.contacts.push(U);}this.params={contactsync:Q};},setPUTParams:function(O){var Z=O.contacts||[],T=O.categories||[],Y=[],S=[],W,V,a,R,U,X,Q,P;this.params={contactsync:{rev:this.rev}};Q=Z.length;if(Q>0){while(Q--){W=A.clone(Z[Q]);if(C.isValue(W.id)){if(W.op&&W.op==="remove"){}else{V=L.getContactById(W.id);R=W.categories;a=V.categories;W=H(V,W);W.categories=G(a,R);}}else{W.op="add";X=W.fields||[];P=X.length;while(P--){X[P].op="add";}X=W.categories||[];P=X.length;while(P--){X[P]={op:"addTo",id:X[P].id};}this.stripContact(W);}Y.push(W);}this.params.contactsync.contacts=Y;}Q=T.length;if(Q>0){while(Q--){U=A.clone(T[Q]);if(C.isValue(U.id)){throw new Error("category modification not yet implemented");}else{U.op="add";}U.contacts=L.getContactsByIds(U.contacts);S.push(U);}this.params.contactsync.categories=S;}},setPUTUri:function(O){this.setPOSTUri(O);},setGETUri:function(P){var S,O=P.fields,Q,R=this.uri;if(O){for(Q in O){if(O.hasOwnProperty(Q)){S=O[Q];if(S.name&&S.condition&&S.value){R+=";"+S.name+"."+S.condition+"="+S.value;}}}}if(P.searchQuery&&P.searchField&&P.searchCondition){R+=";"+B(P.searchQuery,P.searchField,P.searchCondition);}if(P.out){R+=";out="+P.out;}if(P.start){R+=";start="+P.start;}if(P.count){R+=";count="+P.count;}if(P.sortfields){R+=";sort-fields="+P.sortfields;}if(P.sort){R+=";sort="+P.sort;}R+="?format=json";if(P.view){if(C.isArray(P.view)){R+="&view="+P.view.join("&view=");}else{R+="&view="+P.view;}}if(C.isValue(P.rev)){R+="&rev="+P.rev;}if(P.wssid){R+="&wssid="+P.wssid;}if(P.id){R+="&id="+P.id;}if(!P._sc){R+="&_sc=0";}this.uri=R;},setCategoriesParams:function(S){var P=S.categories||[],U={rev:this.rev,categories:[],contacts:[]},R=[],Q={},O,T=P.length;while(T--){O=P[T];if(O.id){if(O.op==="remove"){Q=O;
}else{Q={"op":"update","new":{"name":O.name},"old":{"id":O.id}};}}else{Q={"op":"add","name":O.name};}R.push(Q);}U.categories=R;this.params={contactsync:U};},setUpdateCategoriesParams:function(U){var S=U.categories.addTo||[],Z=S.length,Y=U.categories.removeFrom||[],V=Y.length,a=U.contacts,P=a.length,R=[],X=[],O=[],b=1,T={rev:this.rev,categories:[],contacts:[]},W,Q;W=Z;while(W--){Q=S[W];if(A.Lang.isNumber(Q)){X.push({"id":S[W],"op":"addTo"});}else{O.push({"name":Q,"op":"add","refid":b});X.push({"refid":b,"op":"addTo"});b++;}}W=V;while(W--){X.push({"id":Y[W],"op":"removeFrom"});}W=P;while(W--){R.push({"id":a[W],"op":"update","categories":X});}T.contacts=R;T.categories=O;this.params={contactsync:T};},setRemoveFieldParams:function(Q){var P={rev:this.rev,contacts:[]},O=false,U=Q.fieldId,R=Q.contactId,V=L.getContactById(R),X={"id":R},T=V.fields,W,S=T.length;while(S--){W=T[S];if(W.id!==U&&W.type!=="guid"){O=true;break;}}if(O){X.op="update";X.fields=[{"op":"remove","id":U}];}else{X.op="remove";}P.contacts=[X];this.params={contactsync:P};}};F.METHODS={DEFAULT:0,GETCONTACTS:1,SAVE:2,DELETE:3,SAVE_CATEGORIES:4,DELETE_CATEGORIES:5,SAVE_PREFS:6,UPDATE_CONTACTS_CATEGORIES:7,REMOVE_FIELD:8};A.namespace("contacts");E.URIGenerator=F;},"1.0.0",{requires:["contacts-api-utils"]});YUI.add("contacts-api-io",function(F){F.namespace("contacts");var A=F.contacts,D=F.Lang,E=F.JSON;function B(G,H){return function(L,J){var I={};if(!J){return G.failure(I,J,H);}try{I=G.parseJSON(J);}catch(K){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-comms-shared-src-contacts-api-io:1",K,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-comms-shared-src-contacts-api-io:1");return G.failure(I,J,H);}if(I.error||!G.isSuccess(J.status)){return G.failure(I,J,H);}return G.success(I,J,H);};}function C(G){this.io=null;this.maxRetries=2;this.retryCount=0;this.uriGenerator=A.URIGenerator;this.onSuccess=function(){};this.onFailure=function(){};this.hook=G;}C.prototype={parseJSON:function(H){var G={};if(typeof H.body==="string"){G=E.parse(H.body);}else{if(typeof H.body==="object"){G=H.body;}else{if(typeof H.responseText==="string"&&H.responseText!==""){G=E.parse(H.responseText);}else{F.fire("MailLog",{m:"contacts-api-io.Request.parseJSON",info:"Contacts API returned empty or unrecognized response"});throw new Error("no response body to parse");}}}G.status=H.status;G.statusText=H.statusText;return G;},isSuccess:function(G){switch(G){case 200:case 201:case 202:case 204:return true;}return false;},doRetry:function(G){switch(G){case 500:return true;}return false;},success:function(G,H,I){this.onSuccess(G,H,I);this.retryCount=0;},failure:function(G,H,J){var I=G.error&&G.error.detail&&(G.error.detail.match?G.error.detail.match(/-\d+/):null);if(("-50304"===I||!H||this.doRetry(H.status))&&this.retryCount<this.maxRetries){this.retryCount+=1;return F.later(100,this,function(){this.send(J);});}this.retryCount=0;G.errorCode=(!D.isUndefined(I)&&!D.isNull(I))?I:"-99999";this.onFailure(G,H,J);},send:function(J){var K=B(this,J),I=this,H=this.uriGenerator.getURI(),G={data:E.stringify(this.uriGenerator.getParams()),on:{success:K,failure:K},headers:this.uriGenerator.getHeaders(),method:this.uriGenerator.getMethod(),sync:false};if(this.hook){G.serviceCredType="loose";I.io=this.hook(H,G);}else{F.use("io",function(L){I.io=L.io(H,G);});}},abort:function(){if(this.io&&(typeof this.io.abort==="function")){this.io.abort();return true;}else{return false;}}};A.sendRequest=function(L,K,H,G,J){var I=new C(G,J);if(K){I.onSuccess=K;}if(H){I.onFailure=H;}if(L){I.uriGenerator=L;}I.send();return I;};A.Request=C;},"1.0.0",{requires:["contacts-api-urigenerator","json"]});YUI.add("contacts-api-adapter",function(e){"use strict";e.namespace("contacts");var t=e.contacts,n=t.URIGenerator,r=t.cache,i=e.Lang,s="CONTACTS",o,u;e.common&&e.common.Utils&&(o=e.common.Utils,u=new o.Stopwatch("ContactsRequest")),t.APIAdapter={},function(){function a(e,t,s,o,f,l){function d(n){s.push(n.contact);if(e.length===0){var u=r.update(s);f&&i.isFunction(f)&&f(u)}else a(e,t,s,o,f,l)}function v(n){if(e.length===0&&s.length>0)r.update(s);else if(e.length>0){a(e,t,s,o,f,l);return}l&&i.isFunction(l)&&l(n)}var c=t.requestFn||null,h,p={baseHost:t.baseHost,uri:t.uri,headers:t.headers,guid:t.guid,type:n.METHODS.SAVE,wspath:t.wspath,wssid:t.wssid};o?p.contacts=o:p.contacts=[e.shift()],h=new n(p),u(h,d,v,c,{contact:p.contacts})}function f(e,t,s,o){function c(e){var t=r.update(e);s&&i.isFunction(s)&&s(t,e)}function h(e){o&&i.isFunction(o)&&o(e)}var a=t.requestFn||null,f,l={baseHost:t.baseHost,guid:t.guid,type:n.METHODS.SAVE,wspath:t.wspath,uri:t.uri,headers:t.headers,rev:r.getCurrentRevision(),wssid:t.wssid};i.isArray(e)||(e=[e]),l.contacts=e,f=new n(l),u(f,c,h,a)}var s=this,o=!1,u=t.sendRequest;s.getContact=function(s,o,a,f){function v(e){o&&i.isFunction(o)&&o(e)}function m(e){a&&i.isFunction(a)&&a(e)}var l,c,h,p,d;if(r.isLoaded()&&!f){l=r.getContacts()[s],l&&o&&i.isFunction(o)&&o({contact:l});return}c=t.config.getAttrs(),h=c.requestFn||null,p={baseHost:c.baseHost||e.config.win.location.host,uri:c.uri,headers:c.headers,guid:c.guid,wssid:c.wssid,type:n.METHODS.GETCONTACTS,start:c.start,count:c.count||"max",sortfields:c.sortfields,out:c.out,sort:c.sort,fields:c.fields,wspath:c.wspath,_sc:!1,view:c.view,rev:c.rev,singleContact:!0,id:s},d=new n(p),u(d,v,m,h)},s.getContacts=function(s,a,f){function d(e,t){var n=t.responseHeaders,s;n&&(s=n["X-Yahoo-Social-ContactsRev"]||n["X-Yahoo-Social-Contactsrev"]||n["x-yahoo-social-contactsrev"],s&&r.setCurrentRevision(parseInt(s,10))),r.load(e),a&&i.isFunction(a)&&a(r.getContacts()),o=!1}function v(e){o=!1,f&&i.isFunction(f)&&f(e)}if(r.isLoaded()&&!s){a&&i.isFunction(a)&&a(r.getContacts());return}var l=t.config.getAttrs(),c=l.requestFn||null,h,p={baseHost:l.baseHost||e.config.win.location.host,uri:l.uri,headers:l.headers,guid:l.guid,wssid:l.wssid,type:n.METHODS.GETCONTACTS,start:l.start,count:l.count||"max",sortfields:l.sortfields,out:l.out,sort:l.sort,fields:l.fields,wspath:l.wspath,_sc:typeof NeoConfig!="undefined"&&NeoConfig.smartcomplete_enabled,view:l.view};o&&a&&i.isFunction(a)?e.once("contacts:api:loaded",function(){a(r.getContacts())}):(o=!0,h=new n(p),u(h,d,v,c))},s.createList=function(e,s,o,a,f){function d(e){var t=r.update(e);a&&i.isFunction(a)&&a(t,e)}function v(e){f&&i.isFunction(f)&&f(e)}var l=t.config.getAttrs(),c=l.requestFn||null,h={baseHost:l.baseHost,uri:l.uri,headers:l.headers,guid:l.guid,type:n.METHODS.SAVE,wspath:l.wspath,wssid:l.wssid,rev:r.getCurrentRevision(),newContacts:e,updateContacts:s,category:o,isCreateList:!0},p=new n(h);p.setMethod("PUT"),u(p,d,v,c)},s.deleteContacts=function(e,s,o){function d(e){o&&i.isFunction(o)&&o(e)}function v(e){var t,n,o,u;if(e.status===202){t=e.syncresult.results,n=t.contacts,o=n.length;while(o--)if(n[o].error){e.errorCode=n[o].error,d(!1,e);return}}u=r.update(e),s&&i.isFunction(s)&&s(u,e)}var a=t.config.getAttrs(),f=a.requestFn||null,l=[],c=e&&i.isArray(e)?e.length:0,h={baseHost:a.baseHost,guid:a.guid,type:n.METHODS.DELETE,wspath:a.wspath,uri:a.uri,headers:a.headers,rev:r.getCurrentRevision(),wssid:a.wssid},p;while(c--)l.push({id:e[c],op:"remove"});h.contacts=l,p=new n(h),u(p,v,d,f)},this.getPreferences=function(e,s){function c(e){s&&i.isFunction(s)&&s(e)}function h(t,n,r){var s=t.preferences||"";e&&i.isFunction(e)&&e(s)}var o=t.config.getAttrs(),a=o.requestFn||null,f={baseHost:o.baseHost,guid:o.guid,wspath:o.wspath,uri:o.uri,headers:o.headers,rev:r.getCurrentRevision(),wssid:o.wssid,prefs:!0},l;l=new n(f),u(l,h,c,a)},this.saveContacts=function(e,n,s){var o=t.config.getAttrs(),u=r.getCurrentRevision();u>0||!i.isArray(e)||e.length===1?f(e,o,n,s):a(e,o,[],n,s)},this.getContactsTinyUserCard=function(s,o,a){function p(e){var t=r.loadTinyUserCard(e)[0];o&&i.isFunction(o)&&o(t)}function d(e){a&&i.isFunction(a)&&a(e)}var f=t.config.getAttrs(),l=f.requestFn||null,c={baseHost:f.baseHost||e.config.win.location.host,uri:f.uri,headers:f.headers,guid:f.guid,wssid:f.wssid,type:n.METHODS.GETCONTACTS,start:0,count:1,fields:[{name:"guid",condition:"is",value:s}],wspath:f.wspath,view:"tinyusercard"},h=new n(c);u(h,p,d,l)},this.saveCategory=function(e,s,o){function h(e){var t=e.syncresult.results,n,o;if(e.status===202){n=t.categories;if(n[0].error){e.errorCode=n[0].error,p(!1,e);return}}o=e.syncresult.diff,r.updateCategories(e),s&&i.isFunction(s)&&s(o,e)}function p(e){o&&i.isFunction(o)&&o(e)}var a=t.config.getAttrs(),f=a.requestFn||null,l={baseHost:a.baseHost,guid:a.guid,type:n.METHODS.SAVE_CATEGORIES,wspath:a.wspath,uri:a.uri,headers:a.headers,rev:r.getCurrentRevision(),categories:[e],wssid:a.wssid},c=new n(l);u(c,h,p,f)},this.deleteCategory=function(e,s,o){function h(e){var t=e.syncresult.results,n;if(e.status===202){n=t.categories;if(n[0].error){e.errorCode=n[0].error,p(!1,e);return}}r.updateCategories(e),s&&i.isFunction(s)&&s(e.syncresult.diff,e)}function p(e){o&&i.isFunction(o)&&o(e)}var a=t.config.getAttrs(),f=a.requestFn||null,l={baseHost:a.baseHost,guid:a.guid,type:n.METHODS.DELETE_CATEGORIES,wspath:a.wspath,uri:a.uri,headers:a.headers,rev:r.getCurrentRevision(),categories:[{id:e,op:"remove"}],wssid:a.wssid},c=new n(l);u(c,h,p,f)},this.updateContactsCategories=function(e,s,o,a,f){function d(e){var t=e.syncresult.results,n;if(e.status===202){n=t.categories;if(n[0].error){e.errorCode=n[0].error,v(!1,e);return}}r.updateCategories(e),a&&i.isFunction(a)&&a(e.syncresult.diff,e)}function v(e,t){f&&i.isFunction(f)&&f(t)}var l=t.config.getAttrs(),c=l.requestFn||null,h={baseHost:l.baseHost,guid:l.guid,type:n.METHODS.UPDATE_CONTACTS_CATEGORIES,wspath:l.wspath,uri:l.uri,headers:l.headers,rev:r.getCurrentRevision(),categories
:{addTo:s,removeFrom:o},contacts:e,wssid:l.wssid},p=new n(h);u(p,d,v,c)},this.removeField=function(e,s,o,a){function p(e){r.updateCategories(e),o&&i.isFunction(o)&&o(e.syncresult.diff,e)}function d(e,t){a&&i.isFunction(a)&&a(t)}var f=t.config.getAttrs(),l=f.requestFn||null,c={rev:r.getCurrentRevision(),contactId:e,fieldId:s,baseHost:f.baseHost,guid:f.guid,type:n.METHODS.REMOVE_FIELD,wspath:f.wspath,uri:f.uri,headers:f.headers,wssid:f.wssid},h=new n(c);u(h,p,d,l)},this.setSortField=function(e,s,o){function h(e){var t=e.preferences;t&&(r.setSortPrefs(t.sort_order,t.sort_type),s&&i.isFunction(s)&&s())}function p(e){o&&i.isFunction(o)&&o(e)}var a=t.config.getAttrs(),f=a.requestFn||null,l={baseHost:a.baseHost,guid:a.guid,type:n.METHODS.SAVE_PREFS,wspath:a.wspath,uri:a.uri,headers:a.headers,wssid:a.wssid,prefs:{sort_field:e}},c=new n(l);u(c,h,p,f)},this.setSortOrder=function(e,s,o){function h(e){var t=e.preferences;t&&(r.setSortPrefs(t.sort_order,t.sort_type),s&&i.isFunction(s)&&s())}function p(e){o&&i.isFunction(o)&&o(e)}var a=t.config.getAttrs(),f=a.requestFn||null,l={baseHost:a.baseHost,guid:a.guid,type:n.METHODS.SAVE_PREFS,wspath:a.wspath,uri:a.uri,headers:a.headers,wssid:a.wssid,prefs:{sort_order:e}},c=new n(l);u(c,h,p,f)},this.getSortPrefs=function(s,o){function h(e){var t=e.preferences;t&&t.sort_order&&t.sort_type&&(r.setSortPrefs(t.sort_order,t.sort_type),s&&i.isFunction(s)&&s())}function p(e){o&&i.isFunction(o)&&o(e)}if(r.getSortPrefs()){s&&i.isFunction(s)&&s(r.getSortPrefs());return}var a=t.config.getAttrs(),f=a.requestFn||null,l={baseHost:a.baseHost||e.config.win.location.host,uri:a.uri,headers:a.headers,guid:a.guid,wssid:a.wssid,type:n.METHODS.DEFAULT,wspath:a.wspath,prefs:!0},c=new n(l);u(c,h,p,f)},this.removeField=function(e,s,o,a){function p(e){r.updateCategories(e),o&&i.isFunction(o)&&o(e.syncresult.diff,e)}function d(e,t){a&&i.isFunction(a)&&a(t)}var f=t.config.getAttrs(),l=f.requestFn||null,c={rev:r.getCurrentRevision(),contactId:e,fieldId:s,baseHost:f.baseHost,guid:f.guid,type:n.METHODS.REMOVE_FIELD,wspath:f.wspath,uri:f.uri,headers:f.headers,wssid:f.wssid},h=new n(c);u(h,p,d,l)},this.searchContacts=function(e,r,s){function c(e){var t=e.contacts.contact||[];r&&i.isFunction(r)&&r(t)}function h(e){s&&i.isFunction(s)&&s(e)}var o=t.config.getAttrs(),a=o.requestFn||null,f={baseHost:o.baseHost,guid:o.guid,type:n.METHODS.GETCONTACTS,wspath:o.wspath,uri:o.uri,headers:o.headers,wssid:o.wssid,out:o.out,fields:o.fields,search:o.search,searchField:"all",searchCondition:"contains",searchQuery:e},l=new n(f);u(l,c,h,a)},this.createEmptyContact=function(){return{fields:[],categories:[]}}}.apply(t.APIAdapter)},"1.0.0",{requires:["contacts-api-io","contacts-api-cache","contacts-api-urigenerator","contacts-api-config","json","common-utils"]});
YUI.add("contacts-api",function(e){"use strict";e.namespace("contacts");var t=e.contacts,n=t.APIAdapter,r=t.cache,i=function(){var t=this;this.load=function(e,t,r){n.getContacts(e,t,r)},this.saveContacts=function(e,t,r){n.saveContacts(e,t,r)},this.deleteContacts=function(e,t,r){n.deleteContacts(e,t,r)},this.getPreferences=function(e,t){n.getPreferences(e,t)},this.saveCategory=function(e,t,r){n.saveCategory(e,t,r)},this.deleteCategory=function(e,t,r){n.deleteCategory(e,t,r)},this.createList=function(e,t,r,i,s){n.createList(e,t,r,i,s)},this.getContacts=function(e,t,r){if(typeof e!="boolean")return;n.getContacts(e,t,r)},this.getContact=function(e,t,r,i){n.getContact(e,t,r,i)},this.createEmptyContact=function(e,t){return n.createEmptyContact(e,t)},this.getContactImage=function(e,t,r){n.getContactsTinyUserCard(e,t,r)},this.searchContacts=function(e,t,r){n.searchContacts(e,t,r)},e.on("contacts:contactChanged",function(){t.load(1)}),this.setSortOrder=function(e,t,r){n.setSortOrder(e,t,r)},this.setSortField=function(e,t,r){n.setSortField(e,t,r)},this.getSortPrefs=function(e,t){n.getSortPrefs(e,t)},this.updateContactsCategories=function(e,t,r,i,s){n.updateContactsCategories(e,t,r,i,s)},this.removeEmail=function(e,t,r,i){n.removeField(e,t,r,i)},this.removeEmail=function(t,i,s){r.removeField(t,i);var o=e.contacts.utils.getContactById(t);o&&!o.isSmartContact&&n.removeField(t,i),s&&s()}};t.api=new i},"1.0.0",{requires:["contacts-api-adapter","contacts-api-config","contacts-api-cache","contacts-api-utils"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("editor-bidi",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r="host",i="dir",s="nodeChange",o="bidiContextChange",u="style";e.extend(n,e.Base,{lastDirection:null,firstEvent:null,_checkForChange:function(){var e=this.get(r),t=e.getInstance(),i=new t.EditorSelection,s,u;i.isCollapsed?(s=n.blockParent(i.focusNode,!1,t.EditorSelection.ROOT),s&&(u=s.getStyle("direction"),u!==this.lastDirection&&(e.fire(o,{changedTo:u}),this.lastDirection=u))):(e.fire(o,{changedTo:"select"}),this.lastDirection=null)},_afterNodeChange:function(e){if(this.firstEvent||n.EVENTS[e.changedType])this._checkForChange(),this.firstEvent=!1},_afterMouseUp:function(){this._checkForChange(),this.firstEvent=!1},initializer:function(){var t=this.get(r);this.firstEvent=!0,t.after(s,e.bind(this._afterNodeChange,this)),t.after("dom:mouseup",e.bind(this._afterMouseUp,this))}},{EVENTS:{"backspace-up":!0,"pageup-up":!0,"pagedown-down":!0,"end-up":!0,"home-up":!0,"left-up":!0,"up-up":!0,"right-up":!0,"down-up":!0,"delete-up":!0},BLOCKS:e.EditorSelection.BLOCKS,DIV_WRAPPER:"<DIV></DIV>",blockParent:function(t,r,i){var s=t,o,u;return i=i||e.EditorSelection.ROOT,s||(s=i),s.test(n.BLOCKS)||(s=s.ancestor(n.BLOCKS)),r&&s.compareTo(i)&&(o=e.Node.create(n.DIV_WRAPPER),s.get("children").each(function(e,t){t===0?u=e:o.append(e)}),u.replace(o),o.prepend(u),s=o),s},_NODE_SELECTED:"bidiSelected",addParents:function(t,r){var i,s,o;tester=function(e){if(!e.getData(n._NODE_SELECTED))return o=!1,!0},r=r||e.EditorSelection.ROOT;for(i=0;i<t.length;i+=1)t[i].setData(n._NODE_SELECTED,!0);for(i=0;i<t.length;i+=1)s=t[i].get("parentNode"),!r.compareTo(s)&&!s.getData(n._NODE_SELECTED)&&(o=!0,s.get("children").some(tester),o&&(t.push(s),s.setData(n._NODE_SELECTED,!0)));for(i=0;i<t.length;i+=1)t[i].clearData(n._NODE_SELECTED);return t},NAME:"editorBidi",NS:"editorBidi",ATTRS:{host:{value:!1}},RE_TEXT_ALIGN:/text-align:\s*\w*\s*;/,removeTextAlign:function(e){return e&&(e.getAttribute(u).match(n.RE_TEXT_ALIGN)&&e.setAttribute(u,e.getAttribute(u).replace(n.RE_TEXT_ALIGN,"")),e.hasAttribute("align")&&e.removeAttribute("align")),e}}),e.namespace("Plugin"),e.Plugin.EditorBidi=n,e.Plugin.ExecCommand.COMMANDS.bidi=function(t,s){var o=this.getInstance(),u=new o.EditorSelection,a=this.get(r).get(r).editorBidi,f,l,c,h=o.EditorSelection.ROOT,p,d,v;if(!a){e.error("bidi execCommand is not available without the EditorBiDi plugin.");return}return o.EditorSelection.filterBlocks(),u.isCollapsed?(l=n.blockParent(u.anchorNode,!1,h),l||(l=h.one(o.EditorSelection.BLOCKS)),l=n.removeTextAlign(l),s||(v=l.getAttribute(i),!v||v==="ltr"?s="rtl":s="ltr"),l.setAttribute(i,s),e.UA.ie&&(c=l.all("br.yui-cursor"),c.size()===1&&l.get("childNodes").size()===1&&c.remove()),f=l):(p=u.getSelected(),d=[],p.each(function(e){d.push(n.blockParent(e,!1,h))}),d=o.all(n.addParents(d,h)),d.each(function(e){var t=s;e=n.removeTextAlign(e),t||(v=e.getAttribute(i),!v||v==="ltr"?t="rtl":t="ltr"),e.setAttribute(i,t)}),f=d),a._checkForChange(),f}},"3.16.0",{requires:["editor-base"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("editor-br",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r="host",i="li";e.extend(n,e.Base,{_onKeyDown:function(t){if(t.stopped){t.halt();return}if(t.keyCode===13){var n=this.get(r),s=n.getInstance(),o=new s.EditorSelection;o&&(e.UA.ie&&(!o.anchorNode||!o.anchorNode.test(i)&&!o.anchorNode.ancestor(i))&&(n.execCommand("inserthtml",s.EditorSelection.CURSOR),t.halt()),e.UA.webkit&&(!o.anchorNode||!o.anchorNode.test(i)&&!o.anchorNode.ancestor(i))&&(n.frame._execCommand("insertlinebreak",null),t.halt()))}},_afterEditorReady:function(){var t=this.get(r).getInstance(),n;try{t.config.doc.execCommand("insertbronreturn",null,!0)}catch(i){}if(e.UA.ie||e.UA.webkit)n=t.EditorSelection.ROOT,n.test("body")&&(n=t.config.doc),t.on("keydown",e.bind(this._onKeyDown,this),n)},_onNodeChange:function(e){switch(e.changedType){case"backspace-up":case"backspace-down":case"delete-up":var t=this.get(r).getInstance(),n=e.changedNode,i=t.config.doc.createTextNode(" ");n.appendChild(i),n.removeChild(i)}},initializer:function(){var t=this.get(r);if(t.editorPara){e.error("Can not plug EditorBR and EditorPara at the same time.");return}t.after("ready",e.bind(this._afterEditorReady,this)),e.UA.gecko&&t.on("nodeChange",e.bind(this._onNodeChange,this))}},{NAME:"editorBR",NS:"editorBR",ATTRS:{host:{value:!1}}}),e.namespace("Plugin"),e.Plugin.EditorBR=n},"3.16.0",{requires:["editor-base"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("editor-para-base",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r="host",i="> p",s="p",o="<br>";e.extend(n,e.Base,{_getRoot:function(){return this.get(r).getInstance().EditorSelection.ROOT},_fixFirstPara:function(){var e=this.get(r),t=e.getInstance(),n,u,a=this._getRoot(),f=a.getHTML(),l=f.length?!0:!1;f===o&&(f="",l=!1),a.setHTML("<"+s+">"+f+t.EditorSelection.CURSOR+"</"+s+">"),u=a.one(i),n=new t.EditorSelection,n.selectNode(u,!0,l)},_afterEditorReady:function(){var e=this.get(r),t=e.getInstance(),n;t&&(t.EditorSelection.filterBlocks(),n=t.EditorSelection.DEFAULT_BLOCK_TAG,i="> "+n,s=n)},_afterContentChange:function(){var e=this.get(r),t=e.getInstance();t&&t.EditorSelection&&t.EditorSelection.filterBlocks()},_afterPaste:function(){var t=this.get(r),n=t.getInstance();e.later(50,t,function(){n.EditorSelection.filterBlocks()})},initializer:function(){var t=this.get(r);if(t.editorBR){e.error("Can not plug EditorPara and EditorBR at the same time.");return}t.after("ready",e.bind(this._afterEditorReady,this)),t.after("contentChange",e.bind(this._afterContentChange,this)),e.Env.webkit&&t.after("dom:paste",e.bind(this._afterPaste,this))}},{NAME:"editorParaBase",NS:"editorParaBase",ATTRS:{host:{value:!1}}}),e.namespace("Plugin"),e.Plugin.EditorParaBase=n},"3.16.0",{requires:["editor-base"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("editor-para",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r="host",i="nodeChange",s="parentNode",o="> p",u="p",a="<br>",f="firstChild",l="li";e.extend(n,e.Plugin.EditorParaBase,{_getRoot:function(){return this.get(r).getInstance().EditorSelection.ROOT},_onNodeChange:function(t){var n=this.get(r),i=n.getInstance(),c,h,p,d,v,m=i.EditorSelection.DEFAULT_BLOCK_TAG,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=":last-child",H,B,j,F,I,q=!1,R=this._getRoot(),U;switch(t.changedType){case"enter-up":H=this._lastPara?this._lastPara:t.changedNode,B=H.one("br.yui-cursor"),this._lastPara&&delete this._lastPara,B&&(B.previous()||B.next())&&B.ancestor(u)&&B.remove(),H.test(m)||(N=H.ancestor(m),N&&(H=N,N=null));if(H.test(m)){C=H.previous();if(C){F=C.one(D);while(!q)F?(I=F.one(D),I?F=I:q=!0):q=!0;F&&n.copyStyles(F,H)}}break;case"enter":e.UA.webkit&&t.changedEvent.shiftKey&&(n.execCommand("insertbr"),t.changedEvent.preventDefault()),t.changedNode.test("li")&&!e.UA.ie&&(c=i.EditorSelection.getText(t.changedNode),c===""&&(p=t.changedNode.ancestor("ol,ul"),j=p.getAttribute("dir"),j!==""&&(j=' dir = "'+j+'"'),p=t.changedNode.ancestor(i.EditorSelection.BLOCKS),d=i.Node.create("<p"+j+">"+i.EditorSelection.CURSOR+"</p>"),p.insert(d,"after"),t.changedNode.remove(),t.changedEvent.halt(),v=new i.EditorSelection,v.selectNode(d,!0,!1)));if(e.UA.gecko&&n.get("defaultblock")!=="p"){p=t.changedNode;if(!p.test(l)&&!p.ancestor(l)){p.test(m)||(p=p.ancestor(m)),d=i.Node.create("<"+m+"></"+m+">"),p.insert(d,"after"),v=new i.EditorSelection;if(v.anchorOffset){g=v.anchorNode.get("textContent"),h=i.one(i.config.doc.createTextNode(g.substr(0,v.anchorOffset))),y=i.one(i.config.doc.createTextNode(g.substr(v.anchorOffset))),w=v.anchorNode,w.setContent(""),E=w.cloneNode(),E.append(y),S=!1,T=w;while(!S)T=T.get(s),T&&!T.test(m)?(x=T.cloneNode(),x.set("innerHTML",""),x.append(E),b=T.get("childNodes"),U=!1,b.each(function(e){U&&x.append(e),e===w&&(U=!0)}),w=T,E=x):S=!0;y=E,v.anchorNode.append(h),y&&d.append(y)}d.get(f)&&(d=d.get(f)),d.prepend(i.EditorSelection.CURSOR),v.focusCursor(!0,!0),c=i.EditorSelection.getText(d),c!==""&&i.EditorSelection.cleanCursor(),t.changedEvent.preventDefault()}}break;case"keyup":e.UA.gecko&&R&&R.getHTML().length<20&&(R.one(o)||this._fixFirstPara());break;case"backspace-up":case"backspace-down":case"delete-up":e.UA.ie||(k=R.all(o),A=R,k.item(0)&&(A=k.item(0)),L=A.one("br"),L&&(L.removeAttribute("id"),L.removeAttribute("class")),h=i.EditorSelection.getText(A),h=h.replace(/ /g,"").replace(/\n/g,""),M=A.all("img"),h.length===0&&!M.size()&&(A.test(u)||this._fixFirstPara(),O=null,t.changedNode&&t.changedNode.test(u)&&(O=t.changedNode),!O&&n._lastPara&&n._lastPara.inDoc()&&(O=n._lastPara),O&&!O.test(u)&&(O=O.ancestor(u)),O&&!O.previous()&&O.get(s)&&O.get(s).compareTo(R)&&(t.changedEvent.frameEvent.halt(),t.preventDefault())),e.UA.webkit&&t.changedNode&&(t.preventDefault(),A=t.changedNode,A.test("li")&&!A.previous()&&!A.next()&&(c=A.get("innerHTML").replace(a,""),c===""&&A.get(s)&&(A.get(s).replace(i.Node.create(a)),t.changedEvent.frameEvent.halt(),i.EditorSelection.filterBlocks())))),e.UA.gecko&&this._fixGeckoOnBackspace(i)}e.UA.gecko&&t.changedNode&&!t.changedNode.test(m)&&(O=t.changedNode.ancestor(m),O&&(this._lastPara=O))},_fixGeckoOnBackspace:function(e){var t=new e.EditorSelection,n,r;if(!t.isCollapsed||t.anchorNode.get("nodeName")!=="P"||t.anchorOffset===0)return;r=t.anchorNode.get("childNodes"),n=t.anchorNode.get("lastChild");if(t.anchorOffset!==r.size()||n.get("nodeName")!=="BR")return;if(t.anchorOffset===1){t.selectNode(t.anchorNode,!0);return}n=n.get("previousSibling");if(n.get("nodeType")!==Node.TEXT_NODE)return;offset=n.get("length"),t.getEditorOffset()===offset&&t.selectNode(n,!0,offset)},initializer:function(){var t=this.get(r);if(t.editorBR){e.error("Can not plug EditorPara and EditorBR at the same time.");return}t.on(i,e.bind(this._onNodeChange,this))}},{NAME:"editorPara",NS:"editorPara",ATTRS:{host:{value:!1}}}),e.namespace("Plugin"),e.Plugin.EditorPara=n},"3.16.0",{requires:["editor-para-base"]});
YUI.add('search_strings', function(Y) {
Y.namespace("mail");
Y.mix(strings,{"str_dm_title":"\u4fe1\u4ef6\u641c\u5c0b\u5c0f\u79d8\u8a23","str_dm_description":"\u8acb\u5148\u641c\u5c0b\u300c\u4e3b\u65e8\u300d\uff0c\u7136\u5f8c\u4fbf\u53ef\u5728\u4e3b\u65e8\u884c\u5167\u641c\u5c0b","str_dm_pretty_url":"\u66f4\u591a\u79d8\u8a23","str_dm_note":"\u5ee3\u544a","str_srch_ad_abbr":"\u5ee3\u544a","str_search_ads_title":"Sponsored","str_srch_ad_osb":"\u5b98\u65b9\u7db2\u7ad9","str_reviews":"\u8a55\u50f9","str_move_message_success_notification_plural":"{{num}} \u5247\u8a0a\u606f\u5df2\u79fb\u81f3 {{folder}}","str_move_message_success_notification_singular":"1 \u5247\u8a0a\u606f\u5df2\u79fb\u81f3 {{folder}}","str_move_message_fail_notification":"\u4fe1\u4ef6\u79fb\u52d5\u5931\u6557\u3002\u8acb\u91cd\u65b0\u6574\u7406\u5f8c\u518d\u8a66\u4e00\u6b21\u3002","str_search_unread_count":"{{count}} \u5c01\u672a\u8b80\u53d6","str_conv_title_conversation_history":"\u4ea4\u8ac7\u7d00\u9304","str_tog_snippet_hellip":true,"str_menu_sort_sender_up":"\u5bc4\u4ef6\u8005","str_menu_sort_attachment_up":"\u9644\u4ef6\u6a94\u6848","str_srch_folder":"\u4fe1\u4ef6\u5323\uff1a {{folder}}","str_smart_view_empty_financial":"\u6aa2\u8996\u6240\u6709\u80a1\u5e02\u76f8\u95dc\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_important":"\u6aa2\u8996\u6240\u6709\u4f86\u81ea\u524d 20 \u540d\u5e38\u7528\u806f\u7d61\u4eba\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_other":"\u6aa2\u8996\u6240\u6709 {{TYPE}} \u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_personal":"\u6aa2\u8996\u6240\u6709\u4f86\u81ea\u500b\u4eba\uff08\u975e\u7cfb\u7d71\uff09\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_shopping":"\u6aa2\u8996\u6240\u6709\u8cfc\u7269\u76f8\u95dc\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_social":"\u6aa2\u8996\u6240\u6709\u7684\u793e\u4ea4\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_starred":"\u6aa2\u8996\u6240\u6709\u5df2\u6a19\u793a\u661f\u865f\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_travel":"\u6aa2\u8996\u6240\u6709\u65c5\u904a\u76f8\u95dc\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_empty_unread":"\u6aa2\u8996\u6240\u6709\u672a\u8b80\u53d6\u7684\u96fb\u5b50\u4fe1\u4ef6\u3002","str_smart_view_financial":"\u7406\u8ca1","str_smart_view_important":"\u91cd\u8981","str_smart_view_personal":"\u500b\u4eba","str_smart_view_shopping":"\u8cfc\u7269","str_smart_view_social":"\u793e\u4ea4","str_smart_view_starred":"\u5df2\u6a19\u793a\u661f\u865f","str_smart_view_travel":"\u65c5\u904a","str_smart_view_unread":"\u672a\u8b80\u53d6","str_srch_contacts_search_from_instead_title":"\u6539\u70ba (\u540c\u6642) \u641c\u5c0b {{searchingContact}} \u50b3\u9001\u7684\u4fe1\u4ef6\u548c\u6a94\u6848","str_srch_contacts_search_from_instead":"\u6539\u70ba\u641c\u5c0b {{searchingContact}} \u50b3\u9001\u7684\u4fe1\u4ef6\u548c\u6a94\u6848","str_srch_contacts_search_to_instead":"\u6539\u70ba\u641c\u5c0b\u50b3\u9001\u7d66 {{searchingContact}} \u7684\u4fe1\u4ef6\u548c\u6a94\u6848","str_srch_contacts_search_to_instead_title":"\u6539\u70ba (\u540c\u6642) \u641c\u5c0b\u50b3\u9001\u7d66 {{searchingContact}} \u7684\u4fe1\u4ef6\u548c\u6a94\u6848","str_srch_no_results":"\u6c92\u6709\u627e\u5230\u4fe1\u4ef6","str_srch_nothing":"\u6c92\u6709\u627e\u5230\u7d50\u679c","str_srch_nothing_desc":"\u627e\u4e0d\u5230\u8207\u60a8\u7684\u67e5\u8a62\u76f8\u7b26\u7684\u4fe1\u4ef6","str_srch_nothing_help":"\u5354\u52a9\u6211\u5011\u627e\u5230\u60a8\u9700\u8981\u7684\u5167\u5bb9\uff1a","str_srch_nothing_tip1":"\u6aa2\u67e5\u641c\u5c0b\u5b57\u4e32\u7684\u62fc\u5b57","str_srch_nothing_tip2":"\u8acb\u5617\u8a66\u4f7f\u7528\u66f4\u666e\u904d\u7684\u641c\u5c0b\u5b57\u4e32\u3002","str_srch_nothing_tip3":"\u5982\u679c\u60a8\u900f\u904e\u95dc\u9375\u5b57\u9032\u884c\u641c\u5c0b\uff0c\u8acb\u5617\u8a66\u6539\u70ba\u900f\u904e\u5bc4\u4ef6\u8005\u9032\u884c\u641c\u5c0b\u3002","str_srch_undo_attachtype_attr":"{{refineattachcat}}","str_srch_undo_folder_attr":"{{folder}}","str_srch_undo_sender_attr":"{{recipient}}","str_srch_undo_date_attr":"{{refinedate}}","str_srch_undo_flag_attr":"{{refineflag}}","str_srch_sender_attr":"{{recipient}}","str_srch_attachtype_attr":"{{refineattachcat}}","str_srch_date_attr":"{{refinedate}}","str_srch_folder_attr":"{{folder}}","str_srch_flag_attr":"{{refineflag}}","str_mail_date_last_week":"\u4e0a\u9031","str_mail_date_older":"\u8f03\u820a","str_mail_dateformat_AM_l10n":"AM","str_mail_dateformat_PM_l10n":"PM","str_mail_day":"\u65e5","str_mail_earlier_month":"{{month}}\u6708\u521d","str_mail_earlier_this_month":"\u672c\u6708\u521d","str_mail_earlier_this_week":"\u672c\u5468\u521d","str_mail_earlier_this_year":"\u4eca\u5e74\u521d","str_mail_earlier_year":"{{year}}\u5e74\u521d","str_mail_month":"\u6708","str_mail_month_abbr_april":"4\u6708","str_mail_month_abbr_august":"8\u6708","str_mail_month_abbr_december":"12\u6708","str_mail_month_abbr_february":"2\u6708","str_mail_month_abbr_january":"1\u6708","str_mail_month_abbr_july":"7\u6708","str_mail_month_abbr_june":"6\u6708","str_mail_month_abbr_march":"3\u6708","str_mail_month_abbr_may":"5\u6708","str_mail_month_abbr_november":"11\u6708","str_mail_month_abbr_october":"10\u6708","str_mail_month_abbr_september":"9\u6708","str_mail_month_april":"4\u6708","str_mail_month_august":"8\u6708","str_mail_month_december":"12\u6708","str_mail_month_february":"2\u6708","str_mail_month_january":"1\u6708","str_mail_month_july":"7\u6708","str_mail_month_june":"6\u6708","str_mail_month_march":"3\u6708","str_mail_month_may":"5\u6708","str_mail_month_november":"11\u6708","str_mail_month_october":"10\u6708","str_mail_month_september":"9\u6708","str_mail_plus_in_product_link_text":"\u4e0d\u518d\u770b\u5230\u5ee3\u544a\uff01\u8a66\u7528 VIP \u4fe1\u7bb1\u2026","str_mail_recent_results":"\u6700\u8fd1\u7684\u7d50\u679c","str_mail_this_week":"\u672c\u9031","str_mail_today":"\u4eca\u5929","str_mail_two_weeks_ago":"\u5169\u9031\u524d","str_mail_weekday_abbr_friday":"\u9031\u4e94","str_mail_weekday_abbr_monday":"\u9031\u4e00","str_mail_weekday_abbr_saturday":"\u9031\u516d","str_mail_weekday_abbr_sunday":"\u9031\u65e5","str_mail_weekday_abbr_thursday":"\u9031\u56db","str_mail_weekday_abbr_tuesday":"\u9031\u4e8c","str_mail_weekday_abbr_wednesday":"\u9031\u4e09","str_mail_weekday_friday":"\u661f\u671f\u4e94","str_mail_weekday_monday":"\u661f\u671f\u4e00","str_mail_weekday_saturday":"\u661f\u671f\u516d","str_mail_weekday_sunday":"\u661f\u671f\u65e5","str_mail_weekday_thursday":"\u661f\u671f\u56db","str_mail_weekday_tuesday":"\u661f\u671f\u4e8c","str_mail_weekday_wednesday":"\u661f\u671f\u4e09","str_mail_year":"\u5e74","str_mail_yesterday":"\u6628\u5929","str_srch_add_filters":"\u65b0\u589e\u81ea\u52d5\u5206\u985e","str_srch_after":"\u5728\u4e0b\u5217\u6642\u9593\u4e4b\u5f8c\uff1a","str_srch_also_try":"\u9806\u4fbf\u8a66\u8a66\uff1a","str_srch_before":"\u5728\u4e0b\u5217\u6642\u9593\u4e4b\u524d\uff1a","str_srch_bmp":"BMP","str_srch_contacts_nothing_desc":"\u6211\u5011\u627e\u4e0d\u5230\u4f86\u81ea {{searchingContact}} \u7684\u4fe1\u4ef6\u548c\u6a94\u6848","str_srch_date_last_month":"\u4e0a\u500b\u6708","str_srch_date_last_week":"\u4e0a\u9031","str_srch_date_today":"\u4eca\u5929","str_srch_doc":"DOC","str_srch_docx":"DOCX","str_srch_dot":"DOT","str_srch_dotx":"DOTX","str_srch_enter_full":"-- \u8f38\u5165\u4ee5\u9032\u884c\u5b8c\u6574\u641c\u5c0b","str_srch_enter_search_terms":"\u8acb\u8f38\u5165\u4e00\u9805\u6216\u591a\u9805\u7684\u641c\u5c0b\u689d\u4ef6","str_srch_enter_search_terms_title":"\u672a\u8f38\u5165\u641c\u5c0b\u689d\u4ef6\/\u95dc\u9375\u5b57","str_srch_find_by_date":"\u5c0b\u627e\u6700\u8fd1\u6536\u5230\u7684\u4fe1\u4ef6\uff1a","str_srch_find_by_file":"\u5c0b\u627e\u6709\u76f8\u7247\u3001\u8996\u8a0a\u6a94\u548c Word \u6587\u4ef6\u7b49\u593e\u6a94\u7684\u4fe1\u4ef6\u3002","str_srch_find_by_person":"\u5c0b\u627e\u4f86\u81ea\u7279\u5b9a\u5bc4\u4ef6\u8005\u7684\u4fe1\u4ef6\u3002\u8acb\u8f38\u5165\u540d\u7a31\u3001Yahoo \u5947\u6469\u5e33\u865f\u6216\u96fb\u5b50\u4fe1\u7bb1\u3002","str_srch_flagged":"\u5df2\u6a19\u793a\u661f\u865f","str_srch_forwarded":"\u5df2\u8f49\u5bc4","str_srch_from":"\u5bc4\u4ef6\u8005\ufe30","str_srch_htm":"HTM","str_srch_jpeg":"JPEG","str_srch_jpg":"JPG","str_srch_more_from":"\u66f4\u591a\u4f86\u81ea {{sender}} \u7684\u4fe1\u4ef6","str_srch_more_from_attr":"\u5c0b\u627e\u6240\u6709\u4f86\u81ea{{sender}}\u7684\u4fe1\u4ef6","str_srch_mp3":"MP3","str_srch_mpeg":"MPEG","str_srch_mpg":"MPG","str_srch_msword":"Word","str_srch_notrefined":"\u70ba\u4e86\u80fd\u66f4\u5feb\u986f\u793a\u672c\u6b21\u641c\u5c0b\u7d50\u679c\uff0c\u6211\u5011\u6c92\u6709\u5efa\u7acb\u641c\u5c0b\u689d\u4ef6\u3002","str_srch_pagination_footer":"\u7b2c{{current}}\u9801\uff0c\u5171{{total}}\u9801","str_srch_person_btn":"\u641c\u5c0b","str_srch_person_btn_attr":"\u641c\u5c0b","str_srch_png":"PNG","str_srch_pot":"POT","str_srch_potx":"POTX","str_srch_ppt":"PPT","str_srch_pptx":"PPTX","str_srch_read":"\u5df2\u8b80\u53d6","str_srch_refineby_attachment":"\u593e\u6a94","str_srch_refineby_date":"\u65e5\u671f","str_srch_refineby_event":"\u4e8b\u4ef6\/\u5f85\u8fa6\u4e8b\u9805","str_srch_refineby_folder":"\u4fe1\u4ef6\u5323","str_srch_refineby_sender":"\u5bc4\u4ef6\u8005","str_srch_refineby_sender_details":"\u5bc4\u4ef6\u8005\u8a73\u7d30\u8cc7\u6599","str_srch_refineby_status":"\u72c0\u614b","str_srch_refineby_type":"\u4fe1\u4ef6\u985e\u578b","str_srch_refined_by":"\u5df2\u4f7f\u7528\u641c\u5c0b\u689d\u4ef6","str_srch_refinements":"\u4f7f\u7528\u641c\u5c0b\u689d\u4ef6","str_srch_related_res":"\u76f8\u95dc\u641c\u5c0b\u7d50\u679c","str_srch_replied":"\u5df2\u56de\u8986","str_srch_rtf":"RTF","str_srch_searching":"\u6b63\u5728\u641c\u5c0b...","str_srch_showrefinements":"\u986f\u793a\u641c\u5c0b\u689d\u4ef6","str_srch_sponsored_ad_based_on":"\u6b64\u5ee3\u544a\u662f\u6839\u64da\u4e0b\u5217\u641c\u5c0b\uff1a","str_srch_sponsored_res":"\u8d0a\u52a9\u641c\u5c0b\u7d50\u679c","str_srch_tif":"TIF","str_srch_tiff":"TIFF","str_srch_title_remove_refinement_attr":"\u522a\u9664\u81ea\u52d5\u5206\u985e","str_srch_type_name":"\u8f38\u5165\u4eba\u540d\u6216\u4fe1\u7bb1\u5e33\u865f","str_srch_unflagged":"\u5df2\u53d6\u6d88\u661f\u865f\u6a19\u8a18","str_srch_unread":"\u672a\u8b80\u53d6","str_srch_view_all":"\u986f\u793a\u8f03\u591a\u5167\u5bb9","str_srch_view_all_attachment_attr":"\u6aa2\u8996\u6240\u6709\u593e\u6a94","str_srch_view_all_date_attr":"\u6aa2\u8996\u6240\u6709\u65e5\u671f","str_srch_view_all_folder_attr":"\u6aa2\u8996\u6240\u6709\u4fe1\u4ef6\u5323","str_srch_view_all_sender_attr":"\u6aa2\u8996\u6240\u6709\u5bc4\u4ef6\u8005","str_srch_view_all_type_attr":"\u6aa2\u8996\u6240\u6709\u985e\u578b","str_srch_view_less":"\u986f\u793a\u8f03\u5c11\u5167\u5bb9","str_srch_view_less_attachment_attr":"\u6e1b\u5c11\u593e\u6a94","str_srch_view_less_sender_attr":"\u6e1b\u5c11\u5bc4\u4ef6\u8005","str_srch_with":"\u548c {{recipient}}","str_srch_with_attr":"{{recipient}} \u50b3\u9001\u7684\u4fe1\u4ef6","str_srch_with_me":"\u548c\u6211","str_srch_with_me_attr":"\u53ea\u986f\u793a\u6211\u5bc4\u7684\u4fe1","str_srch_xls":"XLS","str_srch_xlsb":"XSLB","str_srch_xlsm":"XSLM","str_srch_xlsx":"XLSX","str_srch_xlt":"XLT","str_srch_xltx":"XLTX"});
}, '1.0.0');YUI.add("filter-contacts",function(e){function h(){this.filterItems=[],this.matchType=1,this.init_temp_data=!0,this.del_temp_data=!0,this.match_limit=50}function b(e){var t,n,r,i=e.value;if(e.numeric){n=i.length;if(n>1){r=i.charAt(0),t=1;while(t<n)r+="[ _\\.\\-()]*",r+=i.charAt(t),t+=1}else r=i}else r=i;e.regExp=new RegExp(r,"gi")}function w(e,t){var n={};return n.value=e,v.test(e)||(n.numeric=!0),n.group_id=t,n.match_siIndex=-1,b(n),n}function E(e){var t,n,r,i,s,o,u=[];n=e.length;if(n===0)return u;var a=new RegExp("[ ]","g");for(t=0;t<n;t++){r=e[t],i=0;while(a.test(r))s=a.lastIndex-1,i<s&&(o=w(r.substring(i,s),t),u.push(o)),i=a.lastIndex;i<r.length&&(o=w(r.substring(i),t),u.push(o))}return u}function S(e){var t=[],n,r,i;if(e.length>0){i=new RegExp("[,;]","g"),n=0;while(i.test(e))r=i.lastIndex-1,r>n&&t.push(e.substring(n,r)),n=i.lastIndex;n<e.length&&t.push(e.substring(n))}return t}function x(e,t,n,r){var i,s,o,u,a,f,l,c,p;l=r.fuzzy_match_idx+1,f=r.fuzzy_matches;if(l<f.length)return a=f[l],r.fuzzy_match_idx=l,a;if(!r.fuzzy_complete){i=g,s=-1;for(;;){if(s===-1&&r.fuzzy_match_idx===-1)s=0;else{s<=0&&(i.lastIndex=r.fuzzy_match_idx===-1?0:f[r.fuzzy_match_idx].start+1);if(!i.test(e))break;s=i.lastIndex-1}u=r.matches;for(l=0,c=u.length;l<c;l++){o=u[l];if(s>o.start)break;if(s===o.start)return a={},a.start=o.start,a.end=o.end,a.diff=0,f.push(a),r.fuzzy_match_idx+=1,n.match_idx=a.end,a}c=n.value.length;if(c<=2){p=0;if(r.complete)continue}else c<=5?p=1:p=2;if((a=h.fuzzyMatch(n.value,e,s,p))!==null)return f.push(a),r.fuzzy_match_idx+=1,n.match_idx=a.end,a}r.fuzzy_complete=!0}return r.fuzzy_match_idx=-1,null}function T(e,t,n,r){var i,s,o,u,a,f;s=r.match_idx+1,f=r.matches;if(s<f.length)return a=f[s],r.match_idx=s,a;if(!r.complete){i=n.regExp,i.lastIndex=r.match_idx===-1?0:f[r.match_idx].start+1,o=i.lastIndex;while(i.exec(e)){if(t)return u=e.substring(o,i.lastIndex),o+=u.search(i),a={},a.end=i.lastIndex,a.start=o,f.push(a),r.match_idx+=1,n.match_idx=a.end,a;o=i.lastIndex-n.value.replace(/\\/g,"").length;if(o===0||e.charAt(o-1).search(m)===0)return a={},a.end=i.lastIndex,a.start=o,f.push(a),r.match_idx+=1,n.match_idx=a.end,a}r.complete=!0}return r.match_idx=-1,null}function N(e,t,n,r,i,s,o){var u,a=n||e.matchType!==2?T:x;while((u=a(t,n,r,i))!==null){if(!o){if(r.start_siIndex===s&&r.start_idx===u.start)continue;return!0}if(u.start>=r.start_idx)return r.start_idx=u.start,!0}return!1}function C(e,t){var n=t.matches,r,i,s,o,u,a,f;if(e.match_idx!==-1)r=e.match_idx,i=e.matches;else{if(e.fuzzy_match_idx===-1)return!1;r=e.fuzzy_match_idx,i=e.fuzzy_matches}u=i[r].start,a=i[r].end;for(s=0,o=n.length;s<o;s++){f=n[s];if(!(f.end<=u||a<=f.start))return!1}for(s=0,o=t.length;s<o;s++)if((t[s].match_idx!==-1||t[s].fuzzy_match_idx!==-1)&&t[s].group_id!==e.group_id)return!1;return f={},f.start=u,f.end=a,t.matches.push(f),!0}function k(e,t,n,r,i,s,o){if(i.phoneno&&!t.numeric)return!1;var u,a,f,l,c,h,p;for(u=0,a=i.length;u<a;u++)if(i[u].index===n){f=i[u];break}f||(f={},f.index=n,f.group_id=t.group_id,f.match_idx=-1,f.matches=[],f.fuzzy_match_idx=-1,f.fuzzy_matches=[],i.push(f));var d=f.match_idx;while(N(e,r,i.phoneno,t,f,s,o))if(C(f,i))return!0;if(d!==-1){p=i.matches,l=f.matches[d].start,c=f.matches[d].end;for(u=0,a=p.length;u<a;u++)h=p[u],h.start===l&&h.end===c&&p.splice(u,1)}return t.match_idx=-1,!1}function L(e,t,n,r){var i,s,o,u,a,f,l,c;s=p.length,c=!1,n.match_siIndex===-1&&(c=!0,n.start_siIndex=-1,n.start_idx=-1,r>0&&(l=e.filterItems[r-1],l.group_id===n.group_id&&(n.start_siIndex=l.match_siIndex,n.start_idx=l.match_idx)));if(c&&n.start_siIndex!==-1){i=n.start_siIndex,f=i<3;if(!f||!!n.numeric){o=p[i],u=t[o];if(u&&u.length>0){a=t._matches[o],a||(a=[],a.matches=[],f&&(a.phoneno=!0),t._matches[o]=a);if(k(e,n,r,u,a,i,!0))return n.match_siIndex=i,n.special_match=!0,!0}}}n.match_siIndex===-1?i=0:n.special_match?(n.special_match=!1,i=0):i=n.match_siIndex;while(i<s){f=i<3;if(f&&!n.numeric){i+=1;continue}o=p[i],u=t[o];if(u&&u.length>0){a=t._matches[o],a||(a=[],a.matches=[],f&&(a.phoneno=!0),t._matches[o]=a);if(k(e,n,r,u,a,i,!1))return n.match_siIndex=i,!0}i+=1}return n.match_siIndex=-1,!1}function O(e){var t,n;for(t=0,n=e.filterItems.length;t<n;t++)if(e.filterItems[t].match_siIndex!==-1)return!1;return!0}function M(e){var t,n,r,i,s,o,u,a;if(!e._matches)return!0;for(t=0,i=p.length;t<i;t++){s=p[t],o=e[s];if(o&&o.length>0){u=e._matches[s];if(u){if(u.matches.length>0)return!1;for(n=0,r=u.length;n<r;n++){a=u[n];if(a.match_idx!==-1)return!1;if(a.fuzzy_match_idx!==-1)return!1}}}}return!0}var t=e.common.Utils,n=t.escapeHtml,r=t.unescapeHtml,i=e.contacts,s=i.api,o=i.utils,u={},a=function(e){return e.emailField&&e.emailField.value?e.emailField.value:e.id},f=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n]);return e},l=function(){var e=o.getSortedFlatContacts(),t=function(e,t){var n=[];return e.user&&n.push(e.user.charAt(t).toLowerCase()),e.firstname&&n.push(e.firstname.charAt(t).toLowerCase()),e.lastname&&n.push(e.lastname.charAt(t).toLowerCase()),e.nickname&&n.push(e.nickname.charAt(t).toLowerCase()),e.mobileno&&f(n,e.mobileno.toLowerCase()),e.homeno&&f(n,e.homeno.toLowerCase()),e.workno&&f(n,e.workno.toLowerCase()),e.isCategory||e.email&&n.push(e.email.charAt(t).toLowerCase()),n},n,r,i,s=o.getCategories();for(r in s){var l=s[r],c=0,h=0;for(n in l.contacts){var p=o.getContactById(l.contacts[n]),d=o.getFieldsByType(p,"email");d&&(c+=1,h+=d.sc_score?d.sc_score:0)}e.push({firstname:l.name,email:[c,"<span style='display:none'>___AC_CAT_ID:",l.id,"</span>"].join(""),id:l.id,sc_score:Math.floor(h/c*(2/3)),isCategory:!0})}i={},u=[];for(n in e){var v=e[n];if(!v.email||!v.email.length)continue;var m,g=t(v,0);for(m in g){var y=g[m];u[y]||(u[y]={}),u[y][a(v)]=v}}},c=function(e,t){var n={},r={},i={},s=null,f,l;f=e.filterItems;for(var c=0;c<f.length;c++){var h=f[c],p=h.value.charAt(0).toLowerCase(),d=u[p];for(l in d){s=d[l];if(!d[l].isCategory||!t)r[l]=d[l]}}for(l in r){var v=r[l];e.filterContact(v)&&!i[v.email]&&(i[v.email]=!0,n[a(v)]=v)}var m=[]
;for(l in n)m.push(n[l]);return o.sortFlatContacts(m),m};e.on("contacts:api:contactChanged",l),e.on("contacts:api:loaded",l),o.areContactsLoaded()?l():s.load();var p=["mobileno","homeno","workno","firstname","lastname","user","email","nickname"],d=new RegExp("[\\+\\*\\?\\^\\[\\]\\{\\}\\$\\\\/%#~:<>()]","g"),v=new RegExp("[^0-9]","g"),m=new RegExp("[ _\\.\\-@]","g"),g=new RegExp("[ _\\.\\-@][^ _\\.\\-@]","g");h.prototype.fastMatch=function(e){return e=!!e,c(this,e).slice(0,this.match_limit)};var y=/___AC_CAT_ID\:(-?[0-9]+)/;h.prototype.decodeCategory=function(e){var t=y.exec(e);if(t&&t.length>1){var n=o.getCategoryById(t[1]),r=[];for(var i in n.contacts){var s=o.getBasicFlatContacts(o.getContactById(n.contacts[i]));for(var u in s){var f=s[u];if(f.isPrimary){r[a(f)]=f;break}}}return r}return!1},h.prototype.updateFilterItems=function(t){t.length>2048&&(t=t.substring(0,2048)),t=t.replace(d," ");var n=S(t),r,i=e.common.Utils;for(r in n)n.hasOwnProperty(r)&&(n[r]=i.regexpEscape(i.escapeHtml(n[r])));this.filterItems=E(n)},h.fuzzyMatch=function(e,t,n,r){var i=e.length,s=t.length,o=[],u=[],a=[],f,l,c,h,p,d,v,m,g,y,b,w;for(f=0;f<=i;f++)u[f]=f;h=s-n,h>i+r&&(h=i+r),c=0,d="";for(l=0;l<h;l++){m=d,d=t.charAt(l+n).toLowerCase(),c<=0?(g=l+1,a[0]=g,b=g,c=0,p=""):(g=r+1,a[c]=g,b=g,p=e.charAt(f-1).toLowerCase());for(f=c,c=-1;f<i;f++){v=p,p=e.charAt(f).toLowerCase(),p===d?g=u[f]:(g=u[f]+1,y=a[f]+1,g>y&&(g=y),y=u[f+1]+1,g>y&&(g=y),p===m&&v===d&&(y=o[f-1]+1,g>y&&(g=y))),a[f+1]=g,b>g&&(b=g),c===-1&&g<=r&&(f===0&&a[0]<=r?c=0:c=f+1);if(g>a[f]&&g>r)break}if(f===i){if(g===0){u=a,l+=1;break}y=u[i];if(y!==undefined&&y<g)break}if(b>r)return null;o=u,u=a,a=[]}return g=u[i],g===undefined||g>r?null:(w={},w.start=n,w.end=l+n,w.diff=g,w)},h.prototype.filterContact=function(e){delete e.matches;if(this.filterItems.length===0)return!1;this.init_temp_data&&(e._matches={});var t,n;n=this.filterItems.length,t=0;while(t<n){if(!L(this,e,this.filterItems[t],t)){if(t>0){t-=1;continue}return this.del_temp_data&&delete e._matches,!1}t+=1}e.matches={};var r,i,s,o,u,a,f,l,c;i=p.length,r=0;while(r<i){s=p[r],o=e._matches[s];if(o&&o.length>0){for(t=0,n=o.length;t<n;t++)u=o[t],(f=u.match_idx)!==-1?(a=this.filterItems[u.index],c=u.matches[f],l={},l.term=a.value,l.startIndex=c.start,l.endIndex=c.end,e.matches[s]||(e.matches[s]=[]),e.matches[s].push(l),u.match_idx=-1):(f=u.fuzzy_match_idx)!==-1&&(a=this.filterItems[u.index],c=u.fuzzy_matches[f],l={},l.term=a.value,l.startIndex=c.start,l.endIndex=c.end,l.diff=c.diff,e.matches[s]||(e.matches[s]=[]),e.matches[s].push(l),u.fuzzy_match_idx=-1);this.del_temp_data||(o.matches=[])}r+=1}this.del_temp_data&&delete e._matches;for(t=0,n=this.filterItems.length;t<n;t++)this.filterItems[t].match_siIndex=-1;return!0},h.prototype.setConfigValues=function(t,n,r){this.matchType=t,this.init_temp_data=e.Lang.isBoolean(n)?n:!0,this.del_temp_data=e.Lang.isBoolean(r)?r:!0},h.prototype.filterContacts=function(e){var t=!0,n=[];if(this.filterItems.length!==0){this.setConfigValues(1,!0,!t);for(var r in e)typeof e[r].email!="undefined"&&this.filterContact(e[r])&&n.push(e[r])}return n},h.prototype.buildContactsIndex=function(){l()};var A=function(){function s(t){var n=u(t),s;return t.isCategory?s=e.common.Utils.substitute(r,{hilite:n},0,0,0,0,strings):s=e.common.Utils.substitute(i,{hilite:n,id:t.id,email:t.email,emailFieldId:t.emailField.id,isSmartContact:t.isSmartContact||0},0,0,0,0,strings),s}function o(t,n,r,i){var s="";return t||n||r?(s=e.common.Utils.substitute(strings.str_name_format,{given_name:t?t:"",middle_name:n?n:"",family_name:r?r:""}),s=s.replace(/ +(?= )/g,"")):i?s=i:s="",s}function u(t){function T(e,t,n){var r="";switch(t){case"amp":n?r="&"+n+";":r="&";break;case"#39":r="'";break;case"quot":r='"';break;case"lt":r="<";break;case"gt":r=">";break;case"#35":r="#";break;default:r=""}return r}var n=t.matches,r,i,s,u=t.sc_score,f="",l="",c="";if(n&&(n.nickname||n.user||n.firstname||n.lastname||n.mobileno||n.homeno||n.workno||n.email)){var h=e.Lang.isArray(n.nickname)&&n.nickname.length>0?!0:!1,p=e.Lang.isArray(n.firstname)&&n.firstname.length>0?!0:!1,d=e.Lang.isArray(n.lastname)&&n.lastname.length>0?!0:!1,v=e.Lang.isArray(n.email)&&n.email.length>0?!0:!1,m=t.nickname||null,g=t.firstname||null,y=t.lastname||null,b=t.email||null,w=h?a(m,n.nickname):m&&m.length>0?m:null,E=p?a(g,n.firstname):g&&g.length>0?g:null,S=d?a(y,n.lastname):y&&y.length>0?y:null,x=v?a(b,n.email):null;r="",r=o(E,"",S,w),w=h?w:null,E=p?E:null,S=d?S:null,i="",x?i+=x:i+=b,l=r||"",l=e.Lang.trim(l),l!==""&&(NeoConfig.bidi?(s=e.Intl.detectDirection(f.replace(/<\/?b\>/,"")),l="<span data-name dir="+s+">"+l+"</span>"):l="<span data-name>"+l+"</span>"),i.length>0&&(l.length>0&&(l+=" "),l===""?c="<em class='email no-name'"+(t.isCategory?"":" data-email='"+b+"'")+" dir='ltr'>"+i+"</em>":c="<em class='email'"+(t.isCategory?"":" data-email='"+b+"'")+" dir='ltr'>("+i+")</em>")}return c=c.replace(/&((?:[a-zA-Z]+)|(?:#[0-9]+));(?:([a-zA-Z]+|(?:#[0-9]+));)?|([;,])/gi,T),f=l+c,NeoConfig.smartcomplete_enabled==="debug"&&(e.UA.gecko?(f+='<span style = "float:right; margin-top: -15px; color:red;">'+u.toFixed(6),0/0):(f+='<span style = "float:right; color:red;">'+u.toFixed(6),0/0)),f}function a(t,n){var r=t,i,s,o,u,a;n.sort(l),s=r.length;for(i=n.length-1;i>=0;i--)o=n[i],NeoConfig.bidi?(u=r.substring(0,o.startIndex),a=r.substring(o.endIndex,s)+r.substring(s),r=u+e.comms.Intl.highlightString(r.substring(o.startIndex,o.endIndex),u,a)+a):r=r.substring(0,o.startIndex)+f(r.substring(o.startIndex,o.endIndex))+r.substring(o.endIndex,s)+r.substring(s),s=o.startIndex;return r=r.substring(0,s)+r.substring(s),r}function f(e){return"<b>"+e+"</b>"}function l(e,t){return typeof e=="object"&&typeof t=="object"&&typeof e.startIndex=="number"&&typeof t.startIndex=="number"?+(e.startIndex-t.startIndex):0}var t='<li role="option"><span class="ac-value">{{hilite}}</span><span data-action="ac-remove-item" data-ac-sc={{isSmartContact}} data-ac-email-field-id="{{emailFieldId}}" data-ac-id="{{id}}" data-ac-email="{{email}}" class="icon icon-small-close ac-remove-item"></span></li>'
,n='<li role="option"><span class="ac-value">{{hilite}}</span></li>',r=n,i=NeoConfig.enableContactDelete?t:n;return{getItemMarkup:s,hlMatch:a,buildName:o}}();h._test={validateFilterItems:O,validateTempMatchData:M},e.namespace("comms").FilterContacts=h,e.namespace("comms").FilterContactsMarkup=A},"1.0.0",{requires:["contacts-api-utils","contacts-api","common-utils"]});
YUI.add("mail-controller-compose-text",function(A){A.namespace("mail.Controller");var J=A.common.Utils,O={address:1,blockquote:1,body:1,caption:1,center:1,col:1,colgroup:1,dd:1,dir:1,div:1,dl:1,dt:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,li:1,menu:1,ol:1,p:1,pre:1,table:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,ul:1};function B(S,T,R){var U=S.cloneNode(true),Q=A.Node.getDOMNode(U),P=F(Q);if(T){P=I(P,true);}if(R){P=E(P);}return P;}function L(R,T){var P=A.Node.create("<div>"+R+"</div>"),S=A.Node.getDOMNode(P),Q=F(S);if(T){Q=I(Q);}return Q;}function F(Q){var P=A.UA.ie;if(!P){K(Q);}else{Q.innerHTML=Q.innerHTML.replace(/(((<div\s+[^>]*>)|(<div\s*>))&nbsp;<\/div>)/gi,"<BR/>");}return M(Q,false,"").replace(/\n[\s\xA0]+$/,"");}function E(P){return P.replace(/\xA0/g," ");}function M(S,W,X){var Z=A.one(S),U,a;if(Z.hasClass("compose-ignore")){return"";}else{if(S.nodeType===1||S.nodeType===11){var R=S.tagName;if(A.UA.ie&&S.tagName==="DIV"&&S.getAttribute("class")&&S.getAttribute("class")!=null&&S.getAttribute("class").indexOf("hr")!==-1){R="HR";}switch(R){case"SCRIPT":case"STYLE":case"LINK":case"OBJECT":case"EMBED":return"";case"HR":a=S.previousSibling;return(G(a)?"":"\n")+X+"________________________________\n"+X;case"BR":return"\n"+X;case"BLOCKQUOTE":X+=">";default:U=[];var P=S.firstChild;var V=0;if(R==="SPAN"&&A.one(S).hasClass("Apple-tab-span")){return A.one(S).get("text");}while(P!==null){var Y=M(P,P.tagName==="PRE",X);if(P.nodeType===1){if(H(P)==="block"&&U.length>0&&P.tagName!=="TD"){var T=Y.match(/^[ \t\r\n\v\f]*$/);if(!T||P.tagName==="LI"){U.push("\n"+X);}}switch(P.tagName){case"LI":V++;U.push("\t"+(P.parentNode.tagName==="OL"?V+".":"*")+" ");break;}}if(Y){U.push(Y);}if(P.nodeType===1){switch(P.tagName){case"TD":U.push(" ");break;}}P=P.nextSibling;}return U.join("");}}else{if(S.nodeType===3){U=S.nodeValue;if(!W){a=S.previousSibling;var Q=a?H(a):null;U=G(a)?U:U.replace(/\n[ \t\r\n\v\f]+/g," ");if(a===null||G(a)){U=U.replace(/^[ \t\r\n\v\f]+/,"");}else{if(Q==="block"){U=U.replace(/^[ \t\r\n\v\f]+/,"\n");}else{if(Q==="inline"){U=U.replace(/^[ \t\r\n\v\f]+/," ");}}}U=U.replace(/[ \t\r\n\v\f]+$/," ");}return U;}else{return"";}}}}function G(P){if(P===null||P.nodeType!==1){return false;}return P.tagName==="BR";}function H(P){if(P===null||P.nodeType!==1){return null;}if(P.style.display){if(P.style.display==="block"){return"block";}else{if(P.style.display==="inline"){return"inline";}}}return O[P.tagName.toLowerCase()]?"block":"inline";}function K(S){if(S.nodeType===1||S.nodeType===11){var Q=S.firstChild;while(Q!==null){var U=Q.nextSibling;K(Q);Q=U;}}else{if(S.nodeType===3){var R=S.nodeValue;if(R.match(/^[ \t\r\n\v\f]*$/)){var P=S.previousSibling;var T=P?H(P):"inline";if(T==="inline"&&!G(P)){S.nodeValue=S.nodeValue.replace(/\n.*/," ");}else{S.parentNode.removeChild(S);}}}}}function I(Q,P){Q=J.escapeHtml(Q);if(P){Q=Q.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");Q=Q.replace(/( ){2}/g,"&nbsp;&nbsp;");}Q=Q.replace(/\n/ig,"<br />");return Q;}function C(U,R,S){var P,T=S&&S.isRich,Q,W=S&&S.text;if(!W){return"";}W=N(W,T);if(!T){W=D(W);}else{if(!R){try{Q="<br>";W=W.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,Q);W=W.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,Q);W=W.replace(/((<p\s+[^>]*>)|(<p\s*>)&nbsp;<\/p>)/gi,Q);W=W.replace(/(((<div\s+[^>]*>)|(<div\s*>))&nbsp;<\/div>)/gi,Q);W=W.replace(/(<br\s+[^>]*>)|(<br\s*>)/gi,Q);W=W.replace(/(<br\/\s+[^>]*>)|(<br\/\s*>)/gi,Q);W=W.replace(/(<p\s+[^>]*>)|(<p\s*>)/gi,"");W=W.replace(/<\/p>/gi,Q);W=W.replace(/(<hr\s*>)/gi,Q+"________________________________"+Q);W=L(W,true);}catch(V){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-composetext:1",V,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-composetext:1");}}}U=U||"";P=U!="";if(W!=""){if(A.UA.ie||A.UA.webkit){if(P){U=U+"<div></div><div>&nbsp;</div>"+W;}else{U="<div></div><div>&nbsp;</div>"+W+U;}}else{if(P){U=U+"<div>&nbsp;</div>"+W;}else{U="<div>&nbsp;</div>"+W+U;}}}return U;}function N(Q,P){if(Q!=null){if(!P){Q=Q.replace(/<vbr>|\n/gi,"<br />");return"<div>"+Q+"</div>";}else{Q=Q.replace(/<vbr>/gi,"");}}return Q||"";}function D(R){var Q,P;R=A.common.Utils.unescapeHtml(R);R=R.replace(/<hr\s*[^>]*>/gi,"<div><hr></div>");R=R.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,"endptagpblanklineppblanklinepstartptag");R=R.replace(/((<br\s+[^>]*>)|(<br\s*>))((<br\s+[^>]*>)|(<br\s*>))/gi,"endptagpblanklinepstartptag");R=R.replace(/((<p\s+[^>]*>)|(<p\s*>)&nbsp;<\/p>)/gi,"endptagpblanklinepstartptag");R=R.replace(/(((<div\s+[^>]*>)|(<div\s*>))&nbsp;<\/div>)/gi,"endptagpblanklinepstartptag");R=R.replace(/(<br\s+[^>]*>)|(<br\s*>)/gi,"brtag");R=R.replace(/(<br\/\s+[^>]*>)|(<br\/\s*>)/gi,"brtag");R=R.replace(/(<p\s+[^>]*>)|(<p\s*>)/gi,"startptag");R=R.replace(/(<p\s+[^>]*>)|(<p\s*>)/gi,"startptag");R=R.replace(/<\/p>/gi,"endptag");Q=R.replace(/<div\s+[^>]*dir\s*=\s*[\'|\"]ltr[\'|\"]\s*[^>]*>/gi,"ltrstartptag");Q=Q.replace(/<div\s+[^>]*dir\s*=\s*[\'|\"]rtl[\'|\"]\s*[^>]*>/gi,"rtlstartptag");Q=Q.replace(/(<div\s+[^>]*>)|(<div\s*>)/gi,"startptag");R=Q.replace(/<\/div>/gi,"endptag");P=A.common.Utils.escapeHtml(R);P=P.replace(/brtag/g,"<br />");P=P.replace(/ltrstartptag/g,"<div dir='ltr'>");P=P.replace(/rtlstartptag/g,"<div dir='rtl'>");P=P.replace(/startptag/g,"<div>");P=P.replace(/endptag/g,"</div>");P=P.replace(/pblanklinep/g,"<br/><br/>");return P;}A.mix(A.mail.Controller.Compose,{convertToPlain:B,convertHTMLToPlain:L,convertGuts:F,injectSignature:C});},"1.0.0",{requires:["common-persist-user-data","mail-controller-compose"]});/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("swfdetect",function(e,t){function c(e){return parseInt(e,10)}function h(e){i.isNumber(c(e[0]))&&(r.flashMajor=e[0]),i.isNumber(c(e[1]))&&(r.flashMinor=e[1]),i.isNumber(c(e[2]))&&(r.flashRev=e[2])}var n=0,r=e.UA,i=e.Lang,s="ShockwaveFlash",o,u,a,f,l;if(r.gecko||r.webkit||r.opera){if(o=navigator.mimeTypes["application/x-shockwave-flash"])if(u=o.enabledPlugin)a=u.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."),h(a)}else if(r.ie){try{f=new ActiveXObject(s+"."+s+".6"),f.AllowScriptAccess="always"}catch(p){f!==null&&(n=6)}if(n===0)try{l=new ActiveXObject(s+"."+s),a=l.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","),h(a)}catch(d){}}e.SWFDetect={getFlashVersion:function(){return String(r.flashMajor)+"."+String(r.flashMinor)+"."+String(r.flashRev)},isFlashVersionAtLeast:function(e,t,n){var i=c(r.flashMajor),s=c(r.flashMinor),o=c(r.flashRev);return e=c(e||0),t=c(t||0),n=c(n||0),e===i?t===s?n<=o:t<s:e<i}}},"3.16.0",{requires:["yui-base"]});
YUI.add("mail-service-uploader-utils",function(A){A.namespace("Y.mail.UploaderUtils");A.mail.UploaderUtils={getUploadCredential:function(C){var D=NeoConfig.launch_protocol+document.location.host+"/ya/upload_get_cred",B=A.mail.UploaderService,E={success:function(F){var G;if(F&&F.responseText){G=A.JSON.parse(F.responseText).Response.cred;}B.UPLOAD_CREDENTIAL=G||"failed";if(!G){}C&&C();},failure:function(){B.UPLOAD_CREDENTIAL="failed";},suppressCodes:"*"};A.common.net.SessionMgr.request(D,null,E,"GET",null,true);},checkLimits:function(J){var K=J.files||[],O=J.cdo,H=J.uploader,C=A.common.persist.UserData,E=C.get("userFeaturePref.attachTotalSize"),B=C.get("userFeaturePref.attachFiles"),D,F,I,M=O&&O._getAttachmentsSize(),N=O&&O._getAttachmentsCount(),G,L=0;if(!K||!O||!H){return true;}for(G in K){D=K[G];F=D.get&&D.get("size")||D.size;I=D.get&&D.get("id")||D.id+"-"+D.name;if(((F>E)||(M+F>E))&&(!H.processedFiles[I]&&!H.removedFiles[I])){H.removedFiles[I]=1;L=1;delete K[G];}else{if(!H.processedFiles[I]&&!H.removedFiles[I]){M+=F;N++;}}}A.mail.UploaderService.logIt("checkLimits found totalSize = "+M+", totalCount="+N);if(N>B){for(G in K){if(N<=B){break;}D=K[G];I=D.get&&D.get("id")||D.id+"-"+D.name;if(!H.processedFiles[I]&&!H.removedFiles[I]){H.removedFiles[I]=1;delete K[G];N--;}}O.fire("CDO_ATTACHMENT_COUNT_VIOLATION");return false;}if((M>E)||L){O.fire("CDO_ATTACHMENT_SIZE_VIOLATION");return false;}return true;},handlePostRedirectResponse:function(B){var F=this,E=A.common.Utils.parseQueryString(B),D=A.mail.UploaderService.uploadersCreated[E.uploaderID],C=F.parseFormResponse(E,D);D.handlePostRedirectResponse(C);},parseFormResponse:function(D,G){var C=[],E,I,L=parseInt(D.cdoidx,10),H=(D.filename+"").split(","),K=(D.mimetype+"").split(","),J=(D.filesize+"").split(","),B=(D.diskfilename+"").split(","),F=(D.errorcode+"").split(",");for(I=0;I<F.length;I++){E={cdoIndex:L+I,filename:H[I],mimetype:K[I],size:{original:parseInt(J[I],10)},serverID:B[I],thumbData:null};this.setAttachmentState({item:E,state:F[I],uploader:G});C.push(E);}return C;},setAttachmentState:function(B){var F=B.item,D=B.state||F.attachCode,H=B.uploader,G=H.type||H.uploaderType,C={attachcode:D,resampled:false,cancelled:false,rotated:false,uploaded:false,scanned:false,failed:false},E=0;switch(D){case"uploadAVNoVirus":case"uploadAVCleaned":C.scanned=true;C.uploaded=true;break;case"uploadAVInternalError":case"uploadAVError":case"uploadAVNotScannable":case"uploadAVServerDown":C.uploaded=true;C.failed=false;C.failCause="averror";break;case"uploadFileSizeError":case"uploadNoFileError":C.failed=true;if(D==="uploadFileSizeError"){C.failCause="size";}else{C.failCause="nofile";}E=1;break;case"uploadAVCannotClean":case"uploadAVHasVirus":C.scanned=true;C.uploaded=true;C.failed=true;C.failCause="virus";E=1;break;case"uploaderFormUploadNoResponse":C.failed=true;C.failCause="form_upload_no_response";E=1;break;case"uploaderFormUploadUnexpectedResponse":C.failed=true;C.failCause="form_upload_unexpected_response";E=1;break;case"uploaderFormUploadTimeout":C.failed=true;C.failCause="form_upload_timeout";E=1;break;case"uploaderFormUserCancelled":C.cancelled=true;C.failCause="form_upload_cancelled";break;case"uploaderYUIUploadError":case"uploaderHTML5UploadError":C.failed=true;C.failCause=G+"_upload_error";E=1;break;case"uploaderYUIResponseTimeout":case"uploaderHTML5ResponseTimeout":C.failed=true;C.failCause=G+"_response_timeout";E=1;break;case"uploaderYUIUploadStartTimeout":case"uploaderHTML5UploadStartTimeout":C.failed=true;C.failCause=G+"_uploadstart_timeout";E=1;break;case"uploaderYUIProgressTimeout":case"uploaderHTML5ProgressTimeout":C.failed=true;C.failCause=G+"_progress_timeout";E=1;break;case"uploaderYUIUploadCompleteTimeout":case"uploaderHTML5UploadCompleteTimeout":C.failed=true;C.failCause=G+"_uploadcomplete_timeout";E=1;break;case"uploaderYUIUserCancelled":case"uploaderHTML5UserCancelled":C.cancelled=true;C.failCause=G+"_upload_cancelled";break;case"uploaderYUIAutoRetryAll":case"uploaderHTML5AutoRetryAll":C.failed=true;C.failCause=G+"_upload_error_retry";break;case"uploaderYUIAutoRetry2038":case"uploaderHTML5AutoRetry2038":C.failed=true;C.failCause=G+"_upload_error2038";break;case"uploaderYUIError2049":case"uploaderHTML5Error2049":C.failed=true;C.failCause=G+"_upload_error2049";E=1;break;case"uploaderYUICredExpired":case"uploaderHTML5CredExpired":C.failed=true;C.failCause=G+"_upload_302";break;case"uploadInternalError":C.failed=true;C.failCause="internal_server_error";E=1;break;case"uploadMailboxError":C.failed=true;C.failCause="mailbox_error";E=1;break;case"uploadPartialFileError":C.failed=true;C.failCause="partial_file_error";E=1;break;case"uploadAuthError":C.failed=true;C.failCause="upload_auth_error";E=1;break;default:C.failed=true;C.failCause="generic_"+D;E=1;}if(C.failed){A.use("common-utils-error",function(I){I.common.Utils.error.report(D+":"+C.failCause,"ATTACH_UPLOAD_ERR",1,0,1);});}F.state=C;},createMenuNode:function(I){var B=parseInt(NeoConfig.switchAttachModeEnabled,10),E=I.node,H=I.uploader,J=I.cdo,C=I.attView,F=E.one("span.attach-btn-menu"),D=E.one(".attachment-button-html5")||E.one(".attachment-button-attach");if(B!==1){return;}H.handles.push(D.on("click",function(){F&&F.menu&&F.menu.hide&&F.menu.hide();J.fire("compose:restoreFocus");},H));var G="#attachment-button-input";A.one(G).on("click",function(){A.fire("mt:click",{action:"cmps_attfl",append:{t1:"cmpsTb"}});});F.on("click",this.createAttachOptionMenu,H,J,C);D&&D.removeClass("right");F&&F.removeClass("hidden");},selectDefaultMenuType:function(){var B=A.one("#menu-attach-options"),C=B?B.one(".active"):0;if(C&&C.get("id")==="switch-form"){A.fire("compose:toggleUploaderType",{form:1,node:B,destroy:0});}},createAttachOptionMenu:function(D,C,G){var H=this,F=D.currentTarget,B=A.mail.UploaderService,E="hidden";A.fire("mt:click",{action:"cmps_attflmnu",append:{t1:"cmpsTb"}});D.preventDefault();if(!F.menu){A.use("common-ui-menu-helper","_shared_module_offscreen_bin_menus_compose_attach",function(L){var J=L.ui.Templates._shared_module_offscreen_bin_menus_compose_attach,K={html5_active:(G.type===B.UPLOADER_TYPE_HTML5?"active":""),flash_active:(G.type===B.UPLOADER_TYPE_FLASH?"active":""),form_active:(G.type===B.UPLOADER_TYPE_FORM?"active":"")},I=L.one("#menu-attach-options");
if(!I){I=L.one("body").appendChild(L.common.Utils.substitute(J.base,K,0,0,strings));I.appendChild(H.attView.attachLargeBtn);}if(G.type===B.UPLOADER_TYPE_HTML5){I.one("#switch-flash").addClass(E);I.one("#switch-html5").removeClass(E);}L.common.ui.MenuHelper.create(F,{menu:I,blur:true},function(){F.menu.getMenuNode().on("menuSelected",function(M){switch(M.dataAction){case"switch-html5":L.fire("compose:toggleUploaderType",{html5:1,node:I});break;case"switch-flash":L.fire("compose:toggleUploaderType",{flash:1,node:I});break;case"switch-form":L.fire("compose:toggleUploaderType",{form:1,node:I,destroy:0});break;}C.fire("compose:restoreFocus");});});});}},verifyCrossDomainAccess:function(E){E=E||NeoConfig.attachmentServer;var D=A.mail.UploaderService,B=NeoConfig.launch_protocol+E+"/crossdomain.xml",C={success:function(){if(NeoConfig.attachmentServer!==E){NeoConfig.attachmentServer=E;D.UPLOAD_URL_BASE=NeoConfig.launch_protocol+(NeoConfig.attachmentServer?NeoConfig.attachmentServer+"/":"")+((NeoConfig.isSSL&&!NeoConfig.isAttachSSL)?window.location.host:(strings.str_cfg_base_intl+"."+NeoConfig.farm+".mail.yahoo.com"))+"/ya/upload";}D.CROSS_DOMAIN_VERIFIED=true;},failure:function(){if(E!==NeoConfig.attachmentServerBackup&&NeoConfig.attachmentServerBackup){A.mail.UploaderUtils.verifyCrossDomainAccess(NeoConfig.attachmentServerBackup);}else{D.DEFAULT_UPLOADER=D.UPLOADER_TYPE_FORM;A.fire("compose:toggleUploaderType",{form:1,destroy:1});}},suppressCodes:"*"};A.common.net.SessionMgr.request(B,null,C,"GET",null,true);}};},"1.0.0",{requires:["common-utils-stats","common-net-sessionmgr"]});YUI.add("mail-ui-composeview-attach",function(C){C.namespace("mail");var L={"application/pdf":"pdf","application/mspowerpoint":"ppt","application/vnd.ms-powerpoint":"ppt","application/excel":"xls","application/vnd.ms-excel":"xls","application/msword":"doc","application/vnd.ms-msword":"doc","application/x-trof-msvideo":"video","video/mpeg":"video","video/x-ms-wmv":"video","video/mov":"video","video/movie":"video","video/quicktime":"video","audio/wav":"music","audio/x-wav":"music","audio/mpeg":"music","audio/mp3":"music","audio/mid":"music","audio/realaudio":"music","audio/x-pn-realaudio":"music","image/bmp":"img","image/gif":"img","image/jpe":"img","image/jpeg":"img","image/jpg":"img","image/png":"img","image/tiff":"img","application/x-compressed":"zip","application/x-stuffit":"zip","application/x-tar":"zip","application/x-gzip":"zip"},H={"LOZENGE":0,"ICON":1},A=C.ui.Templates,b=C.common.Utils,G=C.mail.UploaderUtils,m=b.substitute,W=b.escapeHtml,V=window.strings||{},n=C.common.persist.UserData,f=n.get("userFeaturePref.attachTotalSize"),Q=n.get("userFeaturePref.attachFiles"),P=Math.round(f/1048576),i="hidden",T="attachmentVisible",X,D=(parseInt(NeoConfig.uploaderVersion,10)===2);function d(o,Y){Y=Y||"str_rte_attachments_";return V[Y+o]||"";}C.mail.AttachmentView=function(w,s,o){var p=this,x,z,q,u,v,r,y;X=C.mail.UploaderService;p.cdo=w;if(!p.handles){p.handles=[];}y=p.handles;p.tab=s;p.tagPane=o&&o.tagPane?o.tagPane:".attachments-pane";p.tagWell=o&&o.tagWell?o.tagWell:".attachments-well";p.uiAttBar=s.one(p.tagPane);if(p.uiAttBar){p.uiAttRemoveAll=s.one(".attachment-button-removeall");p.uiAttCount=x=s.one(".attachments-count");p.uiAttSize=z=s.one(".attachments-size");p.uiAttAVLogo=s.one(".file-count img");p.uiAttMessage=s.one(".error");p.uiAttBtnForm=p.uiAttBar.one(".attachment-button-form")||null;p.uiAttBtnDisabled=p.uiAttBar.one(".attachment-button-disabled");}p.uiAttPane=s.one(p.tagWell);var t=p.uiAttPane;if(t){}if(p.uiAttPane){p.uiAttList=q=p.uiAttPane.one(".file-attach");p.uiAttWelcome=p.uiAttPane.one(".attachments-welcome");}if(q&&x&&z){var Y=s.one("div.rte li.active a");q.setAttrs({"aria-labelledby":(Y?Y.generateID():""),"aria-describedby":(x.generateID()+" "+z.generateID())});}p.errorFlags={tooMany:false,tooBig:false};p.attachPaneHidden=false;p.attachXY=null;p.uploaderConfig={"attView":p,"tab":s,"cdo":w,"attForm":p.uiAttBtnForm,"attInput":p.tab.one(".attachment-button-file")};p.toggleUploaderHandle=C.on("compose:toggleUploaderType",k,p);if(D){r=X.getDefaultUploaderType();switch(r){case X.UPLOADER_TYPE_HTML5:u="mail-uploader-html5";break;case X.UPLOADER_TYPE_FLASH:u="uploader-flash";break;default:u="mail-service-uploader-form";r=X.UPLOADER_TYPE_FORM;}p.type=r;}v=function(AA){p.uploader=AA;AA.updateUI&&AA.updateUI();p.updateSizeAndCount();if(AA.uploaderType!==C.mail.UploaderService.UPLOADER_TYPE_FORM&&parseInt(NeoConfig.switchAttachModeEnabled,10)===1){G.createMenuNode({uploader:AA,node:p.tab,cdo:p.cdo,attView:p});G.selectDefaultMenuType();}};C.use(u,function(){X.create(p.uploaderConfig,v,o?o.type:null);});y.push(p.cdo.on("CDO_ATTACHMENT_ADDED",function(AB,AA){p.addNewAttachment(AA);}));y.push(p.cdo.on("CDO_ATTACHMENT_DELETED",function(AB,AA){p.removeAttachment(AA);p.updateSizeAndCount();}));y.push(p.cdo.on("CDO_ATTACHMENT_PROCESSED",function(AC,AA){p.enableAttachment(AA);p.updateSizeAndCount();function AB(AD){var AE=AD.state;return(AE&&!AE.processed&&!AE.uploaded&&!AE.cancelled);}if(!p.cdo._getAttachmentsCount(AB)){p.checkOverLimit();}}));y.push(p.cdo.on("CDO_ATTACHMENT_SIZE_VIOLATION",function(){p.attachError("size");}));y.push(p.cdo.on("CDO_ATTACHMENT_COUNT_VIOLATION",function(){p.attachError("count");}));y.push(p.cdo.on("CDO_ATTACHMENT_UPLOAD_PROGRESS",function(AC,AB,AA){p.updateAttachmentProgress(AB,AA);}));y.push(p.cdo.on("CDO_THUMBNAIL_GENERATED",function(AD,AA,AC){var AB=p.uiAttList.all(".file-container").item(AA),AE=AB.one("div");if(!AE){AB.insert(C.Node.create("<div></div>"),0);AE=AB.one("div");}AE.setStyle("background","url('"+AC.src+"') no-repeat 0px "+((63-AC.height)/2)+"px");AB.ancestor("li").addClass("image");}));y.push(p.cdo.on("CDO_UPLOADER_CLEANUP",function(){var AA=p.cdo.get("attachments"),AC,AB;for(AC=0;AA&&AC<AA.length;AC++){AB=AA[AC];if(AB&&AB.timeout){clearTimeout(AB.timeout);AB.timeout=null;}if(AB&&AB.state&&!AB.processed&&!AB.state.cancelled){AB.processed=true;AB.state.failed=1;p.enableAttachment(AC);}}p.updateSizeAndCount();}));if(p.uiAttRemoveAll){y.push(p.uiAttRemoveAll.on("click",function(AA){p.cdo._removeAllAttachments();AA.preventDefault();}));}if(p.uiAttBtnDisabled){y.push(p.uiAttBtnDisabled.on("click",function(){p.checkOverLimit(1);}));}if(p.uiAttAVLogo){y.push(p.uiAttAVLogo.on("click",function(){window.open(NeoConfig.avTargetUrl);}));}};function O(Y){var o=this;if(Y==="icon"){o.iconType=H.ICON;o.uiAttList.addClass("icons");o.uiAttList.removeClass("lozenges");}else{o.iconType=H.LOZENGE;o.uiAttList.removeClass("icons");o.uiAttList.addClass("lozenges");}}function a(q,o){var t=this,s=C.mail.AttachmentView.attachErrorSize,p=o?C.all(".file-attach li").item(o):null,Y={"count":m(d("num_files_exceeded","str_comp_attach_"),{},{max_allowed:function(){return Q;}}),"size":m(d("size_exceeded","str_comp_attach_"),{},{max_size_MB:function(){return P;}}),"averror":d("noAVScanWarning")+(p?p.get("title"):""),"virus":d("alert_virus")},r=Y[q];if(p){p.set("title",r||"");}t.updateSizeAndCount();if(q==="size"&&s&&s(t.cdo)){}else{if(r){C.use("common-ui-dialog-helper",function(u){u.common.ui.DialogHelper.alert({hd:(q==="virus")?d("alert_virus_title"):d("error","str_comp_attach_"),bd:r,restoreFocusNode:t.uiAttBar});});}}}function J(Y){var o=this;o.addAttachment(Y);o.updateSizeAndCount();}function e(){var r=this,q=r.cdo._getAttachmentsCount(),Y=(q===1)?d("file_single"):m(d("num_files"),{},{file_attach_num_files:function(){return q;}}),v=r.cdo._getAttachmentsSize(),x=0,u=0,y,p,t,s,o,w=(q===1)?V.str_comp_remove:V.str_comp_removeall;if(q){if(r.uiAttWelcome){r.uiAttWelcome.addClass(i);
}r.uiAttList.removeClass(i);if(r.uiAttRemoveAll){r.uiAttRemoveAll.removeClass(i).one("a").setContent(w).set("title",w);}r.uiAttPane.removeClass(i);if(r.uiAttCount){r.uiAttCount.removeClass(i);}if(r.uiAttSize){r.uiAttSize.removeClass(i);}}else{r.uiAttList.addClass(i);if(r.uiAttRemoveAll){r.uiAttRemoveAll.addClass(i);}if(r.uiAttMessage){r.uiAttMessage.addClass(i);}r.uiAttPane.addClass(i);if(r.uiAttCount){r.uiAttCount.setContent("");}if(r.uiAttSize){r.uiAttSize.setContent("");}r.toggleOverLimit(0);if(r.uiAttWelcome){r.uiAttWelcome.removeClass(i);}return;}if(r.uiAttCount){r.uiAttCount.setContent(Y);}if(r.uiAttSize){var z="sizes_fresh";r.uiAttSize.setContent(m(d(z),{},{transferred_size:function(){return h(v);},total_size:function(){return P+" "+V.str_rte_attachments_megabyte;}}));}r.errorFlags.tooMany=q>Q;r.errorFlags.tooBig=v>f;if(v>f){r.toggleOverLimit(2);}else{if(q>=Q||v===f){r.toggleOverLimit(1);}else{r.toggleOverLimit(0);}}y=r.uiAttPane.all(".file-attach .transfer-error")._nodes;for(p=0,o=y.length;p<o;p++){t=C.one(y[p]);s=t.hasClass("lozenge")?t.get("parentNode"):t;if(!s.hasClass(i)){x++;if(t.hasClass("transfer-virus")){u++;}}}if(r.uiAttMessage){if(u){r.uiAttMessage.setContent((u===1)?d("virus_single"):m(d("virus_mult"),{},{num_virus_files:function(){return u;}}));r.uiAttMessage.removeClass(i);}else{if(x){r.uiAttMessage.setContent((x===1)?d("error_single"):m(d("error_mult"),{},{num_error_files:function(){return x;}}));r.uiAttMessage.removeClass(i);}else{r.uiAttMessage.addClass(i);}}}}function I(Y){var o=this;if(o.errorFlags.tooBig){o.attachError("size");}else{if(o.errorFlags.tooMany||Y){o.attachError("count");}else{return false;}}return true;}function R(v,x){var u=this,w=u.uiAttList||u.tab.one(".file-attach"),s=u.cdo.get("attachments")[v],Y=s.state||{},r=s.size||{},o,t,z,p,y,q=C.mail.UploaderService;r=Y.resampled?r.sampled:r.original;r=h(r);if(u.cdo.get("passive")){s.original=s.size.original;}if(s.original&&Y.uploaded){s.processed=true;}if(NeoConfig.bidi){C.use("comms-intl-bidi",function(AA){o=AA.Intl.detectDirection(unescape(s.filename));});}x=x||(u.uploader&&u.uploader.uploaderType)||q.DEFAULT_UPLOADER;t="_shared_module_rte_well_content_attach_item";z=A[t].browser_plus_attach_else;p=C.Node.create(m(z,s,{filename:function(AA){return W(AA.filename.split("\\").pop());},in_progress1:function(){return s.original?"":A[t].in_progress1;},transfer_error1:function(){return Y.failed?A[t].transfer_error1:"";},transfer_warn1:function(){return Y.failCause?A[t].transfer_warn1:"";},retry:function(){return m(A[t].retry,0,0,0,V);}},null,V));p.one("a").set("title",(s.filename.split("\\").pop()||"")+" ("+r+")");u.handles.push(p.one(".lozengeremove").on("click",function(){var AA=v;if(p.hasClass("downloading")&&u.uploader.cancelUpload){if(D){AA=u.cdo.get("attachments")[v].uploaderInternalID;}u.uploader.cancelUpload(AA);}u.cdo._removeAttachment(v);}));y=p.one(".lozengeretry");if(y){if(!C.UA.webkit&&x===q.UPLOADER_TYPE_FORM){y.addClass("hidden");}else{u.handles.push(y.on("click",function(){var AA=y.getAttribute("retries")||0;y.setAttribute("retries",++AA);u.retryOrSwitchAttachmentMode(v,AA);}));}}if(o){p.one(".btn").setAttribute("dir",o).addClass(o);}u.handles.push(p.on("click",function(){if(!p.hasClass("downloading")){u.downloadAttachment(v);}}));w.append(p);if(q.debug){u.handles.push(p.on("click",function(AA){if(AA.altKey){q.logIt(u.cdo.get("attachments")[v]);}}));}u.dirty=true;}function E(Y){var p=this,o;o=p.uiAttList.all("li")&&p.uiAttList.all("li").item(Y);if(o){o.addClass(i);o.removeClass(T);}p.uploader&&p.uploader.removeAttachment&&p.uploader.removeAttachment(Y);}function M(o,Y){var s=this,r,q,p;r=s.uiAttList.all("li")&&s.uiAttList.all("li").item(o);if(r){q=!!r.one(".lozenge");p=q?".lozengeProgress":".progress";r.one(p).setStyle("width",Y+"%");r.one(p).set("aria-valuenow",Y);}}function j(o){var x=this,z="",v="",s="",t=x.uiAttList.all("li")&&x.uiAttList.all("li").item(o),y,AB,r,u,AE,q,w,Y="",AD,AA,p=C.mail.UploaderService;if(!t){return;}y=!!t.one(".lozenge");if(y){t=t.one(".lozenge").get("parentNode");}else{t.one(".file-container").removeClass("processing");t.one(".prog-indicator").addClass(i);}AB=x.cdo.get("attachments")[o];u=AB.state||{};AE=u.failCause;if(u.failed){t.addClass("transfer-error");if(y){t.all(".lozenge").addClass("lozengeerror");}if(AE==="virus"){t.addClass("transfer-virus");z=d("virusWarning");}else{if(AE==="size"){t.removeClass("downloading");t.one(".lozenge a").set("title",d("alert_size"));}else{if(!y){t.one(".retry").removeClass(i);}z=d("attachFailedWarning");}}if((C.UA.webkit||p.type!==p.UPLOADER_TYPE_FORM)&&AE!=="virus"&&(AA=t.one(".lozengeretry"))){AA.removeClass(i);}x.attachError(AE,o);}else{if(AE){if(y){r=t.one("a");r.addClass("lozengewarn");z=d("noAVScanWarning");}else{t.addClass("transfer-warning");if(p.DEFAULT_UPLOADER!==p.UPLOADER_TYPE_FORM||C.UA.webkit){t.one(".lozengeretry").removeClass(i);}x.attachError(AB.state.failCause,o);}}else{if(y){if(t.hasClass("transfer-error")){t.removeClass("transfer-error");}if((AD=t.all(".lozenge"))&&AD.hasClass("lozengeerror")){AD.removeClass("lozengeerror");AA=t.one(".lozengeretry");if(AA){AA.addClass("hidden");}if(u.retry){t.addClass("downloading");}}}}}if(y){q=AB.size;w=AB.filename;if(!u.retry){t.removeClass("downloading");}q=u.resampled?q.sampled:q.original;q=h(q);try{Y=decodeURIComponent(w||"");}catch(AC){typeof globals!=="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-composeview-compose-attach:1",AC,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-composeview-compose-attach:1");Y=decodeURIComponent(escape(w)||"")||"";}if(AE==="yui_progress_timeout"){v=" YUI Upload Progress Timeout.";}if(NeoConfig.bidi&&V.str_tog_loadRTLCss){s=z+" "+Y+" \u202b("+q+")\u202c.";}else{s=z+" "+Y+" ("+q+").";}AD=t.one(".lozenge");AD&&AD.one("a").set("title",s);}else{C.use("event-mouseenter",function(){x.handles.push(t.on("mouseenter",function(){t.addClass("over");}));x.handles.push(t.on("mouseleave",function(){t.removeClass("over");
}));});}if(t.hasClass(i)){x.cdo._removeAttachment(o);}}function g(p,Y,q){var s=this,r,o=!(C.UA.webkit);if(s.uploader.uploaderType!==C.mail.UploaderService.UPLOADER_TYPE_FORM&&Y>1){C.use("common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btn_ok",function(t){t.common.ui.DialogHelper.custom({hd:V.str_comp_attach_reattach_title,bd:V.str_comp_attach_reattach_body,ft:m(A._shared_module_offscreen_bin_modal_btn_ok.base,0,0,0,V,A)},{"ok":{handler:function(){t.fire("compose:toggleUploaderType",{form:1,destroy:q});r=s.uiAttList.all(".lozengeretry");if(r&&o){r.addClass("hidden");}}}});});}else{if(Y>3){C.use("common-ui-dialog-helper",function(t){t.common.ui.DialogHelper.alert({hd:V.str_comp_attach_reattach_failure_title,bd:V.str_comp_attach_reattach_failure_body},{"ok":{handler:function(){s.cdo._removeAttachment(p);}}});});}else{s.uploader.retryAttachment&&s.uploader.retryAttachment(p);}}}function c(v){var t=this,o=t.tab.one("#upload_file_selection"),p=D&&o&&o.one(".attachment-button-html5")||D&&o&&o.one(".attachment-button-attach")||t.tab.one(".attachment-button-attach"),q=C.mail.UploaderService,w,u=t.uploaderConfig,r=v.flashCrash||0,x=v.destroy||0,y=v.callback||0,s=v.skipDefault||0,Y;if(s){u.skipDefault=s;}if(x){p.fire("yuiuploader:destroy");}else{if(!s){t.reposAttachObj("offscreen");}}if(y){w=y;}else{w=function(z){t.uploader=z;z.updateUI&&z.updateUI();};}if(t.prevUploader&&t.prevUploader.uploaderType===q.UPLOADER_TYPE_FORM){Y=t.uploader;t.uploader=t.prevUploader;t.prevUploader=Y;q.type=q.UPLOADER_TYPE_FORM;w(t.uploader);q.logIt("compose-attach: Switch to "+q.type+" uploader (found existing)");}else{t.prevUploader=t.uploader;u.forceForm=1;u.previousType=t.prevUploader&&t.prevUploader.uploaderType;C.use("mail-service-uploader-form",function(){q.create(u,w,q.UPLOADER_TYPE_FORM);});q.type=q.UPLOADER_TYPE_FORM;q.logIt("compose-attach: Switch to "+q.type+" uploader, creating new uploader");}t.prevUploader&&t.prevUploader.detachEvents&&t.prevUploader.detachEvents();}function B(o){var r=this,p=C.mail.UploaderService,Y,q=0;o=o||p.UPLOADER_TYPE_FLASH;if(r.prevUploader&&r.prevUploader.uploaderType===o){Y=r.uploader;r.uploader=r.prevUploader;r.prevUploader=Y;p.logIt("compose-attach: Switch to "+o+" uploader");p.type=o;r.uploader.bindEvents&&r.uploader.bindEvents();q=1;}else{p.logIt("compose-attach: switch to "+o+", ERROR - existing uploader not found!!");}return q;}function K(p,Y,o){p.addClass("active");Y&&Y.hasClass("active")&&Y.removeClass("active");o&&o.hasClass("active")&&o.removeClass("active");}function S(){var q=this,p=C.mail.UploaderService,o=q.type,Y=q.tab;p.logIt("updateAttachButtonUI");if(o===p.UPLOADER_TYPE_FLASH&&Y.getStyle("visibility")==="visible"){q.reposAttachObj("restore");}else{q.reposAttachObj("offscreen");}if(D){p.toggleUploaderUI({type:o,tab:Y,attView:q});}}function k(u){var t=this,p=C.mail.UploaderService,q="#switch-form",Y="#switch-flash",x="#switch-html5",v,o=u.node||C.one("#menu-attach-options"),s=u.flashCrash||0,w=u.destroy||0,r,y,z;p.logIt("toggleUploaderType: form="+u.form+", flash="+u.flash+",html5="+u.html5);if(u.form&&t.type!==p.UPLOADER_TYPE_FORM){t.type=p.UPLOADER_TYPE_FORM;t.switchToFormUploader({flashCrash:s,destroy:w});t.updateAttachButtonUI({text:V.str_comp_attach_singular});if(!C.UA.webkit){v=t.tab.all(".lozengeretry");v&&v.addClass("hidden");}o&&K(o.one(q),o.one(Y),o.one(x));}else{if((u.flash&&t.type!==p.UPLOADER_TYPE_FLASH)||(u.html5&&t.type!==p.UPLOADER_TYPE_HTML5)){if(u.flash){r=Y;y=x;z=p.UPLOADER_TYPE_FLASH;}else{r=x;y=Y;z=p.UPLOADER_TYPE_HTML5;}o&&K(o.one(r),o.one(q),o.one(y));t.type=z;if(t.switchToUploader(z)){t.updateAttachButtonUI({text:V.str_comp_attach});}else{o&&K(o.one(q),o.one(Y),o.one(x));t.type=p.UPLOADER_TYPE_FORM;}}}}function h(o){var Y=V.str_rte_attachments_bytes;if(o>1048575){o/=1048576;Y=V.str_rte_attachments_megabyte;}else{if(o>1023){o/=1024;Y=V.str_rte_attachments_kilobyte;}}if(isNaN(o)){o=0;}return Math.round(o)+" "+Y;}function N(Y){var q=this,o=q.cdo.get("attachments")[Y],p=o&&o.state||0;if(p.uploaded&&!p.failed&&!p.cancelled){q.cdo.fire("compose:downloadAttachment",Y);}}function l(t){var s=this,q=s.saveUiBtnStyle,p=t===2?"addClass":"removeClass",r=t>0?"addClass":"removeClass",Y=t>0?"removeClass":"addClass",o=C.one(".yuiUploadBox")||null;if(!s.uploader){return;}if(s.uiAttBtnDisabled&&s.uploader.uploaderType===C.mail.UploaderService.UPLOADER_TYPE_FLASH){s.uiAttBtnDisabled[Y](i);}if(s.uiAttSize){s.uiAttSize[p]("overlimit");}if(s.uiAttBtnForm){s.uiAttBtnForm[r](i);}if(o){if(t>0){if(!q){s.saveUiBtnStyle=o.getAttribute("style");}o.setAttribute("style","position:absolute;top:0;left:0;width:1px;height:1px;");}else{if(typeof q!=="undefined"){o.setAttribute("style",q);}}}}function Z(p){var o=p&&p.state||{},q=p.mimetype||"",Y="";q=unescape(q);if(o.failed){Y="transfer-error ";if(o.failCause==="virus"){Y+="virus ";}}if(q){if(L[q]){Y+=L[q];}else{Y+="no-type";}}else{Y+="no-type";}return Y;}function F(r,u){var v=this,q=C.mail.UploaderService,w=v.uploader&&v.uploader.uploaderType,p=q&&q.UPLOADER_TYPE_FLASH,t="offscreen",Y="restore",o,s=v.uiAttBar.one("#upload_file_selection");if(q&&w===p&&v.uiAttBar){o=v.uiAttBar.one("span.attachment-button-attach");if(o.hasClass(i)){o=s;}u=u||o.getXY();if(r===t||v.attachPaneHidden){if(!v.attachXY||v.attachXY[0]!==0||v.attachXY[1]!==0){v.attachXY=[0,0];o.fire("compose:reposAttachObj",{x:0,y:0,resize:true,width:"1px",height:"1px"});D&&o.setStyle("position","absolute");}}else{if((!v.attachXY||u[0]!==v.attachXY[0]||u[1]!==v.attachXY[1])&&(v.type===p||!v.type)){if(D){s.setStyle("position","relative").setStyle("top","auto").setStyle("left","auto");return;}v.attachXY=[u[0],u[1]];if(r===Y){o.fire("compose:reposAttachObj",{x:u[0],y:u[1],resize:true,height:o.getStyle("height"),width:o.getStyle("width")});}else{o.fire("compose:reposAttachObj",{x:u[0],y:u[1],resize:false});}}}}}function U(){var o=this,Y=o.uploader;C.each(o.handles,function(p){p.detach&&p.detach();});o.handles=[];if(Y&&Y.handles){C.each(Y.handles,function(p){p.detach&&p.detach();
});Y.handles=[];Y.attView=null;Y.tab.uploader=null;Y.tab=null;delete X.uploadersCreated[Y.id];}if(Y&&Y.checkFlashTimeout){clearTimeout(Y.checkFlashTimeout);}o.toggleUploaderHandle&&o.toggleUploaderHandle.detach();o.toggleUploaderHandle=null;o.uploader=null;o.uiAttForm=null;o.tab=null;o.uiAttBar=null;o.uiRemoveAll=null;o.uiAttCount=null;o.uiAttSize=null;o.uiAttAVLogo=null;o.uiAttMessage=null;o.uiAttBtnForm=null;o.uiAttBtnDisabled=null;o.uiAttPane=null;o.uiAttList=null;o.uiAttWelcome=null;o.uploaderConfig=null;if(o.attachLargeBtn){o.attachLargeBtn.remove().destroy(true);o.attachLargeBtn=null;}}C.mail.AttachmentView.prototype={setAttachmentStyle:O,addAttachment:R,addNewAttachment:J,removeAttachment:E,enableAttachment:j,downloadAttachment:N,toggleOverLimit:l,updateAttachmentProgress:M,updateSizeAndCount:e,getIconClass:Z,attachError:a,checkOverLimit:I,retryOrSwitchAttachmentMode:g,switchToFormUploader:c,switchToUploader:B,toggleUploaderType:k,updateAttachButtonUI:S,reposAttachObj:F,cleanUp:U};},"1.0.0",{requires:["swfdetect","mail-service-uploader-utils"]});YUI.add("comms-utils",function(D){D.namespace("comms");var B={},C=D.Lang,A=C.trim,E=/{{([^{}]*)}}/g;D.mix(B,{substitute:function(L,K,H,G,F,J,I){if(typeof L!=="string"){return;}if(I){L=I.str||L;K=I.obj||K;H=I.formatters||H;G=I.args||G;F=I.strings||F;J=I.templates||J;}return L.replace(E,function(N,M){var P,O,Q=B.substitute;if(H&&(P=(I&&I.formatters)?I.formatters[M]:H[M])){return(P(K,G,I))||"";}else{if(K&&M in K){O=K[M];return typeof O==="string"&&O.match(E)?Q(O,K,H,G,F,J,I):O;}else{if(F&&M in F){O=F[M];return O.match(E)?Q(O,K,H,G,F,J,I):O;}else{if(J&&M in J){return Q(J[M].base||J[M],K,H,G,F,J,I);}else{return"";}}}}});},escapeHtml:function(F){if(F===null){return null;}F=""+F;F=F.replace(/&(?!(amp|lt|gt|quot|#39|#92);)/g,"&amp;");F=F.replace(/</g,"&lt;");F=F.replace(/>/g,"&gt;");F=F.replace(/\"/g,"&quot;");F=F.replace(/\'/g,"&#39;");F=F.replace(/\\/g,"&#92;");return F;},unescapeHtml:function(F){if(F===null){return null;}F=""+F;F=F.replace(/&amp;/g,"&");F=F.replace(/&lt;/g,"<");F=F.replace(/&gt;/g,">");F=F.replace(/&quot;/g,'"');F=F.replace(/&#39;/g,"'");F=F.replace(/&#92;/g,"\\");return F;},createAddress:function(L){var F=false,H=null,G=null,J=/(<[^<>]+@[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,K,I=L.replace(/\".*\"/g,"");if(!A(I)||I.indexOf("@")<0){return{fail:true,email:L,name:B.escapeHtml(L)};}if(J.test(L)){K=L.match(J);G=K[0];H=A(L.replace(G,""));G=G.substring(1,G.length-1);}else{G=H=A(L);}if(!B.isValidEmail(G)){F=true;}return{fail:F,email:G,name:B.escapeHtml(H)};},isValidEmail:function(O){if(!O){return false;}var L=0,F=O,H=O.lastIndexOf("@"),P=O.substr(0,H),K=P.replace(/\\\\/g,""),J=O.substr(H+1),G=J.length,M=/^(\\.|[A-Za-z0-9!#%&`_=\/$'*+?^{}|~.-])+$/,I=/^"(\\"|[^"])+"$/,N=/^[A-Za-z0-9\-]+$/;if(!M.test(K)&&!I.test(K)){F=false;}J=J.split(".");G=J.length;if(G<2){F=false;}while(L<G){if(!N.test(J[L++])){F=false;}}return F;},splitName:function(L){var P={},M,I,K=A(L),Q,G,J=[],H=((strings.str_name_format).replace(/\{|\}/g,"")).split(" "),O=/^(?:\w[^\s@]*@[^\s@]+\.[^\s@]{2,})?$/,N=false,F=true;if(H[0]==="family_name"){N=true;}if(H.length<3){F=false;}while(K){Q=K.match(/([^\u3000\s]*)[\u3000\s]+/);if(!Q||Q.length!==2||!Q[0]){J.push(K);break;}J.push(Q[1]);K=K.substring(Q[0].length);}M=J.length;for(I=0;I<M;I+=1){G=J[I];switch(I){case 0:if(G){P[(N?"familyName":"givenName")]=(M===1&&O.test(G))?"":G;}break;case 1:if(F&&2<M){P.middleName=G;}else{P[(N?"givenName":"familyName")]=G;}break;case 2:if(F){P[(N?"givenName":"familyName")]=G;}else{P[(N?"givenName":"familyName")]+=" "+G;}break;default:P[(N?"givenName":"familyName")]+=" "+G;}}return P;}});D.comms.Utils=B;},"1.0.0",{requires:[]});YUI.add("comms-ui-lozenge",function(e){function l(t){var n=this;e.use("contacts-ui-contact-popup",function(e){var r=n.getNode(),i=r.ancestor("ul"),s=n.data;s.copyable=n.copy,s.editable=n.edit,s.isContext=!0,s.stateChangeCB=function(t){e.Node.getDOMNode(r)&&(t.state==="show"?r.addClass("focus"):r.removeClass("lozenge-open-menu").removeClass("focus"))},i&&i.all("li").removeClass("focus"),e.mail.ContactPopup.showContactMenu(e.mail.ContactPopup.TYPE_INTERMEDIATE,n.rootNode,s,n.error),r.menu&&r.menu.isVisible()&&t.stopPropagation()}),t.preventDefault()}function c(t){var n=function(t){t.addClass("focus"),e.fire("lozenge:highlight")},r=e.UA.os==="macintosh"?t.metaKey:t.ctrlKey,i=-2,s=-1,u=-1,a,f=-1,l,c,h=!0,p,d;if(r||t.shiftKey){p=this.rootNode.ancestor(".ac-input"),p&&this.rootNode.ancestor(".compose-header").all(".ac-input").each(function(e){e!==p&&e.all(".hLozenge").removeClass("focus")});if(r)this.rootNode.hasClass("focus")?this.rootNode.removeClass("focus"):n(this.rootNode);else if(p){var v=p.all(".hLozenge");v.each(function(e){e.hasClass("focus")&&(a=v.indexOf(e),f===a-1&&h?h=!0:f>=0?h=!1:h=!0,s<a&&(s=a),i<0&&(i=a),f=a)}),u=v.indexOf(this.rootNode),i===s||u<i||u>s?u<i?h?(l=u,c=s):(l=u,c=i):u>s&&(h?(l=i,c=u):(l=s,c=u)):(l=i,c=u),v.removeClass("focus");if(l<0||c<0)n(this.rootNode);else for(a=l;a<=c;a++)n(v.item(a))}}else d=this.rootNode.ancestor(".compose-header"),o===!0?d&&(d=d.all(".hLozenge.focus"),d.size()===1&&this.rootNode.hasClass("focus")?(t.halt(),this.rootNode.removeClass("focus"),this.startEdit()):(d.removeClass("focus"),n(this.rootNode))):(d&&(d=d.all(".hLozenge.focus"),d.removeClass("focus")),n(this.rootNode))}function h(){var e=this,t=e.getFullDisplayData();e.staticL.setContent(r(t)),e.editL.removeClass("mask"),e.staticL.addClass("mask"),e.editL.focus(),e.editL.setAttribute("value",t)}function p(t){var n=this,i,s,o,u,a=t.keyCode;a===13?(i=n.rootNode.ancestor("div"),i&&(s=i.get("scrollTop"),o=i.all("li"),u=o.item(o.size()-1).one("input"),u.focus(),e.later(50,n,function(){i.set("scrollTop",s),u.addClass("whiteout")}))):(n.staticL.setContent(r(n.editL.get("value"))),n.staticL.setAttribute("title",n.getFullDisplayData()))}function d(){var e=this,t=s(e.editL.get("value"));if(!t){e.remove();return}e.data=e.createUserDataFromString(t),e.validate(),e.setState(),e.setLabel(),e.staticL.setAttribute("title",e.getFullDisplayData()),e.staticL.setAttribute("data-address",e.data.email),e.staticL.removeClass("mask"),e.editL.addClass("mask")}function v(){return this.rootNode}function m(){var e=this;if(e.valFn){if(!e.valFn.call(e,e.data))return e.data.fail=!0,e.error=!0,!1}else if(!i.isValidEmail(e.data.email))return e.data.fail=!0,e.error=!0,!1;return e.data.fail=!1,e.error=!1,!0}function g(){var e=this.data,t;t=e.name||e.email,this.staticL.setContent(r(t))}function y(){this.error?this.staticL.addClass("lozenge-error"):this.staticL.removeClass("lozenge-error")}function b(e){var t=!1,n=null,r=null,o=/(<[^<>]+[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,u,a;return e=s(e),a=e.replace(/\".*\"/g,""),!s(a)||a.indexOf("@")<0?(t=!0,r=n=e):(o.test(e)?(u=e.match(o),r=u[0],n=s(e.replace(r,"")),r=r.substring(1,r.length-1)):r=n=e,i.isValidEmail(r)?(this.error=!1,t=!1):(this.error=!0,t=!0)),{fail:t,email:r,name:n}}function w(){var e=this.data,t=e.name||"",n=e.email;return this.error?n:(t=t===n?"":t+" ",t+"<"+n+">")}function E(){var t=this;e.later(0,t,function(){t.rootNode.remove().destroy(!0),e.fire("lozenge:remove")})}var t=e.common.Utils,n=t.substitute,r=t.escapeHtml,i=e.comms.Utils,s=e.Lang.trim,o=t.features.enabled("lozengeContactCard"),u=o===!0?"hcard":"",a={base:'<li class="hLozenge {{parentClass}}" data-action="{{action}}"><span role="button" class="lozenge-static '+u+' cl {{errorClass}} {{dataClass}}" title="{{hover}}" data-address="{{hover}}" >{{label}}</span>{{editable}}</li>',edit:'<input class="lozenge-edit mask" type="text" value="{{fullDisplayData}}">'},f;e.on("click",function(t){if(!t.altKey&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey){var n=e.all(".hLozenge");n.each(function(e){e!==t.target&&e!==t.target.get("parentNode")&&e.hasClass("focus")&&e.removeClass("focus")})}}),f=function(t){var i=this,s,u,f,l;i.label=t.label||"",i.hover=t.hover||"",i.valFn=t.valFn||null,i.error=t.error||!1,i.menu=t.menu||null,i.edit=t.edit||!1,i.copy=t.copy||!1,i.bidi=t.bidi||!1,i.action=t.action||"",i.dataClass=t.dataClass||"",i.parentClass=t.parentClass||"",NeoConfig&&(i.bidi=!!NeoConfig.bidi),i.data=t.data||{name:"",email:"",cid:null},i.validate(),s=e.Node.create(n(a.base,null,null,null,{label:r(this.label),editable:i.edit?a.edit:"",errorClass:i.error?"lozenge-error":"",dataClass:i.dataClass,parentClass:i.parentClass,action:i.action})),u=i.staticL=s.one(".lozenge-static"),u.setAttribute("title",i.hover),t.state!=="error"&&u.setAttribute("data-address",i.hover),s.setData("lozenge",i),s.setData("user",i.data),i.bidi&&(l=e.Intl.detectDirection(i.label.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,">").replace(/&amp;/g,"&")),s.setAttribute("dir",l),s.addClass(l)),o!==!0&&e.on("contextmenu",i.popupMenu,u,i),i.edit&&(f=i.editL=s.one(".lozenge-edit"),f.setAttribute("value",i.getFullDisplayData()),e.on("click",i.highlight,u,i),e.on("dblclick",i.startEdit,u,i),e.on("keydown",i.typeEdit,f,i),e.on("blur",i.finishEdit,f,i),e.on("mousedown",function(t){t.preventDefault(),e.ACWidgetInst&&e.ACWidgetInst.hide(),e.fire("HoverCard:hideHoverCard")},u,i)),i.rootNode=s},f.prototype={popupMenu:l,highlight:c,startEdit:h,typeEdit:p,finishEdit:d,getNode:v,validate:m,setLabel:g,setState:y,getFullDisplayData:w,createUserDataFromString:b,remove:E},e.namespace("comms.ui"),e.comms.ui.Lozenge=f,e.comms.ui.LozengeUtils={makeContact:function(e,t){var r,i=[],s=[],o,u,a,f,l,c,h,p=e.all("span.lozenge");for(r in t){u=t[r].fields;for(var d=0,v=u.length;d<v;d++)o=u[d],o.type==="email"?i=i.concat(o.value):o.type==="name"&&(a=o.value,f=n(strings.str_name_format,{given_name:a.givenName,family_name:a.familyName
}),s=s.concat(f))}p.each(function(e){if(e.hasClass("lozengeadd")){c=e.getAttribute("data-address");for(l=0;l<i.length;l++)i[l]===c&&(e.remove(),h&&(h.addClass("right"),f=s[l],f&&h.one("a").setContent(f),h=null))}else h=e})}}},"0.0.1",{requires:["comms-ui-lozenge_css","common-utils","comms-utils","mail-common-utils-features","isXobnifiedCheck","node"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={valueFn:"_defaultBB",setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n))},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),t&&(n&&t.empty(),t.remove(P)),r||(n&&e.empty(),e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultBB:function(){var e=this.get(w),t=this.CONTENT_TEMPLATE===null;return e&&t?e:null},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName
)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.16.0",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"3.16.0",{requires:["widget-base"]});
