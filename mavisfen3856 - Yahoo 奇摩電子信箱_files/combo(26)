"use strict";YUI.add("tictac-smartviews",function(a){function b(a,b){return f.getAssetURL(a,"tictac-smartviews",b)}function c(a){return i?a.replace(/\.css$/,"_bidi.css"):a}var d,e,f=a.Tictac.base,g=f.getTictacVersion("smartviews"),h=g.filter||"min",i=f.isRTL,j=window.NeoConfig?window.NeoConfig.lang:"en-US";d=b("js/"),e=b("css/"),a.Tictac.base.defineModuleGroup("tictacs",{filter:h,modules:{"tictac-smartviews-rollups":{path:d+"tictac-smartviews-rollups_"+j+"-min.js"},"tictac-smartviews-strings":{path:d+"strings/lang_"+j+"-min.js"},"tictac-smartviews-controller":{path:d+"controller-min.js",requires:["tictac-smartviews","tictac-smartviews-rollups","tictac-smartviews-strings","tictac-base-mailpreferences","event-custom","tictac-smartviews-css","escape"]},"tictac-smartviews-onboarding":{path:d+"onboarding-min.js",requires:["tictac-smartviews-rollups","tictac-smartviews-strings","tictac-base-mailpreferences","mail-common-utils-features"]},"tictac-smartviews-css":{type:"css",path:c(e+"main.css")}}},"min"===h),YUI.namespace("Tictac").smartviews||(a.namespace("Tictac.smartviews").loader=function(){},YUI.Tictac.smartviews=a.Tictac.smartviews,a.use("tictac-smartviews-rollups","tictac-smartviews-strings","tictac-smartviews-controller",function(){var b,c,d,e=a.Tictac.smartviews.rollups;b=a.one("#Folders"),b&&(c=e.container({is_hidden:!0}),a.common.Utils.features.enabled("smartviewsBeforeFolders")?b.insert(c,"before"):b.insert(c,"after")),d=a.one("#Draft"),d&&(c=a.Node.create('<li id="system-app"><ul id="system-app-list"></ul></li>'),d.insert(c,"before")),a.Tictac.smartviews.init(a.one("#smartviews"),a.one("#system-app"))})),a.namespace("Tictac").smartviews=YUI.Tictac.smartviews},"1.0.0",{requires:["tictac-base","mail-common-utils-features"]});"use strict";YUI.add("tictac-simple",function(a){function b(a){var b,c,d=1;if(0===a.length)return d;try{for(b=0;b<a.length;b++)c=a.charCodeAt(b),d=(d<<5)-d+c,d&=d}catch(e){d=1}return d}function c(b,c){return a.Tictac.base.getAssetURL(b,"tictac-simple",c)}var d;a.namespace("Tictac").simple={loader:function(){var c,e=a.common.Utils.features,f=a.Tictac.simple,g=a.Tictac.base,h=0,i=g.getTictacVersion("simple"),j=["unread","starred","personal","social","travel","shopping","financial"],k=!1,l={unread:"read",starred:"star",important:"address",personal:"people",social:"social",travel:"travel",shopping:"shopping",financial:"finance"};f.loadModuleDefs(i.filter,g.isRTL),YUI().use("tictac-base","tictac-base-stats","tictac-base-mailpreferences","tictac-smartviews","tictac-smartviews-controller","tictac-simple-rollups","tictac-simple-strings","tictac-simple-utils","tictac-base-mail-io","tictac-simple-css","mail-common-utils-features","xobni-contacts-search",function(a){function f(a,b){var c=l[a]||a,e={personal:"EVR",travel:"FLR",shopping:"PRD"},f={type:"category",categoryName:a};d.stat("launch_"+a),"important"===a?(f.query=b,f.displayName=y.str_important,f.shouldParseKeyword=!1):(f.query="is:"+a,f.shouldParseKeyword=!0),yui.fire("search:setSearchQuery","",f),yui.fire("search:input",{appid:"YahooMailNeo",foldername:1,tzoffset:-28800,start:0,count:100,sorting:"-date",customTitle:{noLabel:!0,value:y["str_"+a]},noRefine:!0,addToRecentSearches:!1,displayQueryInSearchBar:"",disableScrollToSearch:!0,query:{predictiveSearchType:e[a],keyword:b,group:{from:{},folder:{},flags:{order:"desc"},attachmenttype:{},date:{unit:"year"}},flags:{softdelete:0},adKeyword:c,smartViewType:a,source:"smartview_"+a}})}function g(b){var c,d,f="",g=!1;"important"===b&&(f=e.enabled("importantNotifications")?"system":"",g=e.enabled("important")?!0:!1),c=a.Tictac.smartviews.addView({viewId:"simple-"+b,name:y["str_"+b],title:y["str_"+b],type:f,settings:g}),e.enabled("importantNotifications")&&"important"===b&&r(function(c){c>h&&(d=c-h,yui.use("mail-ui-desktop-notifications",function(a){a.mail.ui.desktopNotifications.notify("Yahoo Mail - Important",d+" New Emails",function(){},5e3)})),h=c,c&&a.Tictac.smartviews.updateView({viewId:"simple-"+b,name:y["str_"+b]+" ("+c+")",title:y["str_"+b]+" ("+c+")",type:"system",settings:!0})}),c.on("launch",function(){m(b)})}function i(b){var c=[],e=z(b.name),f=b.viewId,g=a.Tictac.smartviews.addView({viewId:"simple-custom-"+f,name:e,type:"custom",custom:!0});c.push("Contact"===b.type?g.on("launch",function(){yui.use("mail-ui-execute-search-utils").then(function(a){a.mail.ui.ExecuteSearchUtils.doMailSearch({email:b.email,query:b.query||{},displayName:b.name,source:"smartview_custom_contact",customTitle:{noLabel:!0,value:a.Escape.html(b.name)},displayQueryInSearchBar:"",disableScrollToSearch:!0,noRefine:!0,isSavedSearch:!0})}),d.stat("launch_custom",{type:"Contact"})}):g.on("launch",function(){yui.use("mail-ui-execute-search-utils").then(function(a){a.mail.ui.ExecuteSearchUtils.doMailSearch({displayName:b.name,customTitle:{noLabel:!0,value:a.Escape.html(b.name)},noRefine:!0,isSavedSearch:!0,addToRecentSearches:!1,displayQueryInSearchBar:"",disableScrollToSearch:!0,query:b.query,source:"smartview_custom_keyword",shouldParseKeyword:a.Object.isEmpty(b.query.refinements)})}),d.stat("launch_custom",{type:"Keyword"})})),c.push(g.on("rename",function(a){b.name=z(a),b.query&&(b.query.smartViewType=z(a)),d.stat("custom_rename",{type:b.type}),v.set("simpleCustomViews",w),v.save(),yui.fire("simple:customViewsChanged")})),c.push(g.on("remove",function(){var e=a.Array.indexOf(w,b);d.stat("custom_remove",{type:b.type}),w.splice(e,1),v.set("simpleCustomViews",w),v.save(),yui.fire("simple:customViewsChanged"),a.Array.each(c,function(a){a.detach()})}))}function m(b){var c;switch(b){case"important":x=v.get("importantQuery")||x,c=x+(e.enabled("searchresults")?"":" folder:>0 -folder:2 -folder:3 -folder:4 -folder:8"),f(b,c);break;case"unread":case"starred":case"personal":case"social":case"travel":case"shopping":case"financial":f(b,"is:"+b+" folder:>0 -folder:3 -folder:4 -folder:8");break;default:a.log(b)}}function n(a){var b=y["str_"+a];return yui.Node.create("<span/>").set("text",b).addClass("category").setAttribute("data-category",a).setAttribute("title",b)}function o(a){var b=a.ancestor(".thread-content")||a;return b.one(".message-header")}function p(a,b){var c=o(a);c&&(b=b.toLowerCase(),c.hasClass("simple-header")||(c.addClass("simple-header"),c.one(".msg-attachment")&&c.addClass("simple-header-attachment"),c.appendChild(n(b)).on("click",function(a){d.stat("message_"+b),m(b),a.halt()})))}function q(b,c,d){var e,f,g=d.classification,h={P:"Personal",S:"Social",T:"Travel",H:"Shopping",F:"Financial",U:"Unknown",O:"Other",C:"Other",M:"Other"},i=["@yahoo.com","@ymail.com","@rocketmail.com","@gmail.com","@hotmail.com","@outlook.com"],k=new RegExp(i.join("$|")+"$","i");if(g&&g.category){if(e=h[g.category],"Other"===e)return;if("Unknown"===e&&(f=d&&d.header&&d.header&&d.header.from&&d.header.from.email,e=f.match(k)?"Personal":null),e&&j.indexOf(e.toLowerCase())>-1)return void p(c,e)}a.Tictac.base.mailIO.send(b,{on:{success:function(b,d,f){e=a.Object.getValue(f,["hits","0","categories","0"]),e&&j.indexOf(e.toLowerCase())>-1&&p(c,e)},failure:function(){}}})}function r(a){var b,c="/mailsearch/v2/search";x=v.get("importantQuery")||x,b=x+" is:unread",yui.use("tictac-base-mail-io").then(function(d){d.Tictac.base.mailIO.send(c,{data:{appid:"YahooMailNeo",query:JSON.stringify({keyword:b}),wssid:NeoConfig.wssid},method:"get",on:{success:function(){a(d.Object.getValue(arguments,[2,"total"]))}}})}),window.setInterval(function(){yui.use("tictac-base-mail-io").then(function(d){x=v.get("importantQuery")||x,b=x+" is:unread",d.Tictac.base.mailIO.send(c,{data:{appid:"YahooMailNeo",query:JSON.stringify({keyword:b}),wssid:NeoConfig.wssid},method:"get",on:{success:function(){a(d.Object.getValue(arguments,[2,"total"]))}}})})},1e4)}function s(){var a;for(a=0,c=j.length;c>a;a++)g(j[a]);for(a=0,c=w.length;c>a;a++)i(w[a])}function t(b){b.name=b.name?z(b.name):y.str_branding_generic_smart_view,b.type=b.type?b.type:"Keyword",b.viewId=b.name.replace(/[^a-zA-Z]/g,"")+ +new Date,i(b),w.push(b),a.Tictac.smartviews.revealView("simple-custom-"+b.viewId),v.set("simpleCustomViews",w),v.save(),yui.fire("simple:customViewsChanged"),yui.use("mail-ui-onboarding","tictac-base-utils","minty_module_offscreen_bin_nav_callout","common-utils",function(a){var c=a.ui.Templates.minty_module_offscreen_bin_nav_callout,d=a.common.Utils,e=d.ezSub(c.base,{str_nav_ob_callout:a.Tictac.base.utils.subs(y.str_custom_view_launch_tip,{name:a.Escape.html(b.name)})},c),f=a.one("#smartviews-app-list li:last-child");a.fire("onboard:tip",{node:f,template:e,fn:function(){a.fire("onboard:tipclose")},dir:"left",offset:[f.get("offsetWidth")+5,-20]}),a.one("document").once("click",function(){a.fire("onboard:tipclose")}),a.later(2e3,this,function(){a.fire("onboard:tipclose")})})}var u=[],v=a.Tictac.base.mailpreferences,w=v.get("simpleCustomViews")||[],x=v.get("importantQuery"),y=a.Tictac.simple.strings,z=a.Tictac.simple.Utils.getCustomName;(b(NeoConfig.neoguid)%20===0||NeoConfig.isInternal||NeoConfig.isCorpmail||"f9323"===NeoConfig.farm||"f9326"===NeoConfig.farm)&&(k=v.get("isXobnified"),k||yui.xobniContacts.isXobnified(function(a){a&&(k=a,v.set("isXobnified",a),v.save())})),d=new a.Tictac.base.Stats({name:"simple",ywa:{appId:"10001938606756",actionEnums:{launch:2,launch_personal:3,launch_social:4,launch_travel:5,launch_shopping:6,launch_financial:7,launch_unread:9,launch_starred:10,launch_important:21,message_personal:11,message_social:12,message_travel:13,message_shopping:14,message_financial:15,message_important:16,launch_custom:31,custom_save:32,custom_remove:33,custom_rename:34},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,count:29,time:30}},ultActions:{}}),d.stat("launch"),yui.on("simple:registerCustomView",t),k&&!x?yui.xobniContacts.searchAPI.fetch({query:"",limit:50},function(b){var c,d,f,g=[],h=0,i=NeoConfig.emailAddress;for(c=0;c<b.length&&20>h;c++){for(f=!1,b[c].e===i&&(f=!0),d=0;b[c].a_e.length>d;d++)if(b[c].a_e[d]===i){f=!0;break}!b[c].ke&&b[c].s>0&&!f&&(g=g.concat(b[c].a_e,[b[c].e]),h++)}g.length?(e.enabled("important")||j.splice(2,0,"important"),a.Array.each(g,function(a){u.push("fromaddress:"+a)}),x=("("+u.join(" ")+")").replace(/\+/g,""),u=g):k=!1,s()},function(){k=!1,s()}):(k&&j.splice(0,0,"important"),s()),e.enabled("customViews")&&yui.on("simple:onSearchComplete",function(b,c){var e,f,g=a.Node.create(a.Tictac.simple.rollups.pin());if(b){if(f=a.one(".tictac-contactdetails-header-filter .contactname"),!f)return;for(f.insert(g),e=0;e<w.length;e++)if(w[e].email&&w[e].email===c.email)return g.set("text",y.str_saved),g.setAttribute("disabled","disabled"),void g.setAttribute("title",y.str_saved_as_smart_view);g.on("click",function(a){t({name:c.name,email:c.email,type:"Contact"}),d.stat("custom_save",{type:"Contact"}),yui.fire("util:ymstats",{name:"srp_header_smartview_custom_save",tags:{type:"contact"}}),g.set("text",y.str_saved),g.setAttribute("disabled","disabled"),g.setAttribute("title",y.str_saved_as_smart_view),g.detach("click"),a.halt()})}else{if(f=a.one(".refinement-top-bar-text"),!f)return;for(f.insert(g),e=0;e<w.length;e++)if(w[e].query&&w[e].query.keyword===c.keyword)return g.set("text",y.str_saved),g.setAttribute("disabled","disabled"),void g.setAttribute("title",y.str_saved_as_smart_view);g.on("click",function(b){var e=a.clone(c);e.smartViewType=z(c.keyword),t({name:c.keyword,query:e}),d.stat("custom_save",{type:"Keyword"}),yui.fire("util:ymstats",{name:"srp_header_smartview_custom_save",tags:{type:"keyword"}}),g.set("text",y.str_saved),g.setAttribute("disabled","disabled"),g.setAttribute("title",y.str_saved_as_smart_view),g.detach("click"),b.halt()})}}),yui.on("MessagePane:rendered",function(b,c,d){var e,f,g=o(d),h="/mailsearch/v2/search?count=1&appid=YahooMailNeo&wssid="+NeoConfig.wssid+"&query="+encodeURIComponent(JSON.stringify({from:c&&c.header&&c.header.from&&c.header.from.email,date:{lastndays:Math.ceil((+new Date/1e3-c.header.receivedDate)/60/24)}})),i=a.Object.getValue(c,["header","from","email"]),j=[i];if(g&&!g.one(".category"))if(k){for(e=!1,f=0;f<j.length;f++)if(-1!==u.indexOf(j[f])){e=!0;break}e?p(d,"important"):q(h,d,c)}else q(h,d,c)})})},loadModuleDefs:function(b,d){function e(a){return d?a.replace(/\.css$/,"_bidi.css"):a}var f=c("js/"),g=c("css/"),h=window.NeoConfig?window.NeoConfig.lang:"en-US";b=b||"min",a.Tictac.base.defineModuleGroup("simple",{filter:b,modules:{"tictac-simple-rollups":{path:f+"tictac-simple-rollups_"+h+"-min.js",requires:["handlebars-base"]},"tictac-simple-strings":{path:f+"strings/lang_"+h+"-min.js",requires:[]},"tictac-simple-utils":{path:f+"utils-min.js",requires:[]},"tictac-simple-css":{type:"css",path:e(g+"simple.css")}}},"min"===b)}}},"1.0.0",{requires:["tictac-base","tictac-smartviews","isXobnifiedCheck","xobni-contacts-search-api","mail-common-utils-features","xobni-contacts-search","escape"]});YUI.add("tictac-contactdetails",function(a){"use strict";function b(b,c){return a.Tictac.base.getAssetURL(b,"tictac-contactdetails",c)}function c(a,b){return b?a.replace(/\.css$/,"_bidi.css"):a}function d(b){a.Tictac&&a.Tictac.search?b():a.once("search:loaded",function(){b()})}var e=a.common.Utils.features.enabled("search");a.namespace("Tictac").contactdetails={loader:function(){if(NeoConfig.searchSuggestions){var b,c=a.Tictac.base,f=c.getTictacVersion("contactdetails"),g=a.xobniContacts.Utils.getXobniBaseURL();a.Tictac.contactdetails.loadModuleDefs(f.filter),b=YUI(),b.baseURL=g.url,b.corsXDR=g.xdr,b.namespace("Tictac.contactdetails").neoConfigHadAds=NeoConfig.hasAds,b.fallbackImageUrl=encodeURIComponent("https://s.yimg.com/dh/ap/social/profile/profile_a48.png"),e?d(function(){var c=a.Object.getValue(a.Tictac,["search","isSearchResultsReallyEnabled"]);c(function(a){a||b.use("tictac-contactdetails-strings","tictac-contactdetails-mainController","tictac-contactdetails-entityMainController")})}):b.use("tictac-contactdetails-strings","tictac-contactdetails-mainController","tictac-contactdetails-entityMainController")}},loadModuleDefs:function(d){var e=a.Tictac.base,f=window.NeoConfig?window.NeoConfig.lang:"en-US",g=e.isRTL,h=b("js/"),i=b("css/");d=d||"min",a.Tictac.base.defineModuleGroup("contactdetails",{filter:d,modules:{"tictac-contactdetails-rollups":{path:h+"tictac-contactdetails-rollups_"+f+"-min.js",requires:["handlebars-base"]},"tictac-contactdetails-strings":{path:h+"strings/lang_"+f+"-min.js",requires:[]},"tictac-contactdetails-utils":{path:h+"utils-min.js",requires:[]},"tictac-contactdetails-mainController":{path:h+"maincontroller-min.js",requires:["event-base","tictac-contactdetails-utils","tictac-contactdetails-stats","mail-common-utils-features"]},"tictac-contactdetails-baseContactController":{path:h+"basecontactcontroller-min.js",requires:["event-base","oop","tictac-contactdetails-utils","tictac-base-utils","tictac-contactdetails-attachmentsView","tictac-contactdetails-photosView","tictac-contactdetails-othersView","tictac-contactdetails-twitterfeedsView","tictac-contactdetails-messagesView","tictac-contactdetails-filterView","tictac-contactdetails-stats","mail-common-utils-features"]},"tictac-contactdetails-abContactController":{path:h+"abcontactcontroller-min.js",requires:["event-base","tictac-contactdetails-utils","tictac-contactdetails-contactView","tictac-contactdetails-baseContactController","tictac-contactdetails-abContactDataFetcher"]},"tictac-contactdetails-xContactController":{path:h+"xcontactcontroller-min.js",requires:["event-base","tictac-contactdetails-utils","tictac-contactdetails-contactView","tictac-contactdetails-baseContactController","tictac-contactdetails-xContactDataFetcher"]},"tictac-contactdetails-ContactDataFetcher":{path:h+"contactdatafetcher-min.js",requires:[]},"tictac-contactdetails-stats":{path:h+"stats-min.js",requires:["tictac-base-stats"]},"tictac-contactdetails-attachment":{path:h+"attachment-min.js",requires:["tictac-att-filter","tictac-att-downloader","tictac-contactdetails-stats","mail-controller-messages"]},"tictac-contactdetails-searchresults":{path:h+"searchresults-min.js",requires:["tictac-att-filter","tictac-contactdetails-attachment"]},"tictac-contactdetails-querysearchresults":{path:h+"querysearchresults-min.js",requires:["io-base","tictac-base-mail-io"]},"tictac-contactdetails-messagessearchresults":{path:h+"messagessearchresults-min.js",requires:[]},"tictac-contactdetails-otherssearchresults":{path:h+"otherssearchresults-min.js",requires:[]},"tictac-contactdetails-abContactDataAdapter":{path:h+"abcontactdataadapter-min.js",requires:["tictac-contactdetails-utils","oop"]},"tictac-contactdetails-abContactDataFetcher":{path:h+"abcontactdatafetcher-min.js",requires:["tictac-contactdetails-ContactDataFetcher","tictac-contactdetails-abContactDataAdapter","contacts-api-utils","contacts-api"]},"tictac-contactdetails-xContactDataAdapter":{path:h+"xcontactdataadapter-min.js",requires:["tictac-contactdetails-utils","array-extras","mail-common-utils-features","tictac-base-stats"]},"tictac-contactdetails-xContactDataFetcher":{path:h+"xcontactdatafetcher-min.js",requires:["tictac-contactdetails-ContactDataFetcher","tictac-contactdetails-xContactDataAdapter","tictac-base-mail-io","tictac-base-utils","io-base"]},"tictac-contactdetails-contactView":{path:h+"contactview-min.js",requires:["tictac-contactdetails-rollups","mail-core-feature","tictac-base-view","node","contactdetails-css","tictac-base-stats"]},"tictac-contactdetails-attachmentsView":{path:h+"attachmentsview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-contactdetails-attachmentsBaseView","tictac-contactdetails-attachmentsGalleryView","contactdetails-css","tictac-att-slideshow","tictac-att-rollups","tictac-contactdetails-querysearchresults"]},"tictac-contactdetails-attachmentsGalleryView":{path:h+"attachmentsgalleryview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-contactdetails-stats","tictac-contactdetails-attachmentsBaseView","contactdetails-css","tictac-att-slideshow","tictac-att-rollups","tictac-contactdetails-querysearchresults"]},"tictac-contactdetails-attachmentsBaseView":{path:h+"attachmentsbaseview-min.js",requires:["tictac-contactdetails-rollups","tictac-contactdetails-baseView","node","contactdetails-css","tictac-att-slideshow","tictac-att-rollups","tictac-contactdetails-querysearchresults"]},"tictac-contactdetails-messagesView":{path:h+"messagesview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-contactdetails-messagesBaseView","contactdetails-css","tictac-att-rollups","tictac-contactdetails-messagessearchresults"]},"tictac-contactdetails-messagesBaseView":{path:h+"messagesbaseview-min.js",requires:["tictac-contactdetails-rollups","tictac-contactdetails-baseView","tictac-att-rollups","node","contactdetails-css","tictac-contactdetails-messagessearchresults"]},"tictac-contactdetails-othersView":{path:h+"othersview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-contactdetails-othersBaseView","contactdetails-css","tictac-att-slideshow","tictac-att-rollups","tictac-contactdetails-otherssearchresults"]},"tictac-contactdetails-othersBaseView":{path:h+"othersbaseview-min.js",requires:["tictac-contactdetails-rollups","tictac-contactdetails-baseView","node","contactdetails-css","tictac-att-slideshow","tictac-att-rollups","tictac-contactdetails-otherssearchresults"]},"tictac-contactdetails-photosView":{path:h+"photosview-min.js",requires:["tictac-contactdetails-rollups","node","tictac-contactdetails-photosBaseView","tictac-contactdetails-photosGalleryView","contactdetails-css","tictac-att-slideshow"]},"tictac-contactdetails-photosGalleryView":{path:h+"photosgalleryview-min.js",requires:["tictac-contactdetails-rollups","node","tictac-contactdetails-stats","tictac-contactdetails-photosBaseView","contactdetails-css","tictac-att-slideshow","tictac-contactdetails-querysearchresults"]},"tictac-contactdetails-photosBaseView":{path:h+"photosbaseview-min.js",requires:["tictac-contactdetails-rollups","tictac-contactdetails-baseView","node","contactdetails-css","tictac-att-slideshow","tictac-contactdetails-querysearchresults"]},"tictac-contactdetails-twitterfeedsView":{path:h+"twitterfeedsview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","contactdetails-css","tictac-base-stats"]},"tictac-contactdetails-baseView":{path:h+"baseview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","contactdetails-css","tictac-contactdetails-stats","tictac-contactdetails-attachment","array-extras","tictac-contactdetails-querysearchresults","comms-ui-tooltips-widget","tictac-base-mailpreferences","base-bidi"]},"tictac-contactdetails-entityMapping":{path:h+"entitymapping-min.js",requires:[]},"tictac-contactdetails-entityContactView":{path:h+"entitycontactview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-base-utils","contactdetails-css","tictac-base-mailutils","tictac-base-utils","event","tictac-contactdetails-stats"]},"tictac-contactdetails-entityRelatedProductsView":{path:h+"entityrelatedproductsview-min.js",requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-contactdetails-strings","dataschema","contactdetails-css","event-base","tictac-contactdetails-utils","tictac-base-utils","tictac-contactdetails-entityMapping","tictac-contactdetails-entityContactView","tictac-contactdetails-entityRelatedProductsView"]},"tictac-contactdetails-entityMainController":{path:h+"entitymaincontroller-min.js",requires:["event-base","dataschema","tictac-base-batch-transport","tictac-base-utils","tictac-base-mail-io","tictac-contactdetails-entityMapping","tictac-contactdetails-entityContactView","io","json-stringify","tictac-contactdetails-entityRelatedProductsView"]},"tictac-contactdetails-filterView":{path:h+"filterview-min.js",requires:["tictac-contactdetails-messagesBaseView","tictac-base-utils","tictac-contactdetails-stats","mail-common-utils-features"]}}},"min"===d),a.Tictac.base.defineModuleGroup("contactdetails.css",{filter:d,modules:{"contactdetails-css":{type:"css",path:c(i+"contactdetails.css",g)},"conatctdetails-tooltip-css":{type:"css",path:c(i+"tooltip.css",g)}}},"min"===d)}}},"1.0.0",{requires:["tictac-base","xobni-utilities","mail-common-utils-features","isXobnifiedCheck"]});"use strict";YUI.add("tictac-options",function(a){function b(b,c){return a.Tictac.base.getAssetURL(b,"tictac-options",c)}var c=[];a.namespace("Tictac").options={loader:function(){var b=a.Tictac.base,d=["options-view","options-filters-view","options-viewing-email-view","options-vacation-response-view","options-writing-email-view","options-block-senders-view","options-security-view","options-filters-model","options-filter-model","tictac-base-stats"],e=a.common.Utils.features.enabled("imapIn"),f=b.getTictacVersion("options");a.Tictac.options.loadModuleDefs(f.filter),d.push(e?"options-accounts-view-imap":"options-accounts-view"),window.yui.on("openOptions",function(a){var b=function(b){var d,e,f=new b.Tictac.base.Stats({name:"options",ywa:{appId:"100034076556",actionEnums:{launch_accounts:2,launch_viewing_email:3,launch_writing_email:4,launch_vacation_response:5,launch_filters:6,launch_security:7,launch_block_senders:8,launch_messenger:9,launch_calendar:10,click_accounts:11,click_viewing_email:12,click_writing_email:13,click_vacation_response:14,click_filters:15,click_security:16,click_block_senders:17,click_messenger:18,click_calendar:19,save_refresh:21,save_norefresh:22,cancel:23,conversations_enabled:31,conversations_disabled:32,ssl_enabled:33,ssl_disabled:34,set_prefs_error:35,set_prefs_success:36,get_prefs_error:37,get_prefs_success:38},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,count:29,time:30}},ultActions:{}});for(b.Tictac.options.Stats=f,a=a||{},e=window.optionsView=new b.Tictac.options.OptionsView({limitToViewport:!0,movable:!0,focusNodeSelector:".nav ul a",id:a.view}),f.stat("launch_"+(a.view?a.view:"accounts")),d=0;d<c.length;d++)b.Tictac.options.OptionsView.registerView(c[d]);e.render(),e.show(),e.on("hide",function(){e.destroy()})};YUI().use(d,b)})},loadModuleDefs:function(c){function d(b){return a.Tictac.base.isRTL?b.replace(/\.css$/,"_bidi.css"):b}var e=b("js/"),f=window.NeoConfig?window.NeoConfig.lang:"en-US",g=a.common.Utils.features.enabled("deaV3"),h=a.common.Utils.features.enabled("filtersv3"),i=b("css/");c=c||"min",a.Tictac.base.defineModuleGroup("options",{filter:c,modules:{"tictac-options-strings":{path:e+"strings/lang_"+f+"-min.js"},"tictac-options-rollups":{path:e+"tictac-options-rollups_"+f+"-min.js",requires:["handlebars-base"]},"options-utils":{path:e+"utils-min.js",requires:["io","json","tictac-base","tictac-options-strings","tictac-base-mail-io","tictac-base-utils","tictac-base-batch-transport","options-utils-old","mail-common-utils-features"]},"options-view":{path:e+"optionsview-min.js",requires:["stylesheet","tictac-base-dialogview","tictac-options-rollups","options-css","tictac-options-strings","options-utils","tictac-base-viewutils"]},"options-bizmail-admin-view":{path:e+"bizmailadminview-min.js",requires:["tictac-options-rollups","options-view","tictac-options-strings","tictac-base-utils"]},"options-accounts-view":{path:e+"accountsview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-accounts-model","tictac-base-viewutils","options-accounts-css","options-utils","tictac-base-utils","tictac-base-mailutils","mail-common-utils-features","mail-common-utils-settings","mail-common-connected-accounts"]},"options-accounts-view-imap":{path:e+"accountsviewimap-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-accounts-model-imap","tictac-base-viewutils","options-accounts-imap-css","options-accounts-css","options-utils","tictac-base-utils","tictac-base-richtexteditor","tictac-base-mailutils","options-utils-mailchecker"]},"options-accounts-model":{path:e+"accountsmodel-min.js",requires:["tictac-base-model","options-utils","array-extras"]},"options-accounts-model-imap":{path:e+"accountsmodelimap-min.js",requires:["tictac-base-model","options-utils","array-extras"]},"options-block-senders-view":{path:e+"blocksendersview-min.js",requires:["tictac-options-strings","tictac-options-rollups","tictac-base-viewutils","tictac-base-utils","options-view","options-blocksenders-model","options-blockedaddresses-css"]},"options-writing-email-view":{path:e+"writingemailview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-writing-model","tictac-base-richtexteditor","options-writing-css","tictac-base-viewutils","tictac-base-mailutils"]},"options-writing-model":{path:e+"writingemailmodel-min.js",requires:["tictac-base-model","options-utils","tictac-options-strings","common-persist-user-data"]},"options-viewing-email-view":{path:e+"viewingemailview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-viewing-email-model","tictac-base-viewutils","mail-common-utils-features"]},"options-viewing-email-model":{path:e+"viewingemailmodel-min.js",requires:["tictac-base-model","options-utils","mail-common-utils-features"]},"options-vacation-response-view":{path:e+"vacationresponseview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-vacationresponse-model","tictac-base-viewutils","options-utils","tictac-base-viewutils"]},"options-filters-view":{path:e+"filtersview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","options-filters-css","options-css","escape","options-filters-model","options-filter-model","tictac-base-viewutils","tictac-base-utils","options-utils","common-net-session","mail-common-utils-features"]},"options-filters-model":{path:e+(h?"filtersv3model-min.js":"filtersmodel-min.js"),requires:["tictac-base-model","io","json","options-utils"]},"options-filter-model":{path:e+(h?"filterv3model-min.js":"filtermodel-min.js"),requires:["tictac-base-model","io","json","options-utils","options-filters-model"]},"options-security-model":{path:e+(g?"securitymodelv3-min.js":"securitymodel-min.js"),requires:["tictac-base-model","io","json","options-utils","mail-common-utils-features"]},"options-blocksenders-model":{path:e+"blocksendersmodel-min.js",requires:["tictac-base-model","io","json","options-utils"]},"options-vacationresponse-model":{path:e+"vacationresponsemodel-min.js",requires:["tictac-base-model","io","json","options-utils"]},"options-security-view":{path:e+"securityview-min.js",requires:["tictac-options-strings","tictac-options-rollups","options-view","tictac-base-viewutils","tictac-base-utils","mail-common-utils-features","options-utils","options-security-css","options-security-model"]},"options-utils-mailchecker":{path:e+"mailchecker-min.js"},"options-css":{type:"css",path:d(i+"options.css")},"options-filters-css":{type:"css",path:d(i+"filters.css")},"options-writing-css":{type:"css",path:d(i+"writing.css")},"options-blockedaddresses-css":{type:"css",path:d(i+"blockedaddresses.css")},"options-security-css":{type:"css",path:d(i+"security.css")},"options-accounts-css":{type:"css",path:d(i+"accounts.css")},"options-accounts-imap-css":{type:"css",path:d(i+"accountsImap.css")}}},"min"===c)},registerView:function(a){c.push(a)}}},"1.0.0",{requires:["tictac-base","mail-common-utils-features"]});var startTime=(new Date).getTime();YUI.add("tictac-mim",function(a){"use strict";function b(a,b){var c,d;f&&window.console&&(c=(new Date).getTime(),d=a,b&&(d+=" ~ "+b))}function c(a){h[a]=(new Date).getTime()-startTime,b("*** "+a),h.t4&&h.t_done&&!h.logged&&(yui.use("common-utils-stats",function(a){a.common.Utils.Stat.rtBeacon(978500106,h)}),h.logged=!0)}function d(b,c){return a.Tictac.base.getAssetURL(b,"tictac-mim",c)}var e,f,g=window.strings&&window.strings.str_cfg_tog_hasSMS,h={t1:startTime-(window.NeoGV?window.NeoGV.startTime:0)},i={mimLastActiveState:"never",mimUseTopContacts:void 0,mimSSANotificationSeen:!1,mimSSADefaultSet:!1,mimHomeCountryPref:"",mimLogoutPref:"prompt",mimEnableSounds:!0,mimShowOnlyBuddies:!1,mimCLCollapsedPref:!1,mimCLHeightPref:150,mimConvWinSizePref:{width:300,height:350},mimConvWinSizePrefOld:{width:330,height:350},mimConvWinPosPref:{right:200,bottom:20},mimBlockNonContacts:!1,"cg.pref.im.loginpref":0,mimPrefMigrated:!1,mimCustomPresenceArr:[],mimDefaultFontSize:"2",mimDefaultFontColor:"#000000",mimDefaultFontFamily:"Arial"},j={name:"mim",ywa:{sourceUrl:"https:"===window.location.protocol?"https://s.yimg.com/mi/vs3/ywa.js":"http://d.yimg.com/mi/vs3/ywa.js",server:"VSCALE3",appId:"1000357943879",isSampled:0===Math.floor(10*Math.random()),actionEnums:{ad_rotation:2,login:3,status_available:4,status_busy:5,status_invisible:6,status_custom_old:7,status_custom_new:8,status_message_modified:9,status_signout:10,expanded:11,collapsed:12,window_plus:13,add:14,add_accept:15,add_decline:16,add_block:17,group_add:18,group_add_block_all:19,group_add_accept:20,group_add_decline:21,group_add_block:22,group_add_im:23,conversation:24,options:25,options_save:26,contactlist_resize:31,im:32,sms:33,email:34,message_send:35,message_receive:36,window_resize:37,window_move:38,window_minimize:39,window_maximize:40,window_close:41,right_click:42,contactlist_top:43,contactlist_online:44,rte_format:45,rte_emoticon:46,storm_launch:49,unknown:50},customFieldEnums:{action:17,bucket:28,size:18,type:19,status:20,option:21,ltxt:27}},ultActions:{toggle:!0,frnd:!0,message_send:!0,message_receive:!0}};window.JSON||(window.JSON=window.yui.JSON,window.__NOJSON__=!0),e=a.namespace("Tictac").mim={loader:function(){function d(a){function d(){m.get("presenceState")!==u.STATE.OFFLINE&&m.get("presenceState")!==u.STATE.PENDING&&(m.off("change:presenceState",d),yui.use("contacts-api-utils","contacts-api",function(b){function c(){function c(a){a.result&&0!==a.result.modified.length&&e.parseAddressBook(a.result.modified),a.result&&0!==a.result.created.length&&e.parseAddressBook(a.result.created),a.result&&0!==a.result.removed.length&&e.handleAddressBookContactRemoval(a.result.removed)}var d=b.contacts.utils.getContacts(),e=a.Messenger.Model.ContactList.getInstance();e.parseAddressBook(d),b.on("contacts:contactChanged",c)}b.contacts.utils.areContactsLoaded()?c():b.once("contacts:api:loaded",c)}))}function e(){m.quickLogout(),window.addEventListener?window.removeEventListener("unload",e,!1):window.detachEvent("onunload",e)}function f(){window.yui.fire("openOptions",{view:"messenger"})}var k,l=a.Messenger.Common.RequestManager,m=a.Messenger.Model.Session,n=a.Messenger.Model.ContactList,q=a.Messenger.Model.UserSettings,r=a.Messenger.Model.SystemSettings,s=a.Messenger.Common.Stats,t=a.Tictac.mim.strings,u=a.Messenger.Common.Constants,v=a.one(document.body),w=n.getInstance();if(c("t3"),a.Messenger.GlobalEvents=_.extend({},Backbone.Events),w.setDisplayNameTemplate(t.str_session_display_name_order),r.set("smsEnabled",g),r.set("isRTL",o),r.set("intl",window.NeoConfig.intl),r.set("lang",window.NeoConfig.lang),s.setStatsAPI(new a.Tictac.base.Stats(j)),l.setTransport(a.Messenger.Common.Transport),q.addKeys(i,a.Messenger.Common.MSDBUserPreferences),q.addKeys({mimEnableSSA:!0},a.Messenger.Common.SSPUserPreferences),window.NeoConfig.isCorpmail&&!q.getPreference("mimSSADefaultSet"))return q.setPreference("mimEnableSSA",!1),q.setPreference("mimSSADefaultSet",!0),void q.save();s.stat("storm_launch"),b("First MiM YUI.use call completed","main"),k=q.getPreference("cg.pref.im.loginpref"),h&&(l.crumb=h.crumb,!h.session||h.session.error||a.Messenger.urlParams&&a.Messenger.urlParams.coreServer?k===u.STATE.OFFLINE||"0"!==h.loggedIn&&"1"!==h.loggedInMpop||m.login({state:k,dormant:"0"===h.loggedIn?!1:!0}):(l.processLoginData(h.session),m.processLoginData(h.session),m.set("presenceState",k))),k===u.STATE.OFFLINE||h&&h.crumb&&"undefined"!=typeof h.loggedIn||l.getCrumb({checkStatus:!0,successCallback:function(a){(0===+a.loggedIn||1===+a.loggedInMpop)&&m.login({state:k,dormant:0===+a.loggedIn?!1:!0})}}),a.Messenger.View.ConversationListView.convListView=new a.Messenger.View.ConversationListView({collection:a.Messenger.Model.ConversationList,collectionCL:w,parent:a.one(v),minWidth:250,minHeight:250,movable:!0,resizable:!0,centerOnShow:!1}),a.Messenger.View.ConversationListView.convListView.render(),m.get("presenceState")!==u.STATE.OFFLINE?d():m.on("change:presenceState",d),window.mim=a.Messenger,window.addEventListener?window.addEventListener("unload",e,!1):window.attachEvent("onunload",e),yui.on("signout",function(){e()});var x=yui.one("#yucs");x&&x.delegate("mousedown",function(){e()},"a.yucs-signout"),a.Messenger.GlobalEvents.on(u.EVENTS.SHOW_OPTIONS,f),p.registerView({className:a.Messenger.View.OptionsView,id:"messenger"})}var h,k,l=window.NeoConfig,m=a.Tictac.base,n=m.getTictacVersion("mim"),o=m.isRTL,p=a.namespace("Tictac").options,q=["messenger-xframetransport","messenger-contactlist","messenger-session","messenger-msdb-user-preferences","messenger-usersettings","messenger-conversationlistview","messenger-stats","messenger-ssp","tictac-base-stats","messenger-lozenge-css","messenger-constants","tictac-mim-strings","messenger-systemsettings","messenger-requestmanager","messenger-optionsview"];f=n.enablePerf,f&&(window.__mimStartTime=startTime),c("t2"),b("MiM Loader Invoked","main"),e.loadModuleDefs(n.filter,o),l&&(h="object"==typeof l.mim?l.mim:l.mimData),k=YUI(),k.namespace("Messenger").Neo={core:window.Neo,NeoConfig:l,yui:window.yui},k.Messenger.urlParams=n.urlParams,k.Messenger.logPerf=b,k.Messenger.logPerfStats=c,g&&q.push("messenger-convviewsmsplugin"),q.push("messenger-presenceplugin"),q.push("messenger-contactplugin"),q.push(function(a){try{d(a)}catch(b){a.log("Error occurred in MiM Loader yui.use callback","warn")}}),k.use.apply(k,q)},loadModuleDefs:function(b,c){function e(a){return c?a.replace(/\.css$/,"_bidi.css"):a}var f=d("js/"),g=d("css/"),h=window.NeoConfig?window.NeoConfig.lang:"en-US";b=b||"min",a.Tictac.base.defineModuleGroup("mim_core",{filter:b,modules:{"messenger-systemsettings":{path:f+"systemsettings-min.js",requires:["tictac-base-model"]},"messenger-constants":{path:f+"constants-min.js"},"messenger-utils":{path:f+"utils-min.js",requires:["messenger-constants","datatype-date-format","messenger-ymlutils"]},"messenger-abutils":{path:f+"abutils-min.js",requires:["underscore","messenger-constants","messenger-utils","messenger-smsutils","tictac-base-mailutils"]},"messenger-smsutils":{path:f+"smsutils-min.js",requires:["messenger-constants","messenger-utils","underscore","messenger-usersettings"]},"messenger-ymlutils":{path:f+"ymlutil-min.js",requires:["messenger-constants","messenger-utils"]},"messenger-requestmanager":{path:f+"requestmanager-min.js",requires:["oop","messenger-constants","backbone","messenger-utils"]},"messenger-session":{path:f+"session-min.js",requires:["messenger-constants","messenger-requestmanager","messenger-utils","tictac-base-model","messenger-stats","messenger-systemsettings"]},"messenger-contact":{path:f+"contact-min.js",requires:["messenger-constants","messenger-utils","messenger-requestmanager","tictac-base-model"]},"messenger-contactlist":{path:f+"contactlist-min.js",requires:["messenger-contact","messenger-session","messenger-systemsettings","messenger-utils","messenger-abutils","escape","messenger-smsutils","messenger-constants"]},"messenger-message":{path:f+"message-min.js",requires:["messenger-ymlutils"]},"messenger-conversation":{path:f+"conversation-min.js",requires:["messenger-requestmanager","messenger-message","tictac-base-model","messenger-utils","messenger-contactlist","messenger-constants"]},"messenger-conversationlist":{path:f+"conversationlist-min.js",requires:["messenger-conversation","messenger-usersettings","messenger-contactlist","messenger-session"]},"messenger-usersettings":{path:f+"usersettings-min.js",requires:["tictac-base-model","underscore"]},"messenger-stats":{path:f+"stats-min.js",requires:[]}}},"min"===b),a.Tictac.base.defineModuleGroup("mim_app",{filter:b,modules:{"messenger-viewutils":{path:f+"viewutils-min.js",requires:["messenger-constants","tictac-mim-strings","tictac-mim-rollups","tictac-base","messenger-utils","messenger-smsutils","messenger-usersettings","messenger-stats","messenger-systemsettings","tictac-base-viewutils","escape"]},"messenger-presenceplugin":{path:f+"presenceplugin-min.js",requires:["messenger-newconversationview","messenger-contactlist-css","tictac-mim-rollups","tictac-base-view","messenger-constants","messenger-conversation","tictac-mim-strings","messenger-usersettings","messenger-viewutils","messenger-utils","messenger-stats","messenger-systemsettings","event-hover","messenger-base-css","escape"]},"messenger-contactplugin":{path:f+"contactplugin-min.js",requires:["messenger-newconversationview","messenger-contactlist-css","tictac-mim-rollups","tictac-base-view","messenger-constants","messenger-conversation","tictac-mim-strings","messenger-usersettings","messenger-viewutils","messenger-utils","messenger-stats","messenger-systemsettings","event-hover","messenger-base-css","escape","mail-core-feature"]},"tictac-mim-rollups":{path:f+"tictac-mim-rollups_"+h+"-min.js",requires:["handlebars-base"]},"messenger-conversationlistview":{path:f+"conversationlistview-min.js",requires:["tictac-mim-rollups","tictac-base-dialogview","tictac-base-utils","messenger-utils","messenger-conversationview","messenger-newconversationview","messenger-conversationlist","messenger-usersettings","messenger-conversationlist-css","messenger-viewutils","tictac-mim-strings","messenger-session","messenger-addrequestview","messenger-stats","messenger-contactlist","messenger-abutils","messenger-systemsettings","messenger-constants"]},"messenger-conversationview":{path:f+"conversationview-min.js",requires:["tictac-mim-rollups","tictac-base-view","messenger-contactlist","messenger-ymlutils","tictac-mim-strings","tictac-base-utils","base-bidi","tictac-base-richtexteditor","messenger-constants","messenger-utils","messenger-viewutils","messenger-conversation-css","messenger-usersettings","messenger-stats","messenger-smsutils","messenger-systemsettings","json-parse"]},"messenger-newconversationview":{path:f+"newconversationview-min.js",requires:["tictac-mim-rollups","tictac-base-view","messenger-contactlist","messenger-ymlutils","tictac-mim-strings","tictac-base-utils","base-bidi","messenger-systemsettings","messenger-constants","messenger-utils","io","messenger-viewutils","messenger-conversation-css","escape","messenger-abutils"]},"messenger-addrequestview":{path:f+"addrequestview-min.js",requires:["tictac-mim-rollups","tictac-base-view","messenger-contactlist","messenger-ymlutils","tictac-mim-strings","tictac-base-utils","base-bidi","messenger-utils","messenger-viewutils","messenger-conversation-css","messenger-stats"]},"messenger-optionsview":{path:f+"optionsview-min.js",requires:["tictac-mim-rollups","tictac-base-view","tictac-mim-strings","messenger-options-css","messenger-utils","messenger-contactlist","messenger-constants","messenger-session","messenger-viewutils","messenger-usersettings","messenger-systemsettings"]},"tictac-mim-strings":{path:f+"strings/lang_"+h+"-min.js"},"messenger-ssp":{path:f+"sspuserpreferences-min.js",requires:["messenger-requestmanager","tictac-mim-strings"]},"messenger-msdb-user-preferences":{path:f+"msdbuserpreferences-min.js",requires:["mail-persist-meta-data","messenger-constants","tictac-base-mailpreferences"]},xframe:{path:f+"xframe-min.js"},"messenger-xframetransport":{path:f+"xframetransport-min.js",requires:["tictac-base","xframe","messenger-utils"]},"messenger-convviewsmsplugin":{path:f+"convviewsmsplugin-min.js",requires:["messenger-conversationview","messenger-smsutils","messenger-viewutils","tictac-mim-strings","tictac-mim-rollups","messenger-utils","messenger-constants"]}}},"min"===b),a.Tictac.base.defineModuleGroup("mim_css",{filter:"min",modules:{"messenger-contactlist-css":{type:"css",path:e(g+"contactlist.css")},"messenger-conversationlist-css":{type:"css",path:e(g+"conversationlist.css")},"messenger-conversation-css":{type:"css",path:e(g+"conversation.css")},"messenger-base-css":{type:"css",path:e(g+"base.css")},"messenger-lozenge-css":{type:"css",path:e(g+"lozenge.css")}}},"min"===b)}}},"1.0.0",{requires:["tictac-base","tictac-options"]});YUI.add("tictac-attach",function(a){"use strict";function b(){return-1!==window.location.href.indexOf("autolinkOff")&&NeoConfig.isInternal?!1:window.getSelection?!0:!1}function c(){return e&&b()}function d(a,b){return f.getAssetURL(a,"tictac-attach",b)}var e=a.common.Utils.features.enabled("ComposeWithCard");NeoConfig.linkEnhancrEnabled=c(),NeoConfig.autolinkEnabled=b(),a.namespace("Tictac.attach").loader=function(){yui.use("mail-services-plugins",function(a){a.Mail.Services.Plugins.register("composeEditor",{getPlugin:function(){return new Promise(function(b){a.use("tictac-attach-enhancr-autolink",function(a){b(a.Tictac.attach.enhancr.AutolinkPlugin)})})}}),a.Mail.Services.Plugins.register("composeEditor",{getPlugin:function(){return new Promise(function(b){a.use("tictac-attach-enhancr-card",function(a){b(a.Tictac.attach.enhancr.CardPlugin)})})}})}),NeoConfig.linkEnhancrEnabled&&a.use("tictac-base-mailpreferences",function(a){var b=window.NeoConfig,c=a.Tictac.base.mailpreferences,d=c.get("enhancrLinkPreviewEnabled")||"1",e=c.get("hasShownEnhancrOnboarding");(-1===window.location.href.indexOf("enhancrTutorial")||!NeoConfig.isInternal&&"f9323"!==NeoConfig.farm)&&("-1"===d||e||b.showTabsCallout||b.showNavCallout||b.showOlympicCallout||b.isRegOnboardingEnabled||b.onboardPC)||a.use("tictac-attach-stats","tictac-attach-rollups","mail-ui-onboarding","comms-ui-tooltips-widget","tictac-attach-strings",function(a){var d=a.Tictac.attach.Stats.stat,e=a.common.Utils.features.enabled("composev3");c.set("hasShownEnhancrOnboarding",!0),c.save(),b.showingEnhancrTooltip=!0,a.fire("onboard:tip",{node:a.one("#Compose"),template:a.Tictac.attach.rollups.enhancr_card_onboarding({imgUrl:"https://s.yimg.com/nq/a/img/thm/enhancr_onboarding_03122014.png"}),fn:function(b){var c=b.target;c.test(".tutorial-btn.close")?(d("enhancr_promo_close_dialog"),a.fire("onboard:tipclose")):c.hasClass("okayModalOverlay")||"A"===c.get("tagName")?(d("enhancr_promo_try_it"),a.fire("newMessage",{cbfn:function(b){var c=a.Tictac.attach.strings,d=a.Tictac.attach.rollups;e?(b.setHeader({subject:c.str_link_preview_tutorial_subject}),b.setBody(null,d.link_enhancr_promo())):(b.set("header",{subject:c.str_link_preview_tutorial_subject}),b.set("content",d.link_enhancr_promo())),a.Lang.later(0,null,function(){var b=document.createRange(),c=a.one("#link-enhancr-promo-email-try-pasting").getDOMNode();a.one("#rtetext").focus(),b.setStartAfter(c),document.getSelection().removeAllRanges(),document.getSelection().addRange(b)})}})):b.halt()},dir:"left",width:280,offset:[120,-10]})})})};var f=a.Tictac.base,g=f.isRTL,h=f.getTictacVersion("attach"),i=window.NeoConfig?window.NeoConfig.lang:"en-US";a.Tictac.base.defineModuleGroup("tictacs",{filter:h.filter,modules:{"tictac-attach-model-attachment":{path:d("js/attachment-min.js"),requires:["tictac-base-utils","tictac-attach-utils","escape"]},"tictac-attach-model-attachments":{path:d("js/attachments-min.js"),requires:["array-extras","event-custom","tictac-base-utils","tictac-attach-model-attachment","tictac-attach-utils","tictac-att-filter"]},"tictac-attach-controller":{path:d("js/controller"+(e?"":"_nocard")+"-min.js"),requires:["tictac-attach-neo","tictac-attach-uploader-form","tictac-attach-model-attachments","tictac-attach-utils","tictac-base-stats","tictac-base-utils"]},"tictac-attach-customuploader-html5":{path:d("js/customuploaderhtml5-min.js"),requires:["uploader-html5","tictac-attach-yuipatch"]},"tictac-attach-enhancr-autolink":{path:d("js/enhancr-autolink"+(e?"":"_nocard")+"-min.js"),requires:["tictac-attach-stats","tictac-attach-utils","base","plugin","event-custom","event-key","node-base"]},"tictac-attach-enhancr-card":{path:d("js/enhancr-card-min.js"),requires:["tictac-attach-enhancr-net","tictac-attach-stats","tictac-base-utils","tictac-base-mailpreferences","array-extras","escape","querystring-stringify-simple","base","tictac-attach-rollups","event-custom","comms-ui-envelope"]},"tictac-attach-enhancr-net":{path:d("js/enhancr-net-min.js"),requires:["common-net-sessionmgr","tictac-base-utils","tictac-base-mail-io"]},"tictac-attach-main":{path:d("js/load"+(e?"":"_nocard")+"-min.js"),requires:["event-custom","tictac-att-filter","tictac-attach-enhancr-autolink","tictac-attach-enhancr-card","tictac-attach-neo","tictac-attach-stats","tictac-attach-model-attachments","tictac-attach-view","tictac-attach-controller","tictac-attach-uploader-form","tictac-attach-uploader-html5","tictac-attach-strings","tictac-attach-utils","tictac-base-utils"]},"tictac-attach-neo":{path:d("js/neo"+(e?"":"_nocard")+"-min.js"),requires:[]},"tictac-attach-stats":{path:d("js/stats"+(e?"":"_nocard")+"-min.js"),requires:["tictac-base-ywa"]},"tictac-attach-uploader":{path:d("js/uploader-min.js"),requires:["event-custom"]},"tictac-attach-uploader-form":{path:d("js/uploaderform-min.js"),requires:["event-custom","querystring-parse-simple","tictac-base-utils","tictac-attach-utils"]},"tictac-attach-uploader-html5":{path:d("js/uploaderhtml5"+(e?"":"_nocard")+"-min.js"),requires:["array-extras","event-custom","io","tictac-attach-customuploader-html5","tictac-attach-neo","tictac-attach-rollups","tictac-attach-strings","tictac-attach-utils","tictac-base-utils"]},"tictac-attach-utils":{path:d("js/utils-min.js"),requires:["node","json"]},"tictac-attach-view":{path:d("js/view"+(e?"":"_nocard")+"-min.js"),requires:["base-base","node","tictac-base-utils","tictac-attach-utils","tictac-att-attachment-tray","tictac-att-filter","tictac-att-attachment-compose","tictac-att-attachment-error","tictac-att-attachments","tictac-attach-rollups","tictac-att-downloader"]},"tictac-attach-yuipatch":{path:d("js/yuipatch-min.js"),requires:["file-html5","uploader-queue"]},"tictac-attach-strings":{path:d("js/strings/lang_"+i+"-min.js")},"tictac-attach-rollups":{path:d("js/tictac-attach-rollups_"+i+"-min.js")}}}),a.one("head").append('<link rel="stylesheet" href="'+d(g?"css/attach"+(e?"":"_nocard")+"_bidi.css":"css/attach"+(e?"":"_nocard")+".css","tictac-attach",!0)+'" class="tictac-attach-css" />')},"1.0.0",{requires:["tictac-base","tictac-att","mail-common-utils-features"]});YUI.add("tictac-dropbox",function(a){"use strict";function b(a,b){return d.getAssetURL(a,"tictac-dropbox",b)}a.Tictac=a.Tictac||{},a.Tictac.dropbox=a.Tictac.dropbox||{};var c=a.common.Utils.features.enabled("ComposeWithCard"),d=a.Tictac.base,e=d.getTictacVersion("dropbox");a.Tictac.dropbox.loader=function(){yui.use("mail-services-plugins","tictac-dropbox-strings",function(a){var b=a.Tictac.dropbox.strings,c=a.Mail.Services.Plugins;c.register("composeUploader",{index:0,label:b.str_share_from_db,className:"menu-attach-dropbox",choose:function(){return new Promise(function(b,c){a.use("tictac-dropbox-dropboxdialog",function(a){a.Tictac.dropbox.DropboxDialog.chooseFiles().then(b,c)})})}}),c.register("largeFileUploaders",{upload:function(b){return new Promise(function(c,d){a.use("tictac-dropbox-directupload",function(a){a.Tictac.dropbox.DirectUpload.upload(b).then(c,d)})})}}),c.register("attachmentDownloader",{label:b.str_dropbox_saveto_menuitem,download:function(b){return new Promise(function(c,d){a.use("tictac-dropbox-dropboxsaver",function(a){a.Tictac.dropbox.DropboxSaver.save(b).then(c,d)})})}})})},a.Tictac.base.defineModuleGroup("tictacs",{filter:e.filter,modules:{"tictac-dropbox-rollups":{path:b("js/tictac-dropbox-rollups_"+NeoConfig.lang+"-min.js")},"tictac-dropbox-api":{path:b("js/api-min.js")},"tictac-dropbox-auth":{path:b("js/auth-min.js"),requires:["common-ui-dialog-helper","tictac-base-utils","tictac-dropbox-rollups","tictac-dropbox-strings","tictac-dropbox-stats","tictac-dropbox-api"]},"tictac-dropbox-cardhandler":{path:b("js/cardhandler-min.js"),requires:["tictac-base-utils","tictac-dropbox-strings","tictac-dropbox-stats","tictac-att-filter","array-extras","tictac-attach-enhancr-card"]},"tictac-dropbox-footer":{path:b("js/footer_nocard-min.js")},"tictac-dropbox-controller":{path:b("js/controller"+(c?"":"_nocard")+"-min.js"),requires:["common-ui-dialog-helper","tictac-base-utils","tictac-dropbox-alfview","tictac-dropbox-api","tictac-dropbox-auth","tictac-dropbox-strings","tictac-dropbox-rollups","tictac-dropbox-stats","tictac-dropbox-chooser","tictac-dropbox-saver"]},"tictac-dropbox-chooser":{path:b("js/chooser-min.js"),requires:["tictac-base-utils","tictac-dropbox-api","tictac-dropbox-strings"]},"tictac-dropbox-saver":{path:b("js/saver-min.js"),requires:["tictac-base-utils","tictac-dropbox-api","tictac-dropbox-strings"]},"tictac-dropbox-alfview":{path:b("js/alfview-min.js"),requires:["common-ui-dialog-helper","tictac-base-utils","tictac-dropbox-stats","tictac-dropbox-strings","tictac-dropbox-rollups","tictac-att-progressbar"]},"tictac-dropbox-stats":{path:b("js/stats-min.js"),requires:["tictac-base-stats"]},"tictac-dropbox-strings":{path:b("js/strings/lang_"+NeoConfig.lang+"-min.js")},"tictac-dropbox-dropboxdialog":{path:b("js/dropboxdialog-min.js"),requires:["common-ui-dialog-helper","tictac-dropbox-utils","tictac-dropbox-api","tictac-dropbox-auth","tictac-dropbox-strings","tictac-dropbox-rollups"]},"tictac-dropbox-dropboxsaver":{path:b("js/dropboxsaver-min.js"),requires:["common-ui-dialog-helper","tictac-dropbox-utils","tictac-dropbox-api","tictac-dropbox-auth","tictac-dropbox-strings","tictac-dropbox-rollups"]},"tictac-dropbox-directupload":{path:b("js/directupload-min.js"),requires:["common-ui-dialog-helper","tictac-att-progressbar","tictac-base-utils","tictac-dropbox-utils","tictac-dropbox-uploader","tictac-dropbox-api","tictac-dropbox-strings","tictac-dropbox-rollups"]},"tictac-dropbox-utils":{path:b("js/utils-min.js"),requires:["tictac-dropbox-strings"]},"tictac-dropbox-uploader":{path:b("js/uploader-min.js"),requires:["tictac-dropbox-api"]}}}),a.one("head").append('<link rel="stylesheet" href="'+b("css/dropbox.css","tictac-dropbox",!0)+'" class="tictac-dropbox-css" />')},"1.0.0",{requires:["node","tictac-base","mail-common-utils-features"]});YUI.add("tictac-flickr",function(a){"use strict";function b(a,b){return d.getAssetURL(a,"tictac-flickr",b)}var c=a.common.Utils.features.enabled("ComposeWithCard"),d=a.Tictac.base,e=d.getTictacVersion("flickr"),f=window.NeoConfig?window.NeoConfig.lang:"en-US";a.namespace("Tictac.flickr").loader=function(){yui.use("mail-services-plugins","tictac-flickr-strings",function(a){a.Mail.Services.Plugins.register("composeUploader",{index:2,label:a.Tictac.flickr.strings.str_share_from_flickr,className:"menu-attach-flickr",choose:function(){return new Promise(function(b,c){a.use("tictac-flickr-chooserdialog",function(){a.Tictac.flickr.ChooserDialog.chooseFiles().then(b,c)})})}})})},a.Tictac.base.defineModuleGroup("tictacs",{filter:e.filter,modules:{"tictac-flickr-auth":{path:b("js/auth-min.js"),requires:["tictac-base-utils","tictac-flickr-stats","tictac-flickr-strings","tictac-flickr-rollups","tictac-flickr-ws","common-ui-dialog-helper"]},"tictac-flickr-chooser":{path:b("js/chooser-min.js"),requires:["array-extras","common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btns_ok_cancel","node-scroll-info","event-hover","tictac-base-utils","tictac-flickr-justifier","tictac-flickr-model","tictac-flickr-rollups","tictac-flickr-strings","tictac-flickr-stats","tictac-flickr-uploadctrl"]},"tictac-flickr-controller":{path:b("js/controller"+(c?"":"_nocard")+"-min.js"),requires:["tictac-flickr-auth","tictac-flickr-chooser","tictac-flickr-stats","tictac-base-utils","tictac-attach-enhancr-card"]},"tictac-flickr-justifier":{path:b("js/justifier-min.js"),requires:["tictac-base-utils"]},"tictac-flickr-model":{path:b("js/model-min.js"),requires:["tictac-base-utils","tictac-flickr-strings","tictac-flickr-ws"]},"tictac-flickr-stats":{path:b("js/stats-min.js"),requires:["tictac-base-stats"]},"tictac-flickr-uploadctrl":{path:b("js/uploadctrl-min.js"),requires:["datatype-xml-parse","tictac-att-progressbar","tictac-base-utils","tictac-flickr-uploader-form","tictac-flickr-rollups","tictac-flickr-strings","tictac-flickr-stats"]},"tictac-flickr-uploader-form":{path:b("js/uploaderform-min.js"),requires:["tictac-base-utils","tictac-flickr-stats","tictac-flickr-strings","tictac-flickr-rollups","tictac-flickr-ws","common-ui-dialog-helper"]},"tictac-flickr-ws":{path:b("js/ws-min.js"),requires:["io","tictac-base-utils"]},"tictac-flickr-footer":{path:b("js/footer_nocard-min.js")},"tictac-flickr-chooserdialog":{path:b("js/chooserdialog-min.js"),requires:["tictac-flickr-auth","tictac-flickr-chooser","tictac-flickr-stats","tictac-base-utils"]},"tictac-flickr-strings":{path:b("js/strings/lang_"+f+"-min.js")},"tictac-flickr-rollups":{path:b("js/tictac-flickr-rollups_"+f+"-min.js")}}}),a.one("head").append('<link rel="stylesheet" href="'+b("css/flickr"+(c?"":"_nocard")+".css","tictac-flickr",!0)+'" class="tictac-flickr-css" />')},"1.0.0",{requires:["tictac-base","mail-common-utils-features"]});