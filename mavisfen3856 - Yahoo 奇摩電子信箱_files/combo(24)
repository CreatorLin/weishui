YUI.add("common-utils-rapid",function(e){var t,n,r=NeoConfig,i,s,o,u={},a,f=NeoConfig.maxClickRecords||30,l=1e3,c=[];t=function(){function t(e){var t=w(e),r=t.linkData;r&&r.length&&(n.beaconLinkViews(r),a&&(a.ln[e.action]=t))}function h(t,n,r,s){var o=e.JSON.stringify(t),u=e.JSON.stringify(n),a=!1,f;return o!=u&&(f="Rapid click event mismatch. Expected:"+o+" Actual:"+u,e.common.Utils.log({m:f},!0,"ULTError"),a=!0),r||(f="sec is not defined",e.common.Utils.log({m:f},!0,"ULTError"),a=!0),s||(f="slk is not defined",e.common.Utils.log({m:f},!0,"ULTError"),a=!0),a&&(f="Click integrity check failed with rapid cfg:"+e.JSON.stringify(i),e.common.Utils.log({m:f},!0,"ULTError")),a}function p(t){var r=e.clone(t),i=E(r),s,o,u;i?(s=i.sec,o=i.slk,delete i.sec,delete i.slk,r.seq&&(i.seq=r.seq),r.ts&&(i.ts=r.ts),n.beaconClick(s,o,0,i),a&&(a.ck[t.action]=i),h(t,r,s,o),i.mTime=Neo.performance.now(),c.push(i),c.length>f&&c.shift()):(u="ULT: No click logged for "+t.action,e.common.Utils.log({m:u},!1,"ULTInfo"))}function d(e){var t=e.sp;i.spaceid=t,n.reInit(i)}function v(){var e;while(NeoGV.rapidQueue.length){e=NeoGV.rapidQueue.shift();switch(e.type){case"rapid:click":p(e.data);break;case"rapid:view":t(e.data)}}}function m(){e.on("rapid:view",t),e.on("rapid:click",p),e.on("ult:spaceIdChange",d)}function g(){var t=r.expBucketId,o=r.buildVersion,f={intl:r.intl,lang:r.lang,mt:r.hasAds===0?"plus":"free",pt:r.partnerType,bldVer:r.buildNumber,conv:r.hasConvView};i={spaceid:NeoGV.sp,tracked_mods:u,keys:f,pageview_on_init:!1},t&&t!=="0"&&(i.test_id=t),n=new YAHOO.i13n.Rapid(i),s=e.mail.Tabs,v(),m(),e.common.Utils.features.enabled("testUlt")&&!NeoGV.testUlt&&(NeoGV.testUlt={ck:{},ln:{}},a=NeoGV.testUlt),a&&e.one("body").addClass("rapid-loaded")}function y(e){var t,n=s.getActiveTab(),r=n&&n.widget,i=r&&r.type,o=e.fid||r&&r.fid,u;if(i==="messagepane")t="msgRdTb";else if(i==="convpane")t="thrdRdTb";else if(i==="compose")t="cmpsTb";else switch(o){case"Inbox":t="inbxTb";break;case"%40C%40Chats":t="chtTb";break;case"Draft":t="drftTb";break;case"Sent":t="sntTb";break;case"%40B%40Bulk":t="spmTb";break;case"Trash":t="trshTb";break;case"%40S%40Search":t="srchTb";break;default:u=n&&n.elContent.getAttribute("data-tid");switch(u){case"tabcontacts":t="cntctsTb";break;case"tabnotepad":t="ntpdTb";break;case"tabcalendar":t="clndrTb";break;default:t="fldrTb"}}return t}function b(e){var t={sec:e[0],t1:e[1],t2:e[2]},n,r=e.length,i;for(n=3;n<r;n++){i=e[n];if(typeof i=="object")break;t["t"+n]=i}return t}function w(t){var n=e.common.Utils.RapidVM[t.action],r,i,s,o,u,a={},f,l,c,h,p=t.append||{},d=t.args||{},v=[],m=[];if(n){o=n.length;for(u=0;u<o;u++)l=n[u],h={action:l,append:p,args:d},c=E(h),c&&(i=c.t1,s=c.t2,r=c.sec,f=i+":"+s+":"+r,a[f]||(a[f]={sec:r,t1:i,t2:s,_links:[]}),delete c.sec,delete c.t1,delete c.t2,a[f]._links.push(c),m.push(l))}for(f in a)v.push(a[f]);return{clickKeys:m,linkData:v}}function E(t){var n=t.append||{},r=t.args||{},i=t.action,s=e.common.Utils.RapidCM,u,a,f,l,c;if(s[i]){u=s[i],f=u.length-1,a=b(u),l=typeof u[f]=="object"?u[f]:{},e.mix(l,n),e.mix(a,l,!0);if(!a.slk){while(f>0&&(typeof u[f]=="object"||!u[f]))f--;a.slk=u[f]}for(c in a)o[a[c]]&&(typeof o[a[c]]=="function"?a[c]=o[a[c]](r):a[c]=o[a[c]]);a.mKey=i}return a}function S(e,t){var r={};u[e]||(r[e]=t,u[e]=t,n.addModules(r))}function x(e){n.refreshModule(e)}function T(e){return n.isModuleTracked(e)}function N(e){u[e]&&(delete u[e],n.removeModule(e))}function C(e,t){var n,r,i,s=0,o=c.length-1;t||(t=l);while(o>=s){n=Math.floor((s+o)/2),r=c[n].mTime,i=Math.abs(r-e);if(i<=t&&(n===o||Math.abs(c[n+1].mTime-e)>i)&&(n===s||Math.abs(c[n-1].mTime-e)>i))return c[n].mKey;r>e?o=n-1:s=n+1}return!1}o={"{{activeTab}}":y,"{{listMode}}":r.hasConv?"thrded":"chrnlgcl"},g(),e.mix(this,{beaconView:t,clickIntegrityCheck:h,beaconClick:p,flushQueue:v,bindUI:m,init:g,getLinkViews:w,getClick:E,getActiveTab:y,getPositions:b,spaceIdChange:d,registerModule:S,refreshModule:x,isModuleTracked:T,removeModule:N,getClickKeyForTime:C})},e.namespace("common.Utils").Rapid=new t},"1.0.0",{requires:["common-utils","common-utils-rapid-viewmap","common-utils-rapid-clickmap","mail-common-utils-features","common-ui-tabs-base"]});
!function(a){a.ucs||(a.ucs={});var b=a.ucs;b.UH_OUTER_ID="#UH",b.UH_MAIN_ID="#uhWrapper",b.HIDDEN_CLS="Hidden",b.DN_CLS="D-n",b.components={search:{selector:"#UHSearch",init_cls:"UHSearch-Init",web_btn_selector:"#UHSearchWeb",prop_btn_selector:"#UHSearchProperty",input_selector:"#UHSearchBox",panel_selector:"#yucs-satray"},help:{selector:"#yucs-help"},profile:{selector:""},mail:{selector:"#yucs-mail"}},b.YObj=a.YMedia||YUI(),b.ymreqid=a.ucs.ymreqid||function(){var a=(new Date).getTime(),b=null,c="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(c){return b=(a+16*Math.random())%16|0,a=Math.floor(a/16),b.toString(16)});return c};var c=document.getElementById("yucs-meta");b.protocol=c&&c.getAttribute("data-protocol")?c.getAttribute("data-protocol"):"http",b._sendBeacon=function(a,b){if(a){var c=new Image;c.height=0,c.width=0,c.style.display="none",c.src="https://geo.yahoo.com/t"+a,document.body.appendChild(c)}}}(window);ucs.YObj.use("node","event-resize","dom-screen",function(a){var b=a.one(window.ucs.UH_OUTER_ID),c=a.one("html"),d="Sticky-off",e=parseInt(b.getData("minW"),10)||970,f=function(){a.DOM.winWidth()>e?c.removeClass(d):c.addClass(d)};a.UA.ie&&a.UA.ie<9&&(f(),a.on("windowresize",f))});YUI.add("ucs-menu-group-plugin",function(a){function b(a){this.host=a.host,this.addClasses=a.addClasses}a.namespace("ucs");var c='<li class="{isDisabled} {isActive} {menuClass} {separatorBottom} {separatorTop} {listClasses}"><a target="{target}" {inProductHelp} {actionData} href="{url}" {disabledAria} class="{linkClasses}" data-ylk="rspns:nav;t3:tl-lst;t5:custitm;slk:custitm;elm:itm;elmt:custitm;itc:0;cpos:{cpos}">{icon}{menuText}</a></li>',d='<li class="{isDisabled} {isActive} {menuClass} {separatorBottom} {separatorTop} {listClasses}"><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria} class="{linkClasses}" data-ylk="rspns:nav;t3:tl-lst;t5:custitm;slk:custitm;elm:itm;elmt:custitm;itc:0;cpos:{cpos}">{icon}{menuText}</a></li>',e='<ul class="Bleed Pos-r My-0 NoLinkColor">{menuItems}</ul>',f="Bd-t",g="Bd-b",h="yucs-menu-group",i="ul",j="http://l.yimg.com/a/lib/ush/icon.gif",k="https://s.yimg.com/lq/lib/ush/icon.gif";b.NAME="ucs-menu-group-plugin",b.NS="menugroup",b.prototype={_addMenuGroups:function(b,c,d,e){var f,g,j=this.host.panel,k="";j.all(i).addClass(h);for(var l=0,m=b.length;m>l;l++)k+=this._addMenuGroup(b[l],d,e);f=a.Node.create(k),g=d?"debug-item":"minty-item",b=f.all(i),0===b.size()&&(b=f),b.addClass(e+" "+g),"bottom"===c?j.append(f):j.prepend(f),j.all(i).slice(0,-1).addClass("Bd-b"),j.all(i).each(function(a){a=a.get("children"),a.size()>0&&a.item(a.size()-1).removeClass("Bd-b")}),a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0")},_addMenuGroup:function(b,c,d){for(var f,g="",h=!0,i="Py-8",j=0,k=b.length;k>j;j++)f=b[j],c?(f.isDebugItem=!0,f.menuClass="debug-item"):(f.isDebugItem=!1,f.menuClass="minty-item"),f.menuClass+=this.addClasses&&this.addClasses.menuClass&&" "+this.addClasses.menuClass.join(" ")||" Px-10",f.menuClass+=" "+i,f.cpos=j+1,h&&(h=!1,i=" Pb-8"),g+=this._addMenuItem(f,d);return g=a.substitute(e,{menuItems:g})},_addMenuItem:function(b,e){var f="";if(b.checkedAria=b.isActive?'aria-checked="true"':"",b.disabledAria=b.isDisabled?'aria-disabled="true"':"",b.actionData&&b.actionData.match(/^om:/))return f;switch(b.actionType){case"link":f=a.substitute(c,b,this._processTemplateValue);break;case"customEvent":f=a.substitute(d,b,this._processTemplateValue)}return f&&(f=b.isDebugItem?f.replace(/separator/,"separator debug-item"):f.replace(/separator/,"separator minty-item")),f},_processTemplateValue:function(b,c,d){a.log("key = "+b+" value = "+c+" meta_data = "+d);var e="",h="https:"===document.location.protocol?k:j;switch(b){case"icon":void 0!==c&&(e="available"===c?'<img src="'+h+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+h+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+h+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+h+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+h+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(e=f);break;case"separatorBottom":c&&(e=g);break;case"actionData":c&&(e='data-mad="'+c+'"');break;case"inProductHelp":c&&(e='data-inproducthelp="'+c+'"');break;case"listClasses":case"linkClasses":c&&(e=c);break;case"isDisabled":c&&(e="disabled");break;case"isActive":c&&(e="sp active");break;case"checkedAria":e=c;break;default:e=c}return e}},a.ucs.MenuGroupPlugin=b},"1.0.0",{requires:["ucs-menu-utils","node-screen","plugin"]});YUI.add("ucs-menu-plugin",function(a){function b(a){this.host=a.host,b.superclass.constructor.apply(this,arguments)}var c=(a.Lang,"https://s.yimg.com/os/mit/media/m/base/images/transparent-95031.png"),d='<iframe src="'+c+'" aria-hidden="true" tabindex="-1" frameborder="0" class="IframeTooltip"></iframe>',e='<div class="js-Tooltip-Wrapper Pos-r"><div tabindex="-1" class="Z-5 {{panelClasses}}">'+d+"</div></div>",f=[{name:"NorthFarWest",pos:0},{name:"NorthWest",pos:.25},{name:"North",pos:.5},{name:"NorthEast",pos:.75},{name:"NorthFarEast",pos:1}],g=function(){var b=a.Node.create(e.replace(/\{\{panelClasses\}\}/,this.panel.get("className")+" Px-10")),c=b.get("children").item(0);c.appendChild(this.panel.remove(!1)),this.hiddenPanel=c,this.panel.set("className","Pos-r M-0 TooltipContent"),this.appendChild(b)},h=function(){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r=this.hiddenPanel,s=this,t=r.hasClass(ucs.DN_CLS),u=0,v=0,w=10,x=[],y=[],z=15;for(m=r.getAttribute("style"),t&&(r.setStyles({top:"-100px",height:"5px",marginLeft:"0",marginRight:"0"}),r.replaceClass(ucs.DN_CLS,"Ov-h")),d=a.one("#uhWrapper").get("region"),j=r.get("region"),this.panelWidth=j.width,window.innerWidth<d.width&&(d={left:0,right:window.innerWidth}),b=r.get("className"),c=/North\w+/g.exec(b),e=r.hasClass("North"),g=r.hasClass("Arrow"),h=g&&s.one(".yucs-trigger i").get("region")||s.get("region"),i=h.left+h.width/2,c=c&&c[0]||"North",r.removeClass(c),p=0,q=f.length;q>p;p++)u=f[p].pos,v=u%1===0&&(-1+2*u)*w||0,u=j.left+j.width*u-v,k=u-i,l=j.left-k,o=d.right-(l+j.width),n=l-d.left,x.push(n>=z?Math.floor(n):Number.POSITIVE_INFINITY),y.push(o>=z?Math.floor(o):Number.POSITIVE_INFINITY);n=Math.min.apply(null,x),o=Math.min.apply(null,y),o>n?(p=a.Array.indexOf(x,n),l=n+d.left):(p=a.Array.indexOf(y,o),l=d.right-(j.width+o)),r.addClass(f[p].name).setX(l),t&&(r.replaceClass("Ov-h",ucs.DN_CLS),r.setStyles({right:"auto",top:g?"-2px":"",height:""}))};b.NAME="MenuPlugin",b.NS="addons",b.ATTRS={},a.extend(b,a.Plugin.Base,{initializer:function(){var a=this.host;/\w+DropDown/g.test(a.get("className"))?this.hiddenPanel=this.panel:(g.call(a),h.call(a)),a.resetPosition&&(this.setPosition=h),this.onHostEvent("ucs:showMenu",this._show),this.onHostEvent("ucs:hideMenu",this._hide),this.onHostEvent("ucs:resetPosition",this._resetPosition)},destructor:function(){},_resetPosition:function(){this.setPosition&&this.setPosition.call(this.host)},_show:function(a){var b=this.host;b.fire("ucs:show",a),this._resetPosition(),b.hiddenPanel.removeClass(ucs.DN_CLS)},_hide:function(a){var b=this.host;b.hiddenPanel.addClass(ucs.DN_CLS),b.fire("ucs:hide",a)}}),a.namespace("Plugin.Uh").MenuPlugin=b},"0.1.0",{requires:["plugin"]});YUI.add("ucs-menu-utils",function(a){a.namespace("ucs");{var b=500;("https"===ucs.protocol?"https://s.yimg.com":"http://l.yimg.com")+"/kx/yucs/uh3s/uh/26/js/menu_group_plugin.js"}a.ucs.MenuUtils=function(b,c){var d=c&&c.panel||"> div",e=c&&c.trigger||"> a";if(this.closeTimer=null,this.overPanel=!1,this.overLink=!1,this.menu=b=b.one&&b||a.one(b),this.menu.trigger=b.one(e),this.menu.panel=b.one(d),this.menu.panel){this.menu.hiddenPanel=this.menu.panel,this.ylt=c&&c.ylt||"",this.rapidData=c.rapidData||null,c&&c.menuGroupPlugin&&(this.menu.plug(a.ucs.MenuGroupPlugin,c.menuGroupPlugin.config||{}),this.menu.resetPosition=!0),d=this.menu.panel,this.menu.hiddenPanel=d.hasClass("D-n")&&d||d.one(".D-n");var f=c.event||"mouseenter";this._initEvents(f)}},a.ucs.MenuUtils.prototype={_initEvents:function(b){a.on("domready",this._initMenuPlugin,this),this.menu.trigger.on("click",this._handleMenuEvent,this);var c=this.menu.on("ucs:showMenu",function(a){c.detach(),this.menu.addons||(this._initMenuPlugin(),this.menu.fire("ucs:showMenu",a))},this);"mouseenter"===b&&(this.menu.on(b,this._handleMenuEvent,this),this.menu.on("mouseleave",this._handleMenuEvent,this))},_handleMenuEvent:function(c){var d=c.type,e="mouseenter"===d||"click"===d&&this._isHidden();"click"===d&&(c.preventDefault(),this.bodyEvent&&this.bodyEvent.detach(),e&&(this.bodyEvent=a.one("body").on("click",this._handleBodyClick,this))),e?this.fireBeacons=a.later(b,this,function(){this._isHidden()===!1&&this._fireRapid()}):this.fireBeacons&&this.fireBeacons.cancel(),this.menu.fire(e?"ucs:showMenu":"ucs:hideMenu",c)},_initMenuPlugin:function(){this.menu.plug(a.Plugin.Uh.MenuPlugin)},_isHidden:function(){return this.menu&&this.menu.hiddenPanel&&this.menu.hiddenPanel.hasClass?this.menu.hiddenPanel.hasClass(ucs.DN_CLS):!1},_handleBodyClick:function(a){var b=this.menu;b.contains(a.target)||(b.addons?b.fire("ucs:hideMenu",a):(b.fire("ucs:hide",a),b.hiddenPanel.addClass(ucs.DN_CLS)),this.bodyEvent.detach())},_fireRapid:function(){var b=this.rapidData;b&&a.Global.fire("ucs-rapid:event",b),a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0")}},a.augment(a.ucs.MenuUtils,a.EventTarget)},"1.0",{requires:["node","event","event-mouseenter","event-custom","substitute","node-focusmanager","get","ucs-menu-plugin","plugin"],use:["ucs-menu-group-plugin"]});YUI.add("gallery-jsonp",function(a){function b(){this._init.apply(this,arguments)}var c=a.Lang.isObject,d=a.Lang.isFunction;b._pattern=/\bcallback=(.*?)(?=&|$)/i,b._template="callback={callback}",b.prototype={_init:function(b,c){this.url=b,c=c||{},d(c)&&(c={on:{success:c}}),c.on=c.on||{},c.on.success||(c.on.success=this._getCallbackFromUrl(b)),this._config=a.merge({on:{},context:this,args:[],format:this._format},c)},_getCallbackFromUrl:function(e){var f,g,h,i,j=e.match(b._pattern);if(j){for(g=a.config.win,h=j[1].split(/\./).reverse(),f=h.shift(),i=h.length-1;i>=0;--i)if(g=g[h[i]],!c(g))return null;if(c(g)&&d(g[f]))return a.bind(g[f],g)}return null},send:function(b){function c(a){return d(a)?function(b){delete YUI.Env.JSONP[e],a.apply(f.context,[b].concat(f.args))}:null}if(!this._config.on.success)return this;var e=a.guid().replace(/-/g,"_"),f=this._config,g=f.format.call(this,this.url,"YUI.Env.JSONP."+e);return YUI.Env.JSONP[e]=c(f.on.success),a.Get.script(g,{onFailure:c(f.on.failure),onTimeout:c(f.on.timeout||f.on.failure),timeout:f.timeout}),this},_format:function(a,c){var d,e=b._template.replace(/\{callback\}/,c);return b._pattern.test(a)?a.replace(b._pattern,e):(d=a.slice(-1),"&"!==d&&"?"!==d&&(a+=a.indexOf("?")>-1?"&":"?"),a+e)}},a.JSONPRequest=b,a.jsonp=function(b,c){return new a.JSONPRequest(b,c).send()},YUI.Env.JSONP||(YUI.Env.JSONP={})},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-logodebug",function(a){a.namespace("ucs");var b=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),d=!1;c&&(-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(d=!0),(b&&0===b.offsetWidth&&void 0===b.readyState||b&&0===b.offsetWidth&&"uninitialized"===b.readyState||d&&b&&"uninitialized"===b.readyState||d&&b&&void 0===b.readyState)&&(c.style.visibility="visible",c.style.position="relative")),a.ucs.LogoDebug=function(a){a.on("click",this._handleClick,this),this.publish("ucs:logoDebug",{broadcast:2,emitFacade:!0})},a.ucs.LogoDebug.prototype={_handleClick:function(a){a.altKey&&(a.halt(),this.fire("ucs:logoDebug"))},_handleThemeChange:function(b){a.one("#animator")&&a.one("#animator").setStyle("display","none"),a.one("#yucs-logo-ani")&&(a.one("#yucs-logo-ani").setStyle("position","relative"),a.one("#yucs-logo-ani").setStyle("visibility","visible"))}},a.Global.on("ucs:themeChange",function(b){a.later(11,this,this._handleThemeChange)}),a.augment(a.ucs.LogoDebug,a.EventTarget)},"1.0",{requires:["node"]}),function(){ucs.YObj.use("node","ucs-logodebug",function(a){var b=a.one(".YLogoMY");if(b){new a.ucs.LogoDebug(b)}})}();(function(){var f="%Y",e="%y",h="%m",a="%d",c="_",b=document.getElementById("yucs")&&document.getElementById("yucs").getAttribute("data-lang").toLowerCase()||"en-us";if(!window.ucs){window.ucs={};}function d(i){switch(i){case"tr-tr":return[" "];case"es-cl":case"nl-nl":case"ta-in":case"zh-hant-cn":case"hi-in":case"kn-in":return["-"];case"de-at":case"de-ch":case"de-de":case"fi-fi":case"nb-no":case"pl-pl":case"ro-ro":case"ru-ru":return["."];default:return["/"];}}function g(i){switch(i){case"en-ae":case"en-au":case"en-ca":case"en-ie":case"en-in":case"en-my":case"en-nz":case"en-ph":case"en-sg":case"en-us":case"es-us":case"ja-jp":case"sv-se":return[h,c,a,c,e].join("");case"ro-ro":case"fi-fi":case"pl-pl":case"en-gb":case"th-th":case"en-ie":case"tr-tr":case"vi-vn":return[a,c,h,c,f].join("");case"zh-hant-cn":case"zh-hant-tw":return[e,c,h,c,a].join("");default:return[a,c,h,c,e].join("");}}window.ucs.getLocalDateFormat=function(i){i=i.toLowerCase();var k=d(i),j=g(i);return j.replace(new RegExp(c,"g"),k);};window.ucs.localeDateFormat=window.ucs.getLocalDateFormat(b);})();ucs.YObj.use("datatype-date",function(a){}),YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp"),a.ucs.Timestamp={getTimeStamp:function(b){var c,d,e,f,g,h="AM",i=a.one(window.ucs.UH_MAIN_ID),j=b.dateRef||new Date,k=b.date,l=b.locale?b.locale:i.getAttribute("data-lang"),m=k.getTime(),n=k.getDate(),o=j.getDate(),p=j.getTime(),q=p-m,r=o-n,s=!0,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return l=a.Lang.isString(l)?l:"en-us",s=/^en-us$/i.test(l),q=parseInt(q/1e3,10),d=k.getMonth(),e=k.getHours(),f=k.getMinutes(),g=p-(60*j.getHours()*60*1e3+60*j.getMinutes()*1e3+1e3*j.getSeconds()+j.getMilliseconds()),10>f&&(f="0"+f),e>=12&&(h="PM"),e>12&&(e-=12),b.type&&"short"===b.type&&a.DataType&&a.DataType.Date?c=0===r?e+":"+f+" "+h:a.DataType.Date.format(k,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,""):s?0===r?60>q?c=q>1?q+" secs ago":q+" sec ago":3600>q?(q=Math.ceil(q/60,10),c=2>q?q+" min ago":q+" mins ago"):86400>q&&(q=Math.ceil(q/3600),c=q>1?q+" hours ago":q+" hour ago"):c=864e5>g-m&&0!==r?"Yesterday "+e+":"+f+" "+h:t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h:c=t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h,c}}},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-usermenu",function(a){a.namespace("ucs");var b="#yucs-profile",c=(a.one("#yucs-meta").getAttribute("data-property"),"ucs:userMenuShow"),d="ucs:userMenuItemClick",e="click",f=ucs.DN_CLS,g={eventName:"hvr",keys:{sec:"uh-d",slk:"userhvr",_p:"0",rspns:"op",t1:"a1",t2:"uh-d",t3:"tl-lst",t5:"userhvr",elm:"tl",elmt:"usr",itc:"1"}};a.ucs.UserMenu=function(){this.showMenuYlt=a.one(b).getAttribute("data-yltmenushown")||"",a.ucs.UserMenu.superclass.constructor.call(this,a.one("#yucs-profile"),{ylt:this.showMenuYlt,panel:"#yucs-profile-panel",rapidData:g,menuGroupPlugin:{config:{addClasses:{menuClass:["Px-16","Ell"]}}}}),this._initCustomEvents()},a.extend(a.ucs.UserMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{location:"bottom",menuType:"minty-um-item"}),this.menu.delegate(e,this._handleMenuItemClick,"ul.minty-um-item li a",this),this.menu.on("ucs:show",this._showMenu,this)},_handleUserMenuItems:function(b,c){a.log("user menu items received");var d="bottom",e="minty-user-item";if(b.menuGroups&&b.menuGroups.length){c&&c.location&&(d=c.location),c&&c.menuType&&(e=c.menuType);var f=b.menuGroups,g=this.menu.panel;b.reset&&g&&g.all("."+e).each(function(a){a.remove(!0)}),f.length>0&&this.menu.menugroup._addMenuGroups(f,d,!1,e)}},_handleMenuItemClick:function(b){a.log("user menu item click");var c,e,f,g;if(c=b.target,c=c.ancestor("a",!0),e=c.getAttribute("data-mad"),f=c.getAttribute("data-customevt"),g=c.ancestor("li").hasClass("disabled")||!1)return void b.halt();if(f&&b.halt(),!g){var h={actionData:e};this.fire(d,h)}},_showMenuItems:function(){this.menu.all("ul").removeClass(f)},_showMenu:function(){this.fire(c)}})},"1.0",{requires:["node","event-custom","event-hover","ucs-menu-utils"]}),function(){window.ucs.YObj.use("node","ucs-usermenu",function(a){var b,c=a.one("#yucs-profile");c&&(b=new a.ucs.UserMenu(c))})}();!function(){window.ucs.YObj.use("node","event-custom",function(a){var b=a.one("#yucs-signout")||a.one("#yuhead-me-signout")||a.one("#yucs .yucs-signout");b&&"mail"===a.one("#yucs-meta").getAttribute("data-property")&&b.on("click",function(){a.Global.fire("ucs:signout")})})}();window.ucs||(window.ucs={}),window.ucs.api=window.ucs.api||{},YUI.add("ucs-rapid",function(a){"use strict";a.namespace("ucs");var b="ucs-rapid:",c=b+"click",d=b+"event",e=b+"destroy-instance",f=b+"addmodules",g=b+"removemodules",h=b+"refreshmodules",i=null;a.ucs.Rapid=function(a,b,c){this.container=a,b&&(this.rapidConfig=b,this.tracked_mods=c,this._init())},a.ucs.Rapid.prototype={_init:function(){var a=window;i||a.YAHOO&&a.YAHOO.i13n&&a.YAHOO.i13n.Rapid&&(i=new a.YAHOO.i13n.Rapid(this.rapidConfig)),i&&(i.addModules(this.tracked_mods),this._publish())},_publish:function(){a.Global.on(c,this._handleBeaconing,this,"click"),a.Global.on(d,this._handleBeaconing,this,"event"),a.Global.on(e,this._handleDestroyInstance,this),a.Global.on(f,this.addModules,this),a.Global.on(g,this.removeModule,this),a.Global.on(h,this.refreshModule,this)},getUHRapidInstance:function(){return i},_handleBeaconing:function(b,c){if(!b)return void a.log("data is absent.");if(!i)return void a.log("uhRapidInstance is absent.");if(b.keys||(a.log("no data keys. setting it to empty"),b.keys={}),b.outcome||a.log("no outcome. setting it to null"),"click"===c)b.sec||(a.log("SEC is absent. Using default sec."),b.sec="uh-d"),b.slk||(a.log("SLK is absent. Using default slk."),b.slk="hd"),b._pValue||(a.log("_pValue is absent. Using default _pValue."),b._pValue=0),this.beaconClick(b.sec,b.slk,b._pValue,b.keys,b.outcome);else{if(!b.eventName)return void a.log("event Name is absent.");this.beaconEvent(b.eventName,b.keys,b.outcome)}},beaconClick:function(b,c,d,e,f){i?i.beaconClick(b,c,d,e,f):a.log("no rapid instance available. cant fire beacon click.")},beaconEvent:function(b,c,d){i?i.beaconEvent(b,c,d):a.log("no rapid instance available. cant fire beacon event.")},addModules:function(b,c,d){c=!1,i?this.isModuleTracked(b)?a.log("module is already tracked"):i.addModules(b,c,d):a.log("no rapid instance available. cant add module.")},removeModule:function(b){i?i.removeModule(b):a.log("no rapid instance available. cant remove module.")},refreshModule:function(b,c,d,e){c=!1,i?this.isModuleTracked(b)?i.refreshModule(b,c,d,e):a.log("module is not tracked, we cant do a refreshModule"):a.log("no rapid instance available.")},isModuleTracked:function(b){return i?i.isModuleTracked(b):void a.log("no rapid instance available. dont know if module is present.")},_handleDestroyInstance:function(){i?(this.rapidConfig={},i.destroy(),i=null):a.log("no rapid instance available. cant destroy instance.")}}},"0.1",{requires:["array-extras","event-custom","node"]}),function(){"use strict";window.ucs.YObj.use("node","ucs-rapid",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=window,o=a.one(".yucs"),p=a.one("#yucs-meta"),q=a.all("[data-uh-test]"),r="standard",s=n.YAHOO&&n.YAHOO.i13n||null,t={},u={};return o?(b=o.getAttribute("data-spaceid"),c=o.getAttribute("data-property"),d=o.getAttribute("data-device"),k="true"===o.getAttribute("data-stencil"),d&&(i=!!d.match(/smartphone/gi),j=!!d.match(/tablet/gi)),p&&(e=p.getAttribute("data-test_id"),f=p.getAttribute("data-languagetag"),g=p.getAttribute("data-forcecobrand"),h=p.getAttribute("data-cobrand"),l=p.getAttribute("data-headercollapse")),g&&"standard"!==g?r=g:h&&"standard"!==h&&(r=h),s&&("undefined"!=typeof s.SPACEID&&(b=s.SPACEID),"undefined"!=typeof s.WEBWORKER_FILE&&(m=s.WEBWORKER_FILE)),b||(b="1197757397"),void(n.ucs.rapid||(u={spaceid:b,keys:{site:c,ver:"uh3s",psp:r,lang:f,uh_test:""},apv:!1,client_only:0,pageview_on_init:!1,rapid_noclick_resp:"uh-ignore-rapid"},s&&"undefined"!=typeof s.TEST_ID?u.test_id=s.TEST_ID:e&&(u.test_id=e),!q.isEmpty()&&u&&u.keys&&(u.keys.uh_test=a.Array.map(q.getDOMNodes(),function(a){return a.getAttribute("data-uh-test")}).join()),i?t=k?{NavMenu:"uh-m",MobileUH:"uh-m",SubMenuCountries:"uh-m","searchbox-mojit":"uh-m"}:"frontpage"===c&&"att"===g?{yucs:"uh-m","yucs-sidebar":"uh-m","yucs-search":"uh-m"}:{yucs:"uh-m","yucs-sidebar":"uh-m"}:j?t=k?{NavMenu:"uh-t",MobileUH:"uh-t",SubMenuCountries:"uh-t"}:{yucs:"uh-t","yucs-sidebar":"uh-t"}:k&&(t={masterNav:"uh-d",uhWrapper:"uh-d"}),"answers"===c&&(m||(m="/static/js/rapidworker-1.0.js"),u.webworker_file=m),l&&(u.keys.state="initial"),"groups"===c&&(m||(m="/js/rapid_worker.js"),u.webworker_file=m),("news"===c||"sports"===c||"finance"===c||"music"===c||"tv"===c||"weather"===c||"celebrity"===c||"homes"===c)&&(m||(m="/__rapid-worker-1.1.js"),u.webworker_file=m),c.match(/mag_/gi)&&(m||(m="/lib/metro/g/uicontrib/rapid_worker_1.1.1.js"),u.webworker_file=m),"frontpage"===c&&(u.ywa={project_id:0x918ba1d9327,host:"y.analytics.yahoo.com"}),n.ucs.rapid=new a.ucs.Rapid(o,u,t)))):void a.log("UH is absent")})}();window.ucs&&window.ucs.YObj&&!function(a){YUI.add("ucs-meta",function(a){"use strict";if(a.namespace("ucs"),a.ucs.Meta)return void a.log("Y.ucs.Meta is already defined.","debug","ucs-meta");var b=null,c=function(b){return a.version>="3.5.1"?b.getData():{authstate:b.getAttribute("data-authState"),cobrand:b.getAttribute("data-cobrand"),crumb:b.getAttribute("data-crumb"),mccrumb:b.getAttribute("data-mc-crumb"),gta:b.getAttribute("data-gta"),device:b.getAttribute("data-device"),experience:b.getAttribute("data-experience"),firstname:b.getAttribute("data-firstname"),flight:b.getAttribute("data-flight"),forcecobrand:b.getAttribute("data-forcecobrand"),guid:b.getAttribute("data-guid"),host:b.getAttribute("data-host"),https:b.getAttribute("data-https"),languagetag:b.getAttribute("data-languagetag"),property:b.getAttribute("data-property"),protocol:b.getAttribute("data-protocol"),shortfirstname:b.getAttribute("data-shortfirstname"),shortuserid:b.getAttribute("data-shortuserid"),status:b.getAttribute("data-status"),spaceid:b.getAttribute("data-spaceid"),test_id:b.getAttribute("data-test_id"),userid:b.getAttribute("data-userid"),style:b.getAttribute("data-style")}};a.ucs.Meta=function(a){b=this,b.components={meta:a},b.data=c(a)},a.ucs.Meta.prototype={authState:function(){return a.Object.getValue(b.data,"authstate")},cobrand:function(){return a.Object.getValue(b.data,"cobrand")},crumb:function(){return a.Object.getValue(b.data,"crumb")},mccrumb:function(){return a.Object.getValue(b.data,"mccrumb")},gta:function(){return a.Object.getValue(b.data,"gta")},device:function(){return a.Object.getValue(b.data,"device")},experience:function(){return a.Object.getValue(b.data,"experience")},find:function(b){return a.one(a.Lang.sub("#yucs-{component}",{component:b}))},firstname:function(){return a.Object.getValue(b.data,"firstname")},flight:function(){return a.Object.getValue(b.data,"flight")},forcecobrand:function(){return a.Object.getValue(b.data,"forcecobrand")},guid:function(){return a.Object.getValue(b.data,"guid")},host:function(){return a.Object.getValue(b.data,"host")},https:function(){return a.Object.getValue(b.data,"https")},languagetag:function(){return a.Object.getValue(b.data,"languagetag")},property:function(){return a.Object.getValue(b.data,"property")},protocol:function(){return a.Object.getValue(b.data,"protocol")},shortfirstname:function(){return a.Object.getValue(b.data,"shortfirstname")},shortuserid:function(){return a.Object.getValue(b.data,"shortuserid")},status:function(){return a.Object.getValue(b.data,"status")},spaceid:function(){return a.Object.getValue(b.data,"spaceid")},test_id:function(){return a.Object.getValue(b.data,"test_id")},userid:function(){return a.Object.getValue(b.data,"userid")},style:function(){return a.Object.getValue(b.data,"style")},toJSON:function(){return{authState:b.authState(),cobrand:b.cobrand(),crumb:b.crumb(),mccrumb:b.mccrumb(),gta:b.gta(),device:b.device(),experience:b.experience(),firstname:b.firstname(),flight:b.flight(),forcecobrand:b.forcecobrand(),guid:b.guid(),host:b.host(),https:b.https(),languagetag:b.languagetag(),property:b.property(),protocol:b.protocol(),shortfirstname:b.shortfirstname(),shortuserid:b.shortuserid(),status:b.status(),spaceid:b.spaceid(),test_id:b.test_id(),userid:b.userid(),style:b.style()}}}},"0.0.1",{requires:["node"]}),a.YObj.use("ucs-meta",function(b){b.Lang.isObject(a.Meta)&&a.Meta instanceof b.ucs.Meta||(a.Meta=new b.ucs.Meta(b.one("#yucs-meta")))})}(window.ucs);YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs"),a.ucs.DisclaimerSeed={init:function(){var b,c=!1,d=a.one(a.one("#yucs-disclaimer")?"#yucs-disclaimer":"#yucs-disclaimer-md"),e=d.getAttribute("data-property"),f=d.getAttribute("data-lang"),g=d.getAttribute("data-dss"),h=d.getAttribute("data-cu"),i=d.getAttribute("data-cobrand"),j=!1,k=!1,l=a.Cookie.get("DSS"),m=parseInt((new Date).getTime()/1e3),n=null,o=null,p=(a.Cookie.getSub("ucs","disclaimer",Number),"desktop"),q="false",r=navigator.userAgent.toLowerCase(),s=r.match(/firefox\/(\d+)/),t=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),u=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),v=(a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt'));this.jsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/384/js/disclaimer-min.js",this.cssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/384/css/disclaimer-min.css",this.dssStbJsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/384/js/dss-stb-min.js",this.dssStbCssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/384/css/dss-stb-min.css",a.one("#yucs-disclaimer")?p=a.one("#yucs-disclaimer").getAttribute("data-device"):a.one("#yucs-disclaimer-md")&&(p=a.one("#yucs-disclaimer-md").getAttribute("data-device")),q=p&&(p.match(/smartphone/gi)||p.match(/tablet/gi)),"frontpage"===e&&(p.match(/smartphone/gi)||p.match(/tablet/gi))&&(a.one("#OpenMenuBtn")&&a.one("#OpenMenuBtn").on("touchstart",this.setKillswitch,this),a.one("#OpenWidgetsBtn")&&a.one("#OpenWidgetsBtn").on("touchstart",this.setKillswitch,this)),"en-us"===f&&!q&&s&&s[1]&&parseInt(s[1])>33&&l&&"0"===h&&"standard"===i?(n=a.Cookie.getSub("DSS","ts"),o=a.Cookie.getSub("DSS","sdts"),o&&n&&m-o>=604800&&m-n>=604800&&this.loadCSS(this.dssStbCssPath,this.dssStbJsPath)):g&&"0"===g&&r.indexOf("version")>=0&&r.indexOf("crios")<0&&(b=r.match(/version\/(\d+)/),p.match(/desktop/gi)&&b&&b[1]&&parseInt(b[1])<8?this.loadCSS(this.cssPath,this.jsPath):q&&a.UA.ios&&a.UA.ios<8&&this.loadCSS(this.cssPath,this.jsPath)),v&&(v=v.replace('"',""),v=v.replace("'",""),v=parseInt(v)),u&&(u=u.replace('"',""),u=u.replace("'",""),u=parseInt(u)),t?(t=t.replace('"',""),t=t.replace("'",""),t=parseInt(t)):c=!0,c=!0,j=!0,v&&1===v&&j===!0&&k===!1&&(v=a.Cookie.get("AO",{raw:!0}),v=v.replace("o=1","o=0"),a.Cookie.set("AO",v,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:!0}))},setKillswitch:function(){a.one("#yucs-disclaimer").setAttribute("data-killswitch","1")},loadCSS:function(b,c){var d={onSuccess:function(){this.loadJS(c)},onFailure:function(){this.loadCSS(b)},context:this};a.Get.css(b,d)},checkTimer:function(){var b=a.Cookie.getSub("ucs","disclaimerts",Number),c=(new Date).getTime();return c>=b||null===b?!0:!1},loadJS:function(b){var c={onFailure:function(){this.loadJS(b)},context:this};a.Get.script(b,c)}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()})}}();YUI.add("ucs-more-menu",function(a){a.namespace("ucs.MoreMenu");var b=(ucs.HIDDEN_CLS,"MoreDropDown-Box"),c="Eyebrow";a.ucs.MoreMenu=function(d){d.removeClass("yucs-more-activate"),this.topBar=a.one("#"+c),a.ucs.MoreMenu.superclass.constructor.call(this,d,{panel:"."+b,event:"click",ylt:d.getAttribute("data-ylt"),align:"left"}),this._init()},a.extend(a.ucs.MoreMenu,a.ucs.MenuUtils,{_init:function(){this.menu.on("ucs:show",this._handleShowMenu,this),this.menu.on("ucs:hide",this._handleHideMenu,this)},_handleShowMenu:function(){this.menu.addClass("MoreDropDown-on")},_handleHideMenu:function(){this.menu.removeClass("MoreDropDown-on")},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?this._hideMenu():40!==a.keyCode||this.keyedup||(this.panel.one("a"),this.keyedup=!0)}})},"1.0",{requires:["node","event","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate","ucs-menu-utils"]}),function(){document.getElementById("yucs");window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-more-menu",function(a){var b=a.one("#yucs-more.yucs-more-activate");b&&(window.ucs.moreMenu=new a.ucs.MoreMenu(b))})}();YUI.add("ucs-home-menu",function(a){a.namespace("ucs.HomeMenu");var b=(ucs.HIDDEN_CLS,"HomeDropDown-Box"),c="Eyebrow";a.ucs.HomeMenu=function(d){d.removeClass("yucs-home-activate"),this.topBar=a.one("#"+c),a.ucs.HomeMenu.superclass.constructor.call(this,d,{panel:"."+b,event:"click",ylt:d.getAttribute("data-ylt"),align:"left"}),this._init()},a.extend(a.ucs.HomeMenu,a.ucs.MenuUtils,{_init:function(){this.menu.on("ucs:show",this._handleShowMenu,this),this.menu.on("ucs:hide",this._handleHideMenu,this)},_handleShowMenu:function(){this.menu.addClass("HomeDropDown-on")},_handleHideMenu:function(){this.menu.removeClass("HomeDropDown-on")},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.keyedup=!0)}})},"1.0",{requires:["node","event","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate","ucs-menu-utils"]}),function(){document.getElementById("yucs");window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-home-menu",function(a){var b=a.one("#yucs-home.yucs-home-activate");b&&(window.ucs.HomeMenu=new a.ucs.HomeMenu(b))})}();window.ucs&&(YUI.add("ucs-search",function(a){var b={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "},c="value",d="click",e="suggest",f="touchstart",g="submit",h="tabindex",i="target",j="UHSearch-Init",k="yucs-content-qry",l="#yucs-satray",m=a.one("#yucs-meta").getAttribute("data-property"),n=a.one("#yucs-meta").getAttribute("data-forcecobrand"),o=a.one("#yucs-meta").getAttribute("data-languagetag").toLowerCase(),p="282",q=("https"===window.ucs.protocol?"https://s":"http://l")+".yimg.com/",r="https://s.yimg.com/pv/search-assist/sa-min@0.0.0-65.css",s="https://s.yimg.com/kx/yucs/uh3s/search/css/78/fpassist.css",t="search-assist-form-submit",u="#hpsetLightboxContainer.Modal-on",v=q+"kx/yucs/uh3s/search/"+p+"/js/search_filter_v2-min.js";ucs.Search=function(a){this.form=a,this.buttons=this.form.all(".Btn"),this.form.set("onsubmit",null),this.loadedAssist=!1,this.keyPressEnter=!1,this.keyInputProcessing=!1,this.counter=1,this.init()},ucs.Search.prototype={isWebSearch:!1,init:function(){var b=ucs.components.search;this.form.removeClass(j),this._setTabIndex(),this.is2Button=2===this.form.all(".Btn").size(),this.input=this.form.one(b.input_selector),this.vertSearchBtn=this.form.one(b.prop_btn_selector),this.webSearchBtn=this.form.one(b.web_btn_selector),this.input_data=this.input.getData(),this.searchHint=this.input_data.sh||"",this.yltvsearch=this.input_data.yltvsearch,this.yltvsearchsugg=this.input_data.yltvsearchsugg;var d=this.form.getData("webaction");d&&(this.input.setAttribute("name","p"),this.form.setAttribute("action",d),this.vertSearchBtn&&this.vertSearchBtn.setAttribute("data-vsearch",this.yltvsearch)),this._hasPlaceholderSupport()&&!a.UA.ie&&this.input.removeAttribute("data-sh");var e=a.one(ucs.UH_MAIN_ID);"en-us"===o&&e&&"finance"===m&&!this.is2Button&&this.input.setAttribute("name","s"),(this._inputIsEmpty()||this._inputIsDefaultTerm()||this.loadedAssist)&&"zh-hant-tw"!==o&&"zh-hant-hk"!==o||(this.loadedAssist=!0,this._initAssist()),this.linkTarget=e&&e.getAttribute("data-linktarget")?e.getAttribute("data-linktarget"):this.form.getAttribute("target")||"_top",this._setFormTarget(),this._initEventListeners();var f=document.URL,g=/[?&]p=([^&]+)/i,h=g.exec(f);null==h&&"help"===m&&(g=/[?&]question_box=([^&]+)/i,h=g.exec(f)),null==h||"answers"!==m&&"help"!==m&&"shopping"!==m||this.input.setAttribute("value",decodeURIComponent(h[1].replace(/\+/g," "))),"shopping"===m&&this._loadSearchFilter(),document.activeElement!==this.input._node&&""===this.input.get(c)&&this._resetSearchInput(),this._autoFocus()},_loadSearchFilter:function(){var b={onSuccess:a.bind(function(){var a=this;ucs.YObj.use("ucs-search-filter",function(b){new b.ucs.SearchFilter({data:{input:a.input,vertSearchBtn:a.vertSearchBtn}})})},this)};a.Get.script(v,b)},html:function(a){return(a+"").replace(/[&<>"'\/`]/g,this._htmlReplacer)},_htmlReplacer:function(a){return b[a]},_langCamelCase:function(a){var b=a.split("-");switch(b.length){case 2:return b[0].toLowerCase()+"-"+b[1].toUpperCase();case 3:return b[0].toLowerCase()+"-"+b[1].charAt(0).toUpperCase()+b[1].substr(1).toLowerCase()+"-"+b[2].toUpperCase();default:return a}},_autoFocus:function(){var b=(/[?&]tab=chrome($|&)/g.test(a.config.win.location.href)===!1,a.one(u));if(!a.UA||!a.UA.ios&&!a.UA.android){var c=a.one("#yucs-meta");if("sports"!==m||!c||"fantasy"!==c.getAttribute("data-style")){var d=this.input&&this.input.get("region")||null,e=a.one(window).get("scrollY");d&&e&&d.bottom<e||"mail"!==m&&null===b&&this.input.focus()}}},_hasPlaceholderSupport:function(){var a=document.createElement("input");return"placeholder"in a},_initEventListeners:function(){var b=this.form.on(g,this._handleSubmit,this),c="fpassist"===this.input_data.satype?"li":"a";this.input.on("keydown",this._handleInputKeypress,this),this.input.on("blur",this._handleInputBlur,this),this.input.on("keyup",this._handleInputKeyup,this),this.input.on(d,this._handleInputClick,this),this.webSearchBtn.on(d,this._handleWebSearchEvent,this),("mail"===m||this.is2Button)&&(this.vertSearchBtn&&this.vertSearchBtn.on(d,this._handleVertSearch,this),a.UA.ie&&(b.detach(),this.webSearchBtn.on(d,this._handleWebSearchClick,this),this.form.on(g,this._handleVertSearch,this)),this.publish("ucs:webSearch",{broadcast:2,emitFacade:!0}),a.Global.on("ucs:webSearch",this._handleWebSearchEvent,this),a.Global.on("ucs:mailSearch",this._trackMailSearch,this),a.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this)),a.one(l).delegate(d,this._handleRapidBeacon,c)},_getInputValTrimmed:function(){var b=this.input.get(c);return b=a.Lang.trim(b)},_inputIsEmpty:function(){return""===this._getInputValTrimmed()},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint},_handleInputKeyup:function(a){13===a.keyCode,!this.keyInputProcessing&&this._inputIsEmpty()&&(this._resetSearchInput(),this._setCaretStart()),this._inputIsEmpty()||this._inputIsDefaultTerm()||this._setTabIndex(),this.loadedAssist||(this.loadedAssist=!0,this._initAssist())},_handleInputClick:function(){this._inputIsDefaultTerm()&&(this._resetSearchInput(),this._setCaretStart())},_setCaretStart:function(){var a,b,c=window.document.selection;c&&"Control"!==c.type&&(a=this.input.get("value").length,b=c.createRange(),b.move("character",-a),b.select())},_setTabIndex:function(){var b=a.UA.ie>0&&a.UA.ie<=7;this.buttons.each(function(a){var c=a.getAttribute(h);b&&0===c||b&&65535===c||c&&(!b||32768!==c)?a.setAttribute(h,0):a.setAttribute(h,-1)})},_setFormTarget:function(){"_blank"===this.linkTarget||this.form.hasClass("yucs-search-fh")?this.form.setAttribute(i,"searchWin"):this.form.setAttribute(i,this.linkTarget)},_initAssist:function(){var a=this.input_data.satype;switch(a){case"fpassist":this._initFPAssist(this.input._node);break;case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node)}},_buildAssistConfig:function(a){var b={searchbox:a,clid:"uh-yui3",shim:1,align:!0,gossip:{styleList:[{selector:"a",classes:m.match(/frontpage/gi)?"Fz-l Fw-b D-b Mx-8 C-Rgbadark":"Fw-b D-b Mx-6 C-Rgbadark"},{selector:"this",classes:"Hover"}]},nresults:a.getAttribute("data-maxresults")||5};return b.node=l,a.getAttribute("data-pubid")&&(b.pubid=a.getAttribute("data-pubid")),a.getAttribute("data-gosurl")&&(b.url=a.getAttribute("data-gosurl")),b},_initFPAssist:function(b){var c={fpassist:{fullpath:"https://s.yimg.com/pv/search-assist/sa-min@0.0.0-65.js",requires:["base"]},"fpassist-skin":{fullpath:r,type:"css"},"fpassist-skin-overide":{fullpath:s,type:"css"}},d=this._langCamelCase(o);a.one("#yucs-satray").removeClass("D-n"),a.one("#yucs-satray").removeClass("FancyBox"),ucs.YObj.applyConfig({modules:c});var e=this;ucs.YObj.use("fpassist","fpassist-skin-overide","fpassist-skin",function(a){ucs.YObj.config.fetchCSS===!1&&(a.Get.css(r),a.Get.css(s)),YUI().use("search-assist-client","search-assist-advanced-suggestions-plugin",function(a){var c,f=new a.Node(b),g={lang:d,searchBox:"#UHSearchBox",anyKeySearch:!0,enableTrending:!1,maxSuggests:10,noSpaceOnFocus:!0,https:!0,autoAlign:!1,hostNodeToAttach:"#yucs-satray",quietMode:!1,stream:!1,reverseHighlight:!0,allowCache:!0,ariaPlug:!0};f.getAttribute("data-pubid")&&(g.pubid=f.getAttribute("data-pubid")),f.getAttribute("data-appid")&&(g.appId=f.getAttribute("data-appid")),e.vertSearchBtn&&(g.preventFormSubmit=!0),c=new a.SEARCHASSIST.CLIENT(g),e.vertSearchBtn&&c.on(t,function(b){b.target=a.one(l),e._handleVertSearch(b)}),"att"!==n&&e.input.select(),e._autoFocus()})})},_initMiniAssist:function(a){var b=this,c=q,d=p;ucs.YObj.applyConfig({groups:{miniassist:{combine:!0,base:c,comboBase:c+"zz/combo?",root:"kx/yucs/uh3s/search/"+d+"/js/",maxURLLength:2e3,modules:{miniassist:{path:"mini-assist-min.js",requires:["base","get","node","event-focus","plugin","array-extras","tray-align-plugin","tray-shim-plugin","event-move"]},"tray-align-plugin":{path:"tray-align-plugin-min.js"},"tray-shim-plugin":{path:"tray-shim-plugin-min.js"}}}}}),ucs.YObj.use("miniassist","escape",function(c){var d,f,g,h=new c.Node(a),i=b._buildAssistConfig(h);if(b.sa=new c.Search.MiniAssist(i),"finance"===m&&b.sa.assist.set("minLength",1),("zh-hant-tw"===o||"zh-hant-hk"===o)&&b.sa.assist.set("minLength",1),"att"===n&&"en-us"===o&&b.sa.assist.set("minLength",1),d=b.sa.tray.get("node"),f=b.is2Button&&d.getAttribute("data-vsearch")||"",g=d.getAttribute("data-vfr"),b.sa.assist._checkValue(),b.sa.gossip.set("scrollSize",13),b.sa.gossip.set("linkStem",f),b.sa.gossip.set("linkParams",{fr:g}),b.sa.gossip.set("uhbParams",{uhb:g}),b.is2Button||(b.sa.gossip.set("hideEmptyTray",!1),b.sa.gossip.set("linkParams",{})),"finance"===m){var j=d.getAttribute("data-vstext"),l=d.getAttribute("data-vert_fin_search"),p=d.getAttribute("data-searchNews");b.sa.assist.on(e,function(a){if(a.query){var d=c.one("#"+k),e=b.sa.buildSearchUrl(h,a.query,l,{fr:p});"finance"===m&&(e=e.replace("?s=","?p=")),d?d.one("li").setContent("<a id='searchVertical' href='"+e+"' text='"+c.Escape.html(a.query)+"'>"+j+" <q>"+c.Escape.html(a.query)+"</q></a>"):(document.getElementById("hspart")&&(e+="&hspart="+document.getElementById("hspart").value),document.getElementById("hsimp")&&(e+="&hsimp="+document.getElementById("hsimp").value),document.getElementById("yucs-hstype")&&(e+="&type="+document.getElementById("yucs-hstype").value),d=c.Node.create("<ul id='"+k+"'><li><a id='searchVertical' href='"+e+"'>"+j+"<q>"+c.Escape.html(a.query)+"</q></a></li></ul>"),c.one(".sa-panel").append(d)),d.one("a").addClass("Mx-6 My-0 D-b"),d.setAttribute("style","border-top: 1px solid #e2e2e6;border-radius: 0 0 3px 3px;"),d.addClass("Bgc-x My-0 Lh-2")}})}b.form.on("submit",function(a){var c=b._getActiveAssistItem();if(c){var d=c.getAttribute("href");a.preventDefault(),"_blank"===b.linkTarget||b.form.hasClass("yucs-search-fh")?window.open(d,"searchWin"):window.location.href=d}})})},_getUHB:function(){var b=a.one("#uhb");return b&&b.get("value")||"uhb2"},_initRichAssist:function(a){var b=this,c={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:c}),ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(c){var d=new c.Node(a),e=b._buildAssistConfig(d);b.sa=new c.Search.RichAssist(e)})},_setInputBlank:function(){this.input.set(c,"")},_handleSearchToggle:function(a){a.preventDefault(),this._toggleSearch()},_getActiveAssistItem:function(){return a.one(l+" a.sa-active")},_toggleSearch:function(){var b=this,c=function(a){b._handleBodyClick(a)};a.one(ucs.UH_MAIN_ID).toggleClass("yucs-show_search"),this.bodyClick?(this.bodyClick.detach(),this.bodyScroll.detach(),this.bodyClick=this.bodyScroll=null):(a.UA.mobile&&"createTouch"in document&&"addEventListener"in document.body?(a.log("using touchstart in mobile browser","info","search"),document.body.addEventListener(f,c,!1),this.bodyClick={detach:function(){"removeEventListener"in document.body&&document.body.removeEventListener(f,c,!1)}}):this.bodyClick=a.one("body").on(d,this._handleBodyClick,this),this.bodyScroll=a.on("scroll",function(a){this._toggleSearch()},this))},_handleBodyClick:function(b){var c,d=b&&b.target||null;d&&(c="function"==typeof d.ancestor?d:a.one(d),c&&!c.ancestor(ucs.UH_MAIN_ID)&&this._toggleSearch())},_handleWebSearchClick:function(a){this.isWebSearch=!0,this.form.one("#yucs-sky-term")&&this.form.one("#yucs-sky-term").set(c,this._getInputValTrimmed()),this.sa&&this.is2Button&&this.sa.set("iswebsearch",!0)},_handleSubmit:function(b){var d=0,e=this.form.one("#fr");if(e&&"mail_bucket_02"===e.get(c)&&e.set(c,"mail_bucket_01"),e&&"mail_bucket_01"===e.get(c)&&(d=e.getAttribute("data-sa"),"1"===d&&e.set(c,"mail_bucket_02")),this.form.one("#yucs-sky-term")&&this.form.one("#yucs-sky-term").set(c,this._getInputValTrimmed()),this._inputIsDefaultTerm()&&this._setInputBlank(),b&&b.target&&(this.isWebSearch=a.one(b.target).hasClass("yucs-wsearch-button")),this.vertSearchBtn&&!this.isWebSearch&&this._handleVertSearch(b),document.getElementById("yuhead-att-cat")){"searchWin"!==this.form.getAttribute(i)&&b.preventDefault();var f=a.Node.create("<img />");f.once("load",this._handleImageLoad,this),f.once("error",this._handleImageLoad,this),this._timer=window.setTimeout(a.bind(this._handleImageLoad,this),2e3),f.set("src","http://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()))}},_handleImageLoad:function(a){null!==this._timer&&(clearTimeout(this._timer),this._timer=null),"searchWin"!==this.form.getAttribute(i)&&this.form.submit()},_handleInputKeypress:function(b){var c,d,e=this.form.getAttribute("data-webaction-tar")||"search.yahoo.com",f=this.form.getAttribute("data-verticalaction-tar"),g=f?f:e;return this.keyInputProcessing=229===b.keyCode,46!==b.keyCode&&8!==b.keyCode||!this._inputIsDefaultTerm()?void(this._inputIsEmpty()&&b.keyCode>=32&&b.keyCode<=40?this.input.blur():9!==b.keyCode&&13!==b.keyCode?(!this.keyInputProcessing&&this._inputIsDefaultTerm()&&(this._setInputBlank(),this.input.removeClass("yucs-search-hint-color")),this.loadedAssist||(this.loadedAssist=!0,this._initAssist()),d={eventName:"type",keys:{sec:"uh-d",slk:"srchtype",_p:"0",rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchtype",elmt:"srch",itc:"1"}},1===this.counter&&a.Global.fire("ucs-rapid:event",d),this.counter=this.counter+1):13!==b.keyCode||this._inputIsEmpty()||(this.keyPressEnter=!0,c={sec:"uh-d",slk:"srchwebent",_pValue:"0",keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchwebent",elm:"kb-ent",elmt:"srch",itc:"0",tar:g}},a.Global.fire("ucs-rapid:click",c))):void b.preventDefault()},_handleRapidBeacon:function(b){var d,e,f=b.currentTarget,g=a.one("#UHSearchBox"),h=g.getAttribute("data-satype"),i="fpassist"===h?f.getAttribute("pos"):f.get("parentNode").getAttribute("pos"),j=a.one("#UHSearch"),k=j.getAttribute("data-webaction-tar")||"search.yahoo.com",l=j.getAttribute("data-verticalaction-tar"),m=l?l:k,n=f.getAttribute("href"),o=j.one("#yucs-fr2"),p={sec:"uh-d",slk:"srchast",_pValue:i,keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t4:"tray",t5:"srchast",cpos:i,elm:"itm",elmt:"srchast",tar:m}};"fpassist"===h&&(j.one(ucs.components.search.prop_btn_selector)?(d=g.getAttribute("data-yltvsearch"),e=j.getAttribute("data-vfr")):(d=j.getAttribute("data-webaction"),e=j.one("#fr").get(c)),n=d+"?"+g.getAttribute("name")+"="+f.getAttribute("data")+"&fr="+e),o&&(n=n.replace("%2Cm%3Asb","%2Cm%3Asa")),b.preventDefault(),a.Global.fire("ucs-rapid:click",p),window.setTimeout(function(){window.location=n},500)},_handleInputBlur:function(a){this._inputIsEmpty()&&this._resetSearchInput()},_handleVertSearch:function(b){if(a.log("handleVertSearch"),this.is2Button===!1)return void(this.isWebSearch=!1);if(b.preventDefault(),!this._inputIsEmpty()){var d,e=b.target.getAttribute("data-vsearch"),f="1button";if(this.is2Button&&(f="2button"),e||(e=this.vertSearchBtn.getAttribute("data-vsearch")),e&&"mail"!==m){if(d=e.split("?"),1===d.length?d="":(e=d[0],d=d[1]),"finance"===m)e+="?uhb="+b.target.getAttribute("data-vfr")+"&fr="+a.one(l).getAttribute("data-searchNews")+"&type="+f+"&s="+encodeURIComponent(this.input.get(c));else if("groups"===m)e+="?query="+encodeURIComponent(this.input.get(c));else if("help"===m){this.helpForm=a.one("#landingSearch"),this.helpForm||(this.helpForm=a.one("#question_form"));var g=this;if(this.helpForm){this.vsu="";var h=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(a){g.vsu+=a.getAttribute("name")+"="+a.getAttribute("value")+"&"},g),e=this.helpForm.getAttribute("action"),e+="?"+this.vsu+h+"="+encodeURIComponent(this.input.get(c)),"question_box"!==h&&(e+="&p="+encodeURIComponent(this.input.get(c)))}else e+="?fr="+b.target.getAttribute("data-vfr")+"&type="+f+"&query="+encodeURIComponent(this.input.get(c))}else e+=b.target.getAttribute("data-vfr")?"?fr="+b.target.getAttribute("data-vfr")+"&type="+f+"&p="+encodeURIComponent(this.input.get(c)):"?type="+f+"&p="+encodeURIComponent(this.input.get(c));d&&(e+="&"+d),"_blank"===this.linkTarget||this.form.hasClass("yucs-search-fh")?window.open(e,"searchWin"):window!==window.top?window.top.location.href=e:window.location.href=e}else this._fireVertSearchEvent(b)}},_fireVertSearchEvent:function(a){var b=this.input.get(c);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:!0}),this.fire("ucs:verticalSearchAction",{query:b})},_handleWebSearchEvent:function(b){var d,e=this,f=this.form.getAttribute("data-webaction-tar")||"search.yahoo.com",g=this.form.getAttribute("data-verticalaction-tar"),h=g?g:f;if(b.query&&this.input.set("value",b.query),b.preventDefault(),this.form.one("#yucs-sky-term")&&this.form.one("#yucs-sky-term").set(c,this._getInputValTrimmed()),!this._inputIsEmpty()||this.is2Button||"zh-hant-tw"===o||"zh-hant-hk"===o){var i,j=this._getActiveAssistItem();j&&"frontpage"===m&&(i=this.form.one("input#fr"),i.set("value",i.get("value")+"-s")),"_top"!==this.linkTarget?this.form.submit():(d={sec:"uh-d",slk:"srchweb",_pValue:"0",keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchweb",elm:"btn",elmt:"srch",itc:"0",tar:h}},this.keyPressEnter||a.Global.fire("ucs-rapid:click",d),window.setTimeout(function(){e.form.submit()},500))}},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:!0}),this.fire("ucs:uhSearchInterfaceReady")},_getSearchInput:function(){return this.input},_resetSearchInput:function(){this.searchHint&&this.input.addClass("yucs-search-hint-color"),this.input.set(c,this.searchHint)},_setSearchInput:function(a){this.input.set(c,a)},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(c)},_setVertSearchBtnContent:function(a){this.vertSearchBtn.set(c,a.text?a.text:a)},_trackMailSearch:function(){a.log("Mail search"),this._sendBeacon(this.yltvsearch)},_trackMailSearchSugg:function(){a.log("Mail search sugg"),this._sendBeacon(this.yltvsearchsugg)},_trackPropSearch:function(){a.log("Prop Search"),this._sendBeacon(this.yltvsearch)},_sendBeacon:window.ucs._sendBeacon},a.augment(ucs.Search,a.EventTarget)},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]}),ucs.YObj.use("node","ucs-search",function(a){var b=ucs.components.search,c=a.all(b.selector+"."+b.init_cls);c.each(function(b,c,d){if(b.ancestor(ucs.UH_MAIN_ID)){a.log("instantiating uh search component");var e=ucs.UhSearchInterface=new ucs.Search(b);e.getInput=function(){return ucs.UhSearchInterface._getSearchInput()},e.setInput=function(a){ucs.UhSearchInterface._setSearchInput(a)},e.resetInput=function(){ucs.UhSearchInterface._resetSearchInput()},e.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent()},e.setVertSearchBtnText=function(a){ucs.UhSearchInterface._setVertSearchBtnContent(a)},e._fireInterfaceReady()}else{a.log("instantiating search components");{new ucs.Search(b)}}})}));YUI.add("jsonp-super-cached",function(a){a.namespace("jsonpsupercached"),YUI.Env.JsonpSuperCached||(YUI.Env.JsonpSuperCached={}),YUI.Env.JsonpSuperCached.services||(YUI.Env.JsonpSuperCached.services={});var b=YUI.Env.JsonpSuperCached.services;a.jsonpsupercached.getData=function(c){var d={},e=c.url||"",f=c.serviceName||"service",g=c.callbackName||"callback",h=(c.broadcast||!1,c.onSuccess||function(){});f="_"+f+"_"+g,d.timeout=c.timeout,d.onTimeout=c.onTimeout||null,d.onFailure=c.onFailure||null,d.async=!0;var i=-1===e.indexOf("?")?"?":"&",j=e+i+g+"=YUI.Env.JsonpSuperCached."+f,k=c.args||[],l=c.context||null;a.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||a.Get,b[j]||(b[j]={dataAvailable:!1,requestInProgress:!1,callbacksQueue:[]});var m=b[j];m.dataAvailable?h(m.data):(m.callbacksQueue.push(h),m.requestInProgress||(YUI.Env.JsonpSuperCached[f]=function(a){m.data=a,m.dataAvailable=!0;for(var b=m.callbacksQueue,c=0,d=b.length;d>c;c++){var e=b.pop();e.apply(l,[a].concat(k))}},m.requestInProgress=!0,a.jsonpsupercached.get.script(j,d)))}},"0.0.1");YUI.add("ucs-avatar",function(a){var b={size:"32x32",style:{width:32,height:32},loadOnResponse:!0,bucket:null},c=a.one("#yucs-meta"),d=function(b,c,d,e){var f=null,g=function(b){return function(e){var f=a.Object.getValue(e,c),g=null;return f&&b(f)&&(g="value"===d?f:e),g}};if(e="function"==typeof e?e:function(){return!0},g=g(e),!a.Lang.isArray(b))return g(b);for(var h=0,i=b.length;i>h&&!(f=g(b[h]));h++);return f},e=function(b){var c=[];return a.Array.each(b,function(a){c.push('"'+a.size+'"')}),a.Array.dedupe(c)},f=function(b){var c=a.Node.create("<img>");return c.setAttribute("alt",b.alt),c.addClass(ucs.DN_CLS),c.setStyles(b.style),c.on("load",function(){var a=b.target;a.setContent(this),h(a),this.removeClass(ucs.DN_CLS)}),c},g=function(a){a.avatarMarkup.setAttribute("src",a.imgUrl)},h=function(a){a.removeClass("Invisible")},i=function(a){var b=d(a,["byImageUrl"],"item");return b&&(b.imageUrl=b.byImageUrl),b},j=function(b){var c,d,e=(new Date).getTime();return d=a.Cookie.getSub("ucs","tr",Number),(null===d||e>=d)&&(c=new Image,c.src=b,a.Cookie.setSub("ucs","tr",e+864e5,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com"})),null};a.namespace("ucs"),a.ucs.Avatar=function(){var b=a.all(ucs.UH_MAIN_ID+" i[data-avatar]");b.size()&&(this.initEvents(),this.init(b))},a.ucs.Avatar.prototype={initEvents:function(){a.Global.on("ucs:loadAvatar",function(a,b){var c,d=this.avatarOptions,e=!1;if(b="function"==typeof b&&b||function(){},d&&!this.isDefaultProfileImage&&a)for(var f=0,h=d.length;h>f;f++)if(c=d[f],c.target.generateID()===a.generateID()){g(c),e=!0;break}return b(e)},this),a.publish("ucs:avatarReady",{fireOnce:!0,async:!0,broadcast:2})},init:function(c){this.avatarOptions=[],c.each(function(c){var d=c.getAttribute("data-avatar");d=d?a.JSON.parse(d):null,d&&(d=a.mix(d,b),c.generateID(),d.target=c,this.avatarOptions.push(d))},this),this._fetchData()},_fetchData:function(){var b=c.getAttribute("data-guid"),d=c.getAttribute("data-crumb"),f=e(this.avatarOptions).join(","),g='select * from social.profile.image where guid = "'+b+'" and size in ('+f+") and imgssl=1",h={q:g,format:"json",crumb:d,_maxage:900},i="https://ucs.query.yahoo.com/v1/console/yql?"+a.QueryString.stringify(h);a.jsonpsupercached.getData({url:i,serviceName:"avatar",onSuccess:a.bind(this._fetchSuccess,this)})},_fetchSuccess:function(b){this.initImageList(b);var c=this.imgList&&!!this.imgList[0].imageUrl.match(/profile_/);this.isDefaultProfileImage=!this.imgList||c,this.isDefaultProfileImage?a.Array.each(this.avatarOptions,function(a){h(a.target)}):(this.injectMarkup(),a.fire("ucs:avatarReady")),this.checkBeacon()},initImageList:function(b){var c,d=a.Object.getValue(b,["query","results","image"]);d&&(c=i(d),this.imgList=c?[c]:a.Lang.isArray(d)?d:[d])},injectMarkup:function(){a.Array.each(this.avatarOptions,function(a){var b=this._getAvatarUrl(a.size);a.avatarMarkup=f(a),a.imgUrl=b,a.loadOnResponse&&g(a)},this)},_getAvatarUrl:function(a){var b,c=this.imgList,e=function(){return function(b){return b===a}}();return c&&(b=c.length>1&&d(c,["size"],"item",e)||c[0],b=b.imageUrl.replace(/^http:\/\/l\.yimg/,"https://s.yimg").replace(/^http:\/\/socialprofiles\.zenfs/,"https://socialprofiles.zenfs")),b},checkBeacon:function(){var b=d(this.avatarOptions,["bucket"],"value"),e=d(this.avatarOptions,["beaconUrl"],"value");e&&("mail"===c.getAttribute("data-property")||a.Array.indexOf(["1","3"],b)>=0?("3"===b&&(e=e.replace("https://login.yahoo.com/config/login?noPrompt=1&.done=",""),e=decodeURIComponent(e)),j(e)):a.on("unload",function(){return function(){j(e)}}()))}}},"1.0",{requires:["node","cookie","event","jsonp-super-cached","querystring-stringify","json"]}),function(){window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-avatar",function(a){window.ucs.Avatar=new a.ucs.Avatar})}();YUI.add("ucs-helpmenu",function(a){"use strict";a.namespace("ucs.HelpMenu");var b="ucs:helpMenuShow",c="ucs:helpDebugMenuShow",d="ucs:helpMenuItemClick",e="ucs:helpDebugMenuItemClick",f="ucs:utilityMenuShow",g="ucs:utilityMenuItemClick",h="click",i="a",j="D-n",k="ul",l=".FancyBox",m="yucs-hm-activate",n={eventName:"hvr",keys:{sec:"uh-d",slk:"cogop",_p:"0",rspns:"op",t1:"a1",t2:"uh-d",t3:"tl-lst",t4:"cog-mu",t5:"cogop",elm:"tl",elmt:"cog",itc:"1"}},o=a.one("#yucs-meta").getAttribute("data-property"),p=YUI.namespace("YHELP.config"),q=a.one("#yucs-meta");q&&(p.locale=q.getData("languagetag"),p.product=q.getData("property"),q.getData("firstname")&&(p.user=q.getData("firstname"))),p.alignNode=a.one("#UH"),a.ucs.HelpMenu=function(b){this.shown=!1;var c=b.all(l).item(0);c.hasClass(m)&&(this.ylt=c.getAttribute("data-yltmenushown"),a.ucs.HelpMenu.superclass.constructor.call(this,b,{panel:"#yucs-help_inner",rapidData:n,menuGroupPlugin:!0}),this.initialList=this.menu.panel.one(k),b.trigger.setAttribute("data-mad","true"),"mail"===o&&(this.loading=a.Node.create('<div class="yucs-mail-loading Py-20 Mt-8" style="width:50px"></div>'),this.menu.panel.appendChild(this.loading),this.initialList.addClass(j)),this.menuItemsInitialized=!1,this.debugItemsInitialized=!1,this._initCustomEvents(),c.removeClass(m))},a.extend(a.ucs.HelpMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(b,{broadcast:2,emitFacade:!0}),this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),this.publish(e,{broadcast:2,emitFacade:!0}),this.publish(f,{broadcast:2,emitFacade:!0}),this.publish(g,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{location:"top",menuType:"minty-utility-item"}),a.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{location:"bottom",menuType:"minty-help-item"}),a.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{location:"bottom",menuType:"minty-debug-item"}),a.one("#yucs-help").delegate("click",function(a){a.target.getAttribute("data-inproducthelp")&&(YUI.YHELP.config.product=a.target.getAttribute("data-inproducthelp"),q&&(YUI.YHELP.config.partnerCobrand=q.getAttribute("data-cobrand"),YUI.YHELP.config.partnerForceCobrand=q.getAttribute("data-forcecobrand")),YUI.YHELP.config.uhClickEvent=a,"function"==typeof YUI.YHELP.initiate&&YUI.YHELP.initiate())},"a[data-inproducthelp]"),this.menu.on("ucs:showMenu",this._showMenu,this),this.menu.panel.delegate(h,this._handleMenuItemClick,"li a",this)},_showMenu:function(d){d&&(d.ctrlKey||d.metaKey)&&d.shiftKey?(this.fire(c),this.debugItemsInitialized===!1?a.later(4e3,this,function(){this.fire(c)}):this._showDebugMenuItems()):(this.fire(b),this.fire(f),this.menuItemsInitialized===!1?a.later(4e3,this,function(){this.fire(b),this.fire(f)}):this._showMenuItems())},_hideLoading:function(){this.loading&&this.loading.addClass(j)},_showDebugMenuItems:function(){var a=this.menu.panel;this._hideLoading(),a.all("ul").addClass(j),a.all("ul.debug-item").removeClass(j)},_showMenuItems:function(){var a=this.menu.panel;this._hideLoading(),a.all("ul").removeClass(j),a.all("ul.debug-item").addClass(j)},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one(i).focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one(i)&&this.panel.one(i).focus(),this.keyedup=!0)},_handleHelpMenuItems:function(b,c){a.log("help menu items received");var d,e,f=c&&c.location||"top",g=c&&c.menuType||"minty-help-item";if(b.menuGroups&&b.menuGroups.length){if(d=b.menuGroups,e=this.menu.panel,b.reset&&e&&e.all("."+g).remove(!0),this.menu.menugroup._addMenuGroups(d,f,!1,g),"sports"===o){var h,i=a.one("#yuhead-help-panel");i&&(h=i.one(".yucs-acct-link"),h=h&&h.get("parentNode").remove()||null,i.get("children").remove(!0),h&&(h.replaceClass("Py-8","Pt-8"),i.prepend(h)),i.replaceClass("Bd-b",""))}this._showMenuItems(),this.menu.fire("ucs:resetPosition"),this.menuItemsInitialized=!0,a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0")}},_handleHelpDebugMenuItems:function(b){a.log("help menu items received");var c,d;b.menuGroups&&b.menuGroups.length&&(c=b.menuGroups,d=this.menu.panel,b.reset&&d&&d.all(".minty-debug-item").remove(!0),this.menu.menugroup._addMenuGroups(c,"top",!0,"minty-debug-item"),this._showDebugMenuItems(),this.menu.fire("ucs:resetPosition"),this.debugItemsInitialized=!0,a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0"))},_handleMenuItemClick:function(b){a.log("help menu item click");var c,f,h,i;if(c=b.target,c=c.ancestor("a",!0),f=c.getAttribute("data-mad"),h=c.getAttribute("data-customevt"),i=c.ancestor("li").hasClass("disabled"))return void b.halt();if(h&&b.preventDefault(),!i){var j={actionData:f},k=c.ancestor("ul");k.hasClass("debug-item")?this.fire(e,j):k.hasClass("minty-utility-item")?this.fire(g,j):this.fire(d,j)}}}),a.augment(a.ucs.HelpMenu,a.EventTarget)},"1.0",{requires:["oop","node","node-event-delegate","event-custom","substitute","ucs-menu-utils"]}),function(){window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-helpmenu",function(a){var b,c=a.one("#yucs-help");c&&(b=new a.ucs.HelpMenu(c))})}();/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-base",function(e,t){var n=e.Lang,r=e.Lang.isDate,i=function(){i.superclass.constructor.apply(this,arguments)};e.mix(i,{NAME:"cache",ATTRS:{max:{value:0,setter:"_setMax"},size:{readOnly:!0,getter:"_getSize"},uniqueKeys:{value:!1},expires:{value:0,validator:function(t){return e.Lang.isDate(t)||e.Lang.isNumber(t)&&t>=0}},entries:{readOnly:!0,getter:"_getEntries"}}}),e.extend(i,e.Base,{_entries:null,initializer:function(e){this.publish("add",{defaultFn:this._defAddFn}),this.publish("flush",{defaultFn:this._defFlushFn}),this._entries=[]},destructor:function(){this._entries=[]},_setMax:function(e){var t=this._entries;if(e>0){if(t)while(t.length>e)t.shift()}else e=0,this._entries=[];return e},_getSize:function(){return this._entries.length},_getEntries:function(){return this._entries},_defAddFn:function(e){var t=this._entries,r=e.entry,i=this.get("max"),s;this.get("uniqueKeys")&&(s=this._position(e.entry.request),n.isValue(s)&&t.splice(s,1));while(i&&t.length>=i)t.shift();t[t.length]=r},_defFlushFn:function(e){var t=this._entries,r=e.details[0],i;r&&n.isValue(r.request)?(i=this._position(r.request),n.isValue(i)&&t.splice(i,1)):this._entries=[]},_isMatch:function(e,t){return!t.expires||new Date<t.expires?e===t.request:!1},_position:function(e){var t=this._entries,n=t.length,r=n-1;if(this.get("max")===null||this.get("max")>0)for(;r>=0;r--)if(this._isMatch(e,t[r]))return r;return null},add:function(e,t){var i=this.get("expires");this.get("initialized")&&(this.get("max")===null||this.get("max")>0)&&(n.isValue(e)||n.isNull(e)||n.isUndefined(e))&&this.fire("add",{entry:{request:e,response:t,cached:new Date,expires:r(i)?i:i?new Date((new Date).getTime()+this.get("expires")):null}})},flush:function(e){this.fire("flush",{request:n.isValue(e)?e:null})},retrieve:function(e){var t=this._entries,r=t.length,i=null,s;if(r>0&&(this.get("max")===null||this.get("max")>0)){this.fire("request",{request:e}),s=this._position(e);if(n.isValue(s))return i=t[s],this.fire("retrieve",{entry:i}),s<r-1&&(t.splice(s,1),t[t.length]=i),i}return null}}),e.Cache=i},"3.16.0",{requires:["base"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-offline",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r=null,i=e.JSON;try{r=e.config.win.localStorage}catch(s){}e.mix(n,{NAME:"cacheOffline",ATTRS:{sandbox:{value:"default",writeOnce:"initOnly"},expires:{value:864e5},max:{value:null,readOnly:!0},uniqueKeys:{value:!0,readOnly:!0,setter:function(){return!0}}},flushAll:function(){var e=r,t;if(e)if(e.clear)e.clear();else for(t in e)e.hasOwnProperty(t)&&(e.removeItem(t),delete e[t])}}),e.extend(n,e.Cache,r?{_setMax:function(e){return null},_getSize:function(){var e=0,t=0,n=r.length;for(;t<n;++t)r.key(t).indexOf(this.get("sandbox"))===0&&e++;return e},_getEntries:function(){var e=[],t=0,n=r.length,s=this.get("sandbox");for(;t<n;++t)r.key(t).indexOf(s)===0&&(e[t]=i.parse(r.key(t).substring(s.length)));return e},_defAddFn:function(e){var t=e.entry,n=t.request,s=t.cached,o=t.expires;t.cached=s.getTime(),t.expires=o?o.getTime():o;try{r.setItem(this.get("sandbox")+i.stringify({request:n}),i.stringify(t))}catch(u){this.fire("error",{error:u})}},_defFlushFn:function(e){var t,n=r.length-1;for(;n>-1;--n)t=r.key(n),t.indexOf(this.get("sandbox"))===0&&r.removeItem(t)},retrieve:function(e){this.fire("request",{request:e});var t,n,s;try{s=this.get("sandbox")+i.stringify({request:e});try{t=i.parse(r.getItem(s))}catch(o){}}catch(u){}if(t){t.cached=new Date(t.cached),n=t.expires,n=n?new Date(n):null,t.expires=n;if(this._isMatch(e,t))return this.fire("retrieve",{entry:t}),t}return null}}:{_setMax:function(e){return null}}),e.CacheOffline=n},"3.16.0",{requires:["cache-base","json"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-plugin",function(e,t){function n(t){var n=t&&t.cache?t.cache:e.Cache,r=e.Base.create("dataSourceCache",n,[e.Plugin.Base]),i=new r(t);return r.NS="tmpClass",i}e.mix(n,{NS:"cache",NAME:"cachePlugin"}),e.namespace("Plugin").Cache=n},"3.16.0",{requires:["plugin","cache-base"]});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-menunav",function(e,t){var n=e.UA,r=e.later,i=e.ClassNameManager.getClassName,s="menu",o="menuitem",u="hidden",a="parentNode",f="children",l="offsetHeight",c="offsetWidth",h="px",p="id",d=".",v="handledMouseOut",m="handledMouseOver",g="active",y="label",b="a",w="mousedown",E="keydown",S="click",x="",T="first-of-type",N="role",C="presentation",k="descendants",L="UI",A="activeDescendant",O="useARIA",M="aria-hidden",_="content",D="host",P=A+"Change",H="autoSubmenuDisplay",B="mouseOutHideDelay",j=i(s),F=i(s,u),I=i(s,"horizontal"),q=i(s,y),R=i(s,y,g),U=i(s,y,s+"visible"),z=i(o),W=i(o,g),X=d+j,V=d+i(s,"toggle"),$=d+i(s,_),J=d+q,K=">"+$+">ul>li>a",Q=">"+$+">ul>li>"+J+">a:first-child",G=function(e){var t=e.previous(),n;return t||(n=e.get(a).get(f),t=n.item(n.size()-1)),t},Y=function(e){var t=e.next();return t||(t=e.get(a).get(f).item(0)),t},Z=function(e){var t=!1;return e&&(t=e.get("nodeName").toLowerCase()===b),t},et=function(e){return e.hasClass(z)},tt=function(e){return e.hasClass(q)},nt=function(e){return e.hasClass(I)},rt=function(e){return e.hasClass(U)},it=function(e){return Z(e)?e:e.one(b)},st=function(e,t,n){var r;return e&&(e.hasClass(t)&&(r=e),!r&&n&&(r=e.ancestor(d+t))),r},ot=function(e){return e.ancestor(X)},ut=function(e,t){return st(e,j,t)},at=function(e,t){var n;return e&&(n=st(e,z,t)),n},ft=function(e,t){var n;return e&&(t?n=st(e,q,t):n=st(e,q)||e.one(d+q)),n},lt=function(e,t){var n;return e&&(n=at(e,t)||ft(e,t)),n},ct=function(e){return lt(e.one("li"))},ht=function(e){return et(e)?W:R},pt=function(e,t){return e&&!e[m]&&(e.compareTo(t)||e.contains(t))},dt=function(e,t){return e&&!e[v]&&!e.compareTo(t)&&!e.contains(t)},vt=function(){vt.superclass.constructor.apply(this,arguments)};vt.NAME="nodeMenuNav",vt.NS="menuNav",vt.SHIM_TEMPLATE_TITLE="Menu Stacking Shim",vt.SHIM_TEMPLATE='<iframe frameborder="0" tabindex="-1" class="'+i("shim")+'" title="'+vt.SHIM_TEMPLATE_TITLE+'" src="javascript:false;"></iframe>',vt.ATTRS={useARIA:{value:!0,writeOnce:!0,lazyAdd:!1,setter:function(t){var n=this.get(D),r,u,a,f;t&&(n.set(N,s),n.all("ul,li,"+$).set(N,C),n.all(d+i(o,_)).set(N,o),n.all(d+q).each(function(t){r=t,u=t.one(V),u&&(u.set(N,C),r=u.previous()),r.set(N,o),r.set("aria-haspopup",!0),a=t.next(),a&&(a.set(N,s),r=a.previous(),u=r.one(V),u&&(r=u),f=e.stamp(r),r.get(p)||r.set(p,f),a.set("aria-labelledby",f),a.set(M,!0))}))}},autoSubmenuDisplay:{value:!0,writeOnce:!0},submenuShowDelay:{value:250,writeOnce:!0},submenuHideDelay:{value:250,writeOnce:!0},mouseOutHideDelay:{value:750,writeOnce:!0}},e.extend(vt,e.Plugin.Base,{_rootMenu:null,_activeItem:null,_activeMenu:null,_hasFocus:!1,_blockMouseEvent:!1,_currentMouseX:0,_movingToSubmenu:!1,_showSubmenuTimer:null,_hideSubmenuTimer:null,_hideAllSubmenusTimer:null,_firstItem:null,initializer:function(t){var n=this,r=this.get(D),i=[],s;r&&(n._rootMenu=r,r.all("ul:first-child").addClass(T),r.all(X).addClass(F),i.push(r.on("mouseover",n._onMouseOver,n)),i.push(r.on("mouseout",n._onMouseOut,n)),i.push(r.on("mousemove",n._onMouseMove,n)),i.push(r.on(w,n._toggleSubmenuDisplay,n)),i.push(e.on("key",n._toggleSubmenuDisplay,r,"down:13",n)),i.push(r.on(S,n._toggleSubmenuDisplay,n)),i.push(r.on("keypress",n._onKeyPress,n)),i.push(r.on(E,n._onKeyDown,n)),s=r.get("ownerDocument"),i.push(s.on(w,n._onDocMouseDown,n)),i.push(s.on("focus",n._onDocFocus,n)),this._eventHandlers=i,n._initFocusManager())},destructor:function(){var t=this._eventHandlers;t&&(e.Array.each(t,function(e){e.detach()}),this._eventHandlers=null),this.get(D).unplug("focusManager")},_isRoot:function(e){return this._rootMenu.compareTo(e)},_getTopmostSubmenu:function(e){var t=this,n=ot(e),r;return n?t._isRoot(n)?r=e:r=t._getTopmostSubmenu(n):r=e,r},_clearActiveItem:function(){var e=this,t=e._activeItem;t&&t.removeClass(ht(t)),e._activeItem=null},_setActiveItem:function(e){var t=this;e&&(t._clearActiveItem(),e.addClass(ht(e)),t._activeItem=e)},_focusItem:function(e){var t=this,n,r;e&&t._hasFocus&&(n=ot(e),r=it(e),n&&!n.compareTo(t._activeMenu)&&(t._activeMenu=n,t._initFocusManager()),t._focusManager.focus(r))},_showMenu:function(t){var r=ot(t),i=t.get(a),s=i.getXY();this.get(O)&&t.set(M,!1),nt(r)?s[1]=s[1]+i.get(l):s[0]=s[0]+i.get(c),t.setXY(s),n.ie<8&&(n.ie===6&&!t.hasIFrameShim&&(t.appendChild(e.Node.create(vt.SHIM_TEMPLATE)),t.hasIFrameShim=!0),t.setStyles({height:x,width:x}),t.setStyles({height:t.get(l)+h,width:t.get(c)+h})),t.previous().addClass(U),t.removeClass(F)},_hideMenu:function(e,t){var n=this,r=e.previous(),i;r.removeClass(U),t&&(n._focusItem(r),n._setActiveItem(r)),i=e.one(d+W),i&&i.removeClass(W),e.setStyles({left:x,top:x}),e.addClass(F),n.get(O)&&e.set(M,!0)},_hideAllSubmenus:function(t){var n=this;t.all(X).each(e.bind(function(e){n._hideMenu(e)},n))},_cancelShowSubmenuTimer:function(){var e=this,t=e._showSubmenuTimer;t&&(t.cancel(),e._showSubmenuTimer=null)},_cancelHideSubmenuTimer:function(){var e=this,t=e._hideSubmenuTimer;t&&(t.cancel(),e._hideSubmenuTimer=null)},_initFocusManager:function(){var t=this,n=t._rootMenu,r=t._activeMenu||n,i=t._isRoot(r)?x:"#"+r.get("id"),s=t._focusManager,o,u,a;nt(r)?(u=i+K+","+i+Q,o={next:"down:39",previous:"down:37"}):(u=i+K,o={next:"down:40",previous:"down:38"}),s?(s.set(A,-1),s.set(k,u),s.set("keys",o)):(n.plug(e.Plugin.NodeFocusManager,{descendants:u,keys:o,circular:!0}),s=n.focusManager,a="#"+n.get("id")+X+" a,"+V,n.all(a).set("tabIndex",-1),s.on(P,this._onActiveDescendantChange,s,this),s.after(P,this._afterActiveDescendantChange,s,this),t._focusManager=s)},_onActiveDescendantChange:function(e,t){e.src===L&&t._activeMenu&&!t._movingToSubmenu&&t._hideAllSubmenus(t._activeMenu)},_afterActiveDescendantChange:function(e,t){var n;e.src===L&&(n=lt(this.get(k).item(e.newVal),!0),t._setActiveItem(n))},_onDocFocus:function(e){var t=this,n=t._activeItem,r=e.target,i;t._rootMenu.contains(r)?t._hasFocus?(i=ot(r),t._activeMenu.compareTo(i)||(t._activeMenu=i,t._initFocusManager(),t._focusManager.set(A,r),t._setActiveItem(lt(r,!0)))):(t._hasFocus=!0
,n=lt(r,!0),n&&t._setActiveItem(n)):(t._clearActiveItem(),t._cancelShowSubmenuTimer(),t._hideAllSubmenus(t._rootMenu),t._activeMenu=t._rootMenu,t._initFocusManager(),t._focusManager.set(A,0),t._hasFocus=!1)},_onMenuMouseOver:function(e,t){var n=this,r=n._hideAllSubmenusTimer;r&&(r.cancel(),n._hideAllSubmenusTimer=null),n._cancelHideSubmenuTimer(),e&&!e.compareTo(n._activeMenu)&&(n._activeMenu=e,n._hasFocus&&n._initFocusManager()),n._movingToSubmenu&&nt(e)&&(n._movingToSubmenu=!1)},_hideAndFocusLabel:function(){var e=this,t=e._activeMenu,n;e._hideAllSubmenus(e._rootMenu),t&&(n=e._getTopmostSubmenu(t),e._focusItem(n.previous()))},_onMenuMouseOut:function(e,t){var n=this,i=n._activeMenu,s=t.relatedTarget,o=n._activeItem,u,a;i&&!i.contains(s)&&(u=ot(i),u&&!u.contains(s)?n.get(B)>0&&(n._cancelShowSubmenuTimer(),n._hideAllSubmenusTimer=r(n.get(B),n,n._hideAndFocusLabel)):o&&(a=ot(o),n._isRoot(a)||n._focusItem(a.previous())))},_onMenuLabelMouseOver:function(e,t){var n=this,i=n._activeMenu,s=n._isRoot(i),o=n.get(H)&&s||!s,u=n.get("submenuShowDelay"),a,f=function(t){n._cancelHideSubmenuTimer(),n._cancelShowSubmenuTimer(),rt(e)||(a=e.next(),a&&(n._hideAllSubmenus(i),n._showSubmenuTimer=r(t,n,n._showMenu,a)))};n._focusItem(e),n._setActiveItem(e),o&&(n._movingToSubmenu?n._hoverTimer=r(u,n,function(){f(0)}):f(u))},_onMenuLabelMouseOut:function(e,t){var n=this,i=n._isRoot(n._activeMenu),s=n.get(H)&&i||!i,o=t.relatedTarget,u=e.next(),a=n._hoverTimer;a&&a.cancel(),n._clearActiveItem(),s&&(n._movingToSubmenu&&!n._showSubmenuTimer&&u?n._hideSubmenuTimer=r(n.get("submenuHideDelay"),n,n._hideMenu,u):!n._movingToSubmenu&&u&&(!o||o&&!u.contains(o)&&!o.compareTo(u))&&(n._cancelShowSubmenuTimer(),n._hideMenu(u)))},_onMenuItemMouseOver:function(e,t){var n=this,r=n._activeMenu,i=n._isRoot(r),s=n.get(H)&&i||!i;n._focusItem(e),n._setActiveItem(e),s&&!n._movingToSubmenu&&n._hideAllSubmenus(r)},_onMenuItemMouseOut:function(e,t){this._clearActiveItem()},_onVerticalMenuKeyDown:function(e){var t=this,n=t._activeMenu,r=t._rootMenu,i=e.target,s=!1,o=e.keyCode,u,f,l,c;switch(o){case 37:f=ot(n),f&&nt(f)?(t._hideMenu(n),l=G(n.get(a)),c=lt(l),c&&(tt(c)?(u=c.next(),u?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):(t._focusItem(c),t._setActiveItem(c))):(t._focusItem(c),t._setActiveItem(c)))):t._isRoot(n)||t._hideMenu(n,!0),s=!0;break;case 39:tt(i)?(u=i.next(),u&&(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u)))):nt(r)&&(u=t._getTopmostSubmenu(n),l=Y(u.get(a)),c=lt(l),t._hideAllSubmenus(r),c&&(tt(c)?(u=c.next(),u?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):(t._focusItem(c),t._setActiveItem(c))):(t._focusItem(c),t._setActiveItem(c)))),s=!0}s&&e.preventDefault()},_onHorizontalMenuKeyDown:function(e){var t=this,n=t._activeMenu,r=e.target,i=lt(r,!0),s=!1,o=e.keyCode,u;o===40&&(t._hideAllSubmenus(n),tt(i)&&(u=i.next(),u&&(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))),s=!0)),s&&e.preventDefault()},_onMouseMove:function(e){var t=this;r(10,t,function(){t._currentMouseX=e.pageX})},_onMouseOver:function(e){var t=this,n,r,i,s,o;t._blockMouseEvent?t._blockMouseEvent=!1:(n=e.target,r=ut(n,!0),i=ft(n,!0),o=at(n,!0),pt(r,n)&&(t._onMenuMouseOver(r,e),r[m]=!0,r[v]=!1,s=ot(r),s&&(s[v]=!0,s[m]=!1)),pt(i,n)&&(t._onMenuLabelMouseOver(i,e),i[m]=!0,i[v]=!1),pt(o,n)&&(t._onMenuItemMouseOver(o,e),o[m]=!0,o[v]=!1))},_onMouseOut:function(e){var t=this,n=t._activeMenu,r=!1,i,s,o,u,a,f;t._movingToSubmenu=n&&!nt(n)&&e.pageX-5>t._currentMouseX,i=e.target,s=e.relatedTarget,o=ut(i,!0),u=ft(i,!0),f=at(i,!0),dt(u,s)&&(t._onMenuLabelMouseOut(u,e),u[v]=!0,u[m]=!1),dt(f,s)&&(t._onMenuItemMouseOut(f,e),f[v]=!0,f[m]=!1),u&&(a=u.next(),a&&s&&(s.compareTo(a)||a.contains(s))&&(r=!0));if(dt(o,s)||r)t._onMenuMouseOut(o,e),o[v]=!0,o[m]=!1},_toggleSubmenuDisplay:function(e){var t=this,r=e.target,i=ft(r,!0),s=e.type,o,u,a,f,l,c;if(i){o=Z(r)?r:r.ancestor(Z);if(o){a=o.getAttribute("href",2),f=a.indexOf("#"),l=a.length;if(f===0&&l>1){c=a.substr(1,l),u=i.next();if(u&&u.get(p)===c){if(s===w||s===E)(n.opera||n.gecko||n.ie)&&s===E&&!t._preventClickHandle&&(t._preventClickHandle=t._rootMenu.on("click",function(e){e.preventDefault(),t._preventClickHandle.detach(),t._preventClickHandle=null})),s==w&&(e.preventDefault(),e.stopImmediatePropagation(),t._hasFocus=!0),t._isRoot(ot(r))?rt(i)?(t._hideMenu(u),t._focusItem(i),t._setActiveItem(i)):(t._hideAllSubmenus(t._rootMenu),t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):t._activeItem==i?(t._showMenu(u),t._focusItem(ct(u)),t._setActiveItem(ct(u))):i._clickHandle||(i._clickHandle=i.on("click",function(){t._hideAllSubmenus(t._rootMenu),t._hasFocus=!1,t._clearActiveItem(),i._clickHandle.detach(),i._clickHandle=null}));s===S&&e.preventDefault()}}}}},_onKeyPress:function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:e.preventDefault()}},_onKeyDown:function(e){var t=this,i=t._activeItem,s=e.target,o=ot(s),u;o&&(t._activeMenu=o,nt(o)?t._onHorizontalMenuKeyDown(e):t._onVerticalMenuKeyDown(e),e.keyCode===27&&(t._isRoot(o)?i&&(tt(i)&&rt(i)?(u=i.next(),u&&t._hideMenu(u)):(t._focusManager.blur(),t._clearActiveItem(),t._hasFocus=!1)):(n.opera?r(0,t,function(){t._hideMenu(o,!0)}):t._hideMenu(o,!0),e.stopPropagation(),t._blockMouseEvent=n.gecko?!0:!1)))},_onDocMouseDown:function(e){var t=this,r=t._rootMenu,i=e.target;!r.compareTo(i)&&!r.contains(i)&&(t._hideAllSubmenus(r),n.webkit&&(t._hasFocus=!1,t._clearActiveItem()))}}),e.namespace("Plugin"),e.Plugin.NodeMenuNav=vt},"3.16.0",{requires:["node","classnamemanager","plugin","node-focusmanager"],skinnable:!0});
/*
YUI 3.16.0 (build 3.16.0-ym15)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.16.0",{requires:["yui-base"],optional:["dump"]});
YUI.add("rapid-base"),YUI.add("rapid-base-proxy");
if(typeof YAHOO==="undefined"||!YAHOO){YAHOO={}}YAHOO.i13n=YAHOO.i13n||{};YAHOO.i13n.EventTypes=function(){var RICHVIEW="richview";var CONTENTMODIFICATION="contentmodification";function EventType(yqlid,eventName,spaceidPrefix){this.yqlid=yqlid;this.eventName=eventName;this.spaceidPrefix=spaceidPrefix}EventType.prototype={getYQLID:function(){return this.yqlid},getEventName:function(){return this.eventName}};var eventMapping={pageview:new EventType("pv","pageview",""),simple:new EventType("lv","event","P"),linkview:new EventType("lv","linkview","P"),richview:new EventType(RICHVIEW,RICHVIEW,"R"),contentmodification:new EventType(RICHVIEW,CONTENTMODIFICATION,"R"),dwell:new EventType("lv","dwell","D")};return{getEventByName:function(name){return eventMapping[name]}}}();YAHOO.i13n.Rapid=function(old_conf){if(typeof console==="undefined"||typeof console.log==="undefined"){console={log:function(){}}}if(typeof console.error==="undefined"){console.error=console.log}if(typeof console.warn==="undefined"){console.warn=console.log}function KVMap(){}KVMap.prototype={ser:function(){return U.ser(this.map)},set:function(k,v){var val=v?U.norm(v):v;if(val===undefined||val===null){val=""}if(val!==null&&U.isStr(val)){val=val.replace(/\\/g,"\\\\")}if(val.length>U.MAX_VALUE_LENGTH){val=val.substring(0,U.MAX_VALUE_LENGTH)}if(U.isValidPair(k,val)){this.map[U.norm(k)]=val;this.count++}},get:function(k){return this.map[k]},getAll:function(){return this.map},absorb:function(other){if(!other||!U.isObj(other)){return}for(var k in other){if(U.hasOwn(other,k)){this.set(k,other[k])}}},absorb_filter:function(other,f){if(!other||!U.isObj(other)){return}for(var k in other){if(f&&!f.call(null,k)){continue}if(U.hasOwn(other,k)){this.set(k,other[k])}}},getSize:function(){return this.count}};function PageParams(initialVals){this.map={};this.count=0;if(initialVals){this.absorb(initialVals)}}function YLK(){this.map={};this.count=0}PageParams.prototype=new KVMap;PageParams.prototype.constructor=KVMap;YLK.prototype=new KVMap;YLK.prototype.constructor=KVMap;PageParams.makeFromPP=function(existingPageParams){var rv=new PageParams;if(existingPageParams){rv.absorb(existingPageParams.getAll())}return rv};var keys=new PageParams,U=Utils(old_conf),modules_map=new ModulesList,comp_types={none:0,gzip:1,lzw:2,deflate:3};function getLK(el,allowpos){if(!el){return null}if(allowpos===null){allowpos=false}var rv=new YLK;var data_action_outcome=U.getAttribute(el,U.data_action_outcome);if(data_action_outcome){rv.set("outcm",data_action_outcome)}var keystring=U.getAttribute(el,"data-ylk");if(keystring===null||keystring.length===0){return rv}var parts=keystring.split(U.ylk_pair_delim);for(var i=0,len=parts.length;i<len;i++){var pieces=parts[i].split(U.ylk_kv_delim);if(pieces.length!==2){continue}var key=pieces[0],val=pieces[1];if(key===null||key===""||val===null){continue}if(val.length>U.MAX_VALUE_LENGTH){val=val.substring(0,U.MAX_VALUE_LENGTH)}if(key.length<=8&&val.length<=U.MAX_VALUE_LENGTH){if(key!=="_p"||allowpos){rv.set(key,val)}}}return rv}function getValueWithBounds(value,lower,upper){if(value<lower){return lower}if(value>upper){return upper}return value}function initKeys(newKeys,loc){keys.set("A_sid",YAHOO.i13n.A_SID||U.rand());keys.set("_w",U.rmProto(loc).substring(0,U.MAX_VALUE_LENGTH));if(newKeys){keys.absorb(newKeys)}else if(old_conf.keys){keys.absorb(old_conf.keys)}}function initConfig(conf){var global=YAHOO.i13n,TEST_ID=YAHOO.i13n.TEST_ID||conf.test_id,loc=conf.location||document.location.href;initKeys(conf.keys,loc);if(TEST_ID){TEST_ID=U.norm(""+TEST_ID)}var DEFAULT_COMPR_LOWER=300,DEFAULT_COMPR_TIMEOUT=700,DEFAULT_CLICK_TIMEOUT=1e4;var override=conf.override||{};var rv={override:override,version:"3.26",keys:keys,referrer:conf.referrer,getReferrer:function(){return U.norm(U.clref(typeof this.referrer!=="undefined"?this.referrer:document.referrer))},spaceid:U.norm(override.spaceid||YAHOO.i13n.SPACEID||conf.spaceid),yrid:U.norm(conf.yrid||""),oo:conf.oo?"1":"0",nol:conf.nol?"1":"0",yql_enabled:conf.yql_enabled!==false,ywa:global.ywa?absorb_hash(conf.ywa,global.ywa):conf.ywa,ywa_dpid:null,ywa_cf_override:global.YWA_CF_MAP||{},ywa_action_map:global.YWA_ACTION_MAP||{},ywa_outcome_map:global.YWA_OUTCOME_MAP||{},fing:conf.use_fing==1,USE_RAPID:conf.use_rapid!==false,linktrack_attribut:conf.lt_attr||"text",tracked_mods:conf.tracked_mods||[],tracked_mods_viewability:conf.tracked_mods_viewability||[],viewability:conf.viewability||false,viewability_time:conf.viewability_time||300,viewability_px:conf.viewability_px||50,lt_attr:conf.lt_attr||"text",client_only:conf.client_only,text_link_len:conf.text_link_len||-1,test_id:TEST_ID,yql_host:conf.yql_host||"geo.query.yahoo.com",yql_path:conf.yql_path||"/v1/public/yql",click_timeout:conf.click_timeout||DEFAULT_CLICK_TIMEOUT,compr_timeout:conf.compr_timeout||DEFAULT_COMPR_TIMEOUT,compr_on:conf.compr_on!==false,compr_type:conf.compr_type||"deflate",webworker_file:YAHOO.i13n.WEBWORKER_FILE||conf.webworker_file||"rapidworker-1.2.js",nofollow_classname:conf.nofollow_class||"rapidnofollow",no_click_listen:conf.rapid_noclick_resp||"rapid-noclick-resp",nonanchor_track_class:conf.nonanchor_track_class||"rapid-nonanchor-lt",anc_pos_attr:"data-rapid_p",anc_v9y_attr:"data-v9y",deb:conf.debug===true,ldbg:conf.ldbg>0?true:loc.indexOf("yhldebug=1")>0,addmod_timeout:conf.addmodules_timeout||300,ult_token_capture:typeof conf.ult_token_capture==="boolean"?conf.ult_token_capture:false,track_type:conf.track_type||"data-tracktype",dwell_on:conf.dwell_on===true,async_all_clicks:conf.async_all_clicks===true,click_postmsg:conf.click_postmsg||{},apv:conf.apv!==false,apv_time:conf.apv_time||500,apv_px:conf.apv_px||500,apv_always_send:conf.apv_always_send===true,ex:conf.ex===true,persist_asid:conf.persist_asid===true,track_right_click:conf.track_right_click===true,gen_bcookie:conf.gen_bcookie===true,skip_attr:conf.skip_attr||"data-rapid-skip",parse_dom:conf.parse_dom===true,pageview_on_init:conf.pageview_on_init!==false,perf_navigationtime:conf.perf_navigationtime||0,perf_commontime:conf.perf_commontime||null,perf_customtime:conf.perf_customtime||null,perf_resourcetime:conf.perf_resourcetime||0,sample:conf.sample||{},loc:loc};rv.ywa_action_map[YAHOO.i13n.EventTypes.getEventByName("richview").getEventName()]=100;if(rv.ywa&&(!rv.ywa.project_id||rv.ywa.project_id==0||!U.isNumeric(rv.ywa.project_id))){logError("Invalid YWA project id: null or not numeric.");rv.ywa=null}var compr_timeout=rv.compr_timeout*1;if(!U.isNum(compr_timeout)){rv.compr_timeout=DEFAULT_COMPR_TIMEOUT}else{rv.compr_timeout=getValueWithBounds(compr_timeout,DEFAULT_COMPR_LOWER,DEFAULT_COMPR_TIMEOUT)}if(rv.click_timeout!=DEFAULT_CLICK_TIMEOUT){logWarning("Click timeout set to "+rv.click_timeout+"ms (default 10000ms)")}if(conf.apv_callback&&typeof conf.apv_callback=="function"){rv.apv_callback=conf.apv_callback}else{rv.apv_callback=null}return rv}function absorb_hash(base,override){var rv={};if(base&&U.isObj(base)){for(var k in base){if(U.hasOwn(base,k)){rv[k]=base[k]}}}if(override&&U.isObj(override)){for(var k in override){if(U.hasOwn(override,k)){rv[k]=override[k]}}}return rv}function regenSid(){keys.set("A_sid",U.rand())}function logPre(){return"Rapid-"+conf.version+"("+(new Date).getTime()+"):"}function logWarning(msg){console.warn("RAPID WARNING: "+msg)}function logError(msg){console.error("RAPID ERROR: "+msg)}function logDebug(msg){if(conf.ldbg){console.log(logPre()+msg)}}function CookieMap(){var cookie_text=document.cookie;this.cookieMap={};if(/[^=]+=[^=;]?(?:; [^=]+=[^=]?)?/.test(cookie_text)){var cookieParts=cookie_text.split(/;\s/g),cookieName=null,cookieValue=null,cookieNameValue=null;for(var i=0,len=cookieParts.length;i<len;i++){cookieNameValue=cookieParts[i].match(/([^=]+)=/i);if(cookieNameValue instanceof Array){try{cookieName=U.dec(cookieNameValue[1]);cookieValue=U.dec(cookieParts[i].substring(cookieNameValue[1].length+1))}catch(ex){logError(ex)}}else{cookieName=U.dec(cookieParts[i]);cookieValue=cookieName}if(cookieName==="B"||cookieName==="BX"||cookieName==="TT"||(conf.ywa&&cookieName==="fpc"+conf.ywa.project_id||cookieName==="fpc"||cookieName==="ywandp"||cookieName.indexOf("ywadp")===0)||cookieName==="D"){this.cookieMap[cookieName]=cookieValue}}}}CookieMap.prototype={getYWAFPC:function(){if(!conf.ywa){return null}var oldCookie=this.cookieMap["fpc"+conf.ywa.project_id];var fpc=this.cookieMap["fpc"];var fpcData=parseCookieData(fpc);var fpcVal=null;if(fpc){fpcVal=fpcData[conf.ywa.project_id]}if(oldCookie){U.clearCookie("fpc"+conf.ywa.project_id);if(!fpcVal){fpcData[conf.ywa.project_id]=oldCookie;var val=serializeCookieData(fpcData);setCook("fpc",val,31536e4);fpcVal=oldCookie}}return fpcVal?fpcVal:null},getCookieByName:function(name){return this.cookieMap[name]},getYWADPID:function(){if(conf.ywa){var name="ywandp",oldName="ywadp"+conf.ywa.project_id,cookieData=parseCookieData(this.cookieMap[name]),oldCookie;var dpid=cookieData[conf.ywa.project_id];if(dpid===undefined||dpid===null||dpid===""){oldCookie=this.cookieMap[oldName];if(oldCookie){cookieData[conf.ywa.project_id]=oldCookie}else{cookieData[conf.ywa.project_id]=getDPID()}dpid=cookieData[conf.ywa.project_id];var val=serializeCookieData(cookieData);setCook(name,val,31536e4);this.cookieMap[name]=val}conf.ywa_dpid=dpid}}};function handleULT(){if(!conf.ult_token_capture||YAHOO.i13n.__handled_ult_tokens__===true){return}YAHOO.i13n.__handled_ult_tokens__=true;var url=conf.loc;if(url.match(/;_yl[a-z]{1}=/)){if(conf.ldbg){logDebug("Found ULT Token on URL.")}uploader.sendGeoT(url)}else{var cooks=new CookieMap,dcookie=cooks.getCookieByName("D");if(dcookie){U.clearCookie("D","/",".yahoo.com");uploader.sendGeoT(dcookie)}}}var conf=initConfig(old_conf),uploader=Uploader(),scrollManager=null,viewabilityManager=null,dwellManager=null,currentClickEvent=null;function ts(){return Math.floor((new Date).valueOf()/1e3)}function setCook(name,val,offset){var d=new Date,expiry="";d.setTime(d.getTime()+offset*1e3);expiry="; expires="+d.toGMTString();var cookie=name+"="+val+expiry+"; path=/";document.cookie=cookie}function getDPID(){return""+Math.floor(Math.random()*4294967295)}function serializeCookieData(cookies){var key,data=[];for(key in cookies){if(key,cookies[key]){data.push(key+":"+cookies[key])}}return encodeURIComponent(data.join(";"))}function parseCookieData(cookieValue,pid){cookieValue=cookieValue||"";var results=decodeURIComponent(cookieValue).split(";"),cookies={};for(i=0,excl=results.length;i<excl;i++){var tmp=results[i].split(":");cookies[tmp[0]]=tmp[1]}if(pid){return cookies[pid]}return cookies}function Uploader(){var GEO_BASE=YAHOO.i13n.beacon_server||"geo.yahoo.com";function padCF(cf){var custom_field_key="cf";if(cf<10&&(""+cf).charAt(0)!=="0"){custom_field_key+="0"+cf}else{custom_field_key+=cf}return custom_field_key}function setFPCStub(){if(typeof window.ITTs==="undefined"||!U.isArr(window.ITTs)||window.ITTs.length===0){window.ITTs=[{}]}if(window.ITTs[0].setFPCookies){return}window.ITTs[0].setFPCookies=function(){var fpcName="fpc",cooks=new CookieMap;var cookieData=parseCookieData(cooks.getCookieByName(fpcName));cookieData[conf.ywa.project_id]=window.ITTs[0].FPCV;setCook(fpcName,serializeCookieData(cookieData),31536e3);var oldCookie=cooks.getCookieByName(fpcName+conf.ywa.project_id);if(oldCookie){U.clearCookie(fpcName+conf.ywa.project_id)}}}function sb(url,func){if(conf.ldbg){logDebug(url)}var i=new Image,tid=null;i.onload=i.onabort=i.onerror=function(){if(!!func&&typeof func==="function"){clearTimeout(tid);func.call(null)}};i.src=url;if(!!func&&typeof func==="function"){tid=setTimeout(function(){func.call(null)},conf.click_timeout)}setTimeout(function(){i=null},1e7)}function applyCFMap(ult_data,dest){for(var pp in ult_data){if(!U.hasOwn(ult_data,pp)){continue}var cf_number=conf.ywa_cf_override[pp];if(cf_number){dest[cf_number]=ult_data[pp]}}}function buildYWAPixel(type,event_number,extra_action,click_parts,event_data,pp,override_pixel_parts){function adjustedCF(cf,use_enc_semi){var semi=use_enc_semi?"%3B":";";return cf+(extra_action?semi+cf:"")}var cookieMap=new CookieMap,fpc=cookieMap.getYWAFPC();cookieMap.getYWADPID();click_parts=click_parts||{};if(type!=="c"){setFPCStub()}var base_url=[U.curProto(),conf.ywa.host||"a.analytics.yahoo.com","/fpc.pl?"],proj_id=conf.ywa.project_id,docGroup=conf.ywa.document_group,cfs={};if(conf.test_id){cfs["14"]=conf.test_id}var myPP={};U.aug(myPP,buildPageParams().getAll());U.aug(myPP,pp);var parts=["_cb="+U.rand(),".ys="+conf.spaceid,"a="+proj_id,"b="+U.enc(conf.ywa.document_name||document.title),"d="+U.enc(new Date),"f="+U.enc(conf.loc),"j="+U.sr("x"),"k="+U.cold(),"t="+ts(),"l=true"];if(U.hasOwn(myPP,"A_apv")){parts.push("apv="+U.enc(myPP.A_apv))}if(override_pixel_parts){for(var i in override_pixel_parts){if(U.hasOwn(override_pixel_parts,i)){parts.push(i+"="+U.enc(override_pixel_parts[i]))}}}if(docGroup&&docGroup!==""){parts.push("c="+U.enc(docGroup))}if(conf.ywa_dpid){parts.push("dpid="+conf.ywa_dpid)}if(type==="c"){click_parts.x=12;var val="12";if(extra_action){val=U.enc(val+";"+extra_action)}parts.splice(0,0,"x="+val)}else if(type==="e"){parts.push("x="+event_number+(extra_action?";"+extra_action:""))}if(fpc){parts.push("fpc="+U.enc(fpc))}var member=conf.ywa.member_id;if(member){parts.push("m="+member)}if(conf.getReferrer()!==""){parts.push("e="+U.enc(conf.getReferrer()))}applyCFMap(myPP,cfs);if(type==="e"&&event_data){applyCFMap(event_data,cfs)}var passed_cfs=conf.ywa.cf;U.aug(cfs,passed_cfs,function(cf){return!U.isResCF(cf)});for(var cf in cfs){if(U.hasOwn(cfs,cf)){parts.push(padCF(cf)+"="+adjustedCF(U.enc(cfs[cf]),1))}}if(type==="e"||type==="c"){parts.push("ca=1")}if(type!=="p"){parts.push("resp=img")}if(type==="c"){for(var k in click_parts){if(!U.hasOwn(click_parts,k)){continue}if(k!=="x"){var part=click_parts[k];if(part&&part.length>U.MAX_VALUE_LENGTH){part=part.substring(0,U.MAX_VALUE_LENGTH)}try{part=U.enc(adjustedCF(part));part=part.replace(/'/g,"%27")}catch(e){logError(e)}parts.push(padCF(k)+"="+part)}}}return base_url.join("")+parts.join("&")}function genRandIframeName(){return"rapid_if_"+U.rand()}function makeInvisible(el){var none="display:none;";if(U.isIE&&(U.ieV===6||U.ieV===7||U.ieV===8)){el.style.setAttribute("cssText",none,0)}else{U.sa(el,"style",none)}}function makeIFrame(frameName){var frame=null;if(U.isIE&&U.ieV<=8){var src="";if(U.isSecure()&&U.ieV==6){src='src="https://geo.yahoo.com/b.html"'}frame=document.createElement("<iframe "+src+' name="'+frameName+'"></iframe>')}else{frame=document.createElement("iframe")}frame.name=frameName;return frame}function hideLoadingBar(){setTimeout(function(){var frame=makeIFrame("");U.addEvent(frame,"load",function(){U.rmBodyEl(frame)});U.appBodyEl(frame)},1)}function sendViaIframe(pay,compression){var frame=null,form=U.make("form"),input=U.make("input"),curFrameName=genRandIframeName(),curFormId=genRandIframeName(),encType="application/x-www-form-urlencoded;charset=UTF-8";frame=makeIFrame(curFrameName);makeInvisible(frame);makeInvisible(form);form.id=curFormId;form.method="POST";form.action=getYQLURI(compression);form.target=curFrameName;if(U.isIE&&U.ieV<=7){form.setAttribute("enctype",encType)}else{form.setAttribute("enctype",encType);form.setAttribute("encoding",encType)}input.name="q";input.value=pay;if(U.isIE&&U.ieV>=10){input.type="submit"}form.appendChild(input);var eventName="load",onloadHandler=function(){var response="";if(conf.ldbg&&(!U.isIE||U.ieV>=9)){var ifr=frame.contentDocument||frame.contentWindow.document;response=ifr.body.innerHTML}U.rmEvent(frame,eventName,onloadHandler);setTimeout(function(){U.rmBodyEl(frame);U.rmBodyEl(form)},0);if(conf.ldbg){logDebug("iframe resp: "+response)}if(U.isIE&&U.ieV<=7){hideLoadingBar()}};U.addEvent(frame,eventName,onloadHandler);U.appBodyEl(frame);U.appBodyEl(form);form.submit()}function getYQLURI(compressed){var debug=conf.deb,rnd=U.rand(),rv=[U.curProto(),conf.yql_host,conf.yql_path,"?yhlVer=2&yhlClient=rapid&yhlS=",conf.spaceid,debug===true?"&yhlEnv=staging":"",debug===true||conf.ldbg?"&debug=true&diagnostics=true":"",U.isIE&&U.ieV?"&yhlUA=ie"+U.ieV:"",U.isIE&&U.ieV==8?"&format=json":"","&yhlCT=2","&yhlBTMS=",(new Date).valueOf(),"&yhlClientVer=",conf.version,"&yhlRnd=",rnd,"&yhlCompressed=",compressed||0,conf.gen_bcookie?"&yhlBcookie=1":""].join("");if(conf.ldbg){logDebug(rv)}return rv}function sendToYQL(pay,compressed){var xhr=U.getXHR(),url=getYQLURI(compressed);xhr.open("POST",url,true);xhr.withCredentials=true;xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");if(conf.ldbg){xhr.onreadystatechange=function(){if(xhr.readyState===4){logDebug(xhr.status+":xhr response: "+xhr.responseText)}}}xhr.send(pay)}var buildBP=function(needReferrer){var rv={_pl:1,A_v:conf.version};var ref=conf.getReferrer();if(ref&&needReferrer!==false){rv._R=ref.substring(0,U.MAX_VALUE_LENGTH)}if(conf.test_id){rv.test=conf.test_id}if(conf.ex){rv._ex=1}if(!rv._bt){rv._bt="rapid"}var protocol=window.location.protocol||"";protocol=protocol.replace(/:$/,"");rv.A_pr=protocol;return rv};function linkToStrippedJSON(link,sendPosition,filter){var rv={};if(!U.isObj(link)){return rv}U.aug(rv,link,filter);return rv}function buildModule(module_obj,sendPosition,options){options=options||{};var rv={m:U.norm(module_obj.moduleName),l:[]};if(module_obj.moduleYLK){rv.ylk=module_obj.moduleYLK.getAll()}var links=module_obj.links;var links=module_obj.links,filter=function(key){var isPos=key==="_p";if(sendPosition&&isPos){return true}return key!=="sec"&&!isPos};for(var i=0,len=links.length;i<len;i++){if(conf.viewability&&!links[i].viewable){if(conf.ldbg){logDebug("Skipping not viewable link: "+links[i].data.slk)}continue}rv.l.push(linkToStrippedJSON(links[i].data,sendPosition,filter))}return rv}function buildModulesList(mods,sendPosition,options){var rv=[],mod=null;for(var mname in mods){if(!U.hasOwn(mods,mname)){continue}mod=mods[mname];if(!mod){continue}var modObj=buildModule(mod,sendPosition,options);if(modObj.l.length>0){rv.push(modObj)}else if(conf.ldbg){logDebug('Not capturing 0 links mod: "'+mod.moduleName+'"')}}return rv}function yqlRecordTypeFor(isPageView,options){if(isPageView){return"pv"}if(options&&options.event){return options.event.type.getYQLID()}return"lv"}function buildPageRows(mods,isPageView,sendPosition,pageParams,options){return[{t:yqlRecordTypeFor(isPageView,options),s:conf.spaceid,pp:buildPageParams(isPageView,pageParams).getAll(),_ts:ts(),lv:buildModulesList(mods,sendPosition,options)}]}function buildPageParams(isPageView,pageParams){var rv=PageParams.makeFromPP(conf.keys);rv.absorb(pageParams);if(isPageView){rv.set("A_",1)}return rv}function buildYQLPostBody(json,needKey,doEncode){var s="select * from x where a = '"+json+"'";return(needKey?"q=":"")+(doEncode?U.enc(s):s)}function buildJSON(rowBuilderFunc){var data={bp:buildBP(),r:rowBuilderFunc.call(0),yrid:conf.yrid,optout:conf.oo,nol:conf.nol};return U.toJSON(data)}function _sendRefreshedContent(mod_obj,isPageView,options){var pp={};if(options.event){U.aug(pp,options.event.data)}if(options.pp){U.aug(pp,options.pp)}var json=buildJSON(function(){return buildPageRows([mod_obj],isPageView,true,pp,options)});_rapidConditionalSend(json,isPageView)}function sendRapidFinal(newModules,isPageview,pageParams,options){var json=buildJSON(function(){return buildPageRows(newModules,isPageview,false,pageParams,options)});_rapidConditionalSend(json)}function getModuleID(module){return module.identifier}var sendRapidThrottled=function(){var tid=null,bufferedMods=[],lastCall=0,TIMEOUT=conf.addmod_timeout;return function(newModules,isPageview,pageParams,options){clearTimeout(tid);var elapsed=+new Date-lastCall;bufferedMods=U.uniqConcat(bufferedMods,newModules,getModuleID);if(elapsed>TIMEOUT){lastCall=+new Date;sendRapidFinal(bufferedMods,isPageview,pageParams,options);bufferedMods=[]}else{var timeout=TIMEOUT-elapsed;tid=setTimeout(function(){if(conf.ldbg){logDebug("queueing send in addMods")}sendRapidFinal(bufferedMods,isPageview,pageParams,options);bufferedMods=[]},timeout)}}}();function _rapidConditionalSend(json){var ldbg=conf.ldbg;function exec(jsonInsertData,compression){if(compression===0){jsonInsertData=jsonInsertData.replace(/'/g,"\\'")}if(ldbg){logDebug("body: "+jsonInsertData)}if(U.hasCORS()){body=buildYQLPostBody(jsonInsertData,true,true);sendToYQL(body,compression)}else{body=buildYQLPostBody(jsonInsertData,0,0);sendViaIframe(body,compression)}}var body="",compressionInt=comp_types[conf.compr_type];if(conf.compr_on&&U.hasWorkers()&&compressionInt>1&&json.length>2*1024){if(ldbg){logDebug("Looking for worker:"+conf.webworker_file+", compr timeout:"+conf.compr_timeout)}try{var w=new Worker(conf.webworker_file),sent=false,tid=null,compressionStartTime=0;function failSend(){if(!sent){sent=true;exec(json,0);if(ldbg){logDebug("sent in failSend")}}}w.onerror=function(error){clearTimeout(tid);failSend();logWarning(error.message);w.terminate()};w.onmessage=function(event){clearTimeout(tid);var compressionEndTime=U.tms();if(event.data==="Decompress fail"||event.data==="Compress fail"||event.data.indexOf("error:")==0){if(ldbg){logDebug(event.data)}failSend()}if(!sent){sent=true;exec(event.data,compressionInt)}if(ldbg){logDebug("Ratio ("+event.data.length+"/"+json.length+"): "+(event.data.length*100/json.length).toFixed(2)+"% -> C_T: "+(compressionEndTime-compressionStartTime)+" ms ("+compressionEndTime+"-"+compressionStartTime+")")}w.terminate()};if(ldbg){logDebug("posting to worker: "+json)}compressionStartTime=U.tms();w.postMessage({type:compressionInt,json:json});tid=setTimeout(function(){failSend();w.terminate()},conf.compr_timeout)}catch(e){if(ldbg){logDebug("compression worker exception "+e)}exec(json,0)}}else{exec(json,0)}}function makeGeo(type,pp,spaceid){return U.curProto()+GEO_BASE+"/"+type+["?s="+(spaceid?spaceid:conf.spaceid),"t="+U.rand()+","+Math.random(),"_I="+conf.yrid,"_AO="+conf.oo,"_NOL="+conf.nol,"_R="+U.enc(conf.getReferrer()),(type==="c"?"_K=":"_P=")+buildGeoPageParams(pp)].join("&")}function buildGeoPageParams(initPP){var pp=new PageParams(buildBP(false));pp.absorb(conf.keys.getAll());pp.set("_ts",ts());if(initPP){if(!(initPP instanceof PageParams)){logError("Internal error in buildGeoPP: not PP type")}else{pp.absorb(initPP.getAll())}}return conf.version+"%05"+pp.ser()}function buildGeoClick(clickEvent){var b=[makeGeo("c")+"&_C="+U.ser(clickEvent.data)];return b.join("&")}function getMapVal(map,key){var num=map[key];if(num&&U.isNum(num)&&num>=0){return num}return null}function getExtraAction(target){var data_action=U.getAttribute(target,U.DATA_ACTION),action_response=U.getAttribute(target,U.data_action_outcome);if(data_action!==null){return getMapVal(conf.ywa_action_map,data_action)}else if(action_response!==null){return getMapVal(conf.ywa_outcome_map,action_response)}return null}return{sendGeoT:function(payload){var b=[U.curProto(),GEO_BASE,"/t?",payload].join("");sb(b)},sendGeoPV:function(){sb(makeGeo("b"))},sendRapidNoDelay:function(modules,isPageview,pageParams,options,geoOnly){if(!conf.yql_enabled||geoOnly){var ppObj=null;if(pageParams){ppObj=new PageParams(pageParams)}sb(makeGeo(isPageview?"b":"p",ppObj))}else{sendRapidFinal(modules,isPageview,pageParams,options)}},sendRapid:function(modules,isPageview,pageParams,options){sendRapidThrottled(modules,isPageview,pageParams,options)},sendRefreshedContent:_sendRefreshedContent,sendYWAEvent:function(customEvent,cb){var event_number=null,extra_action=null,event_name=customEvent.name;if(conf.ywa_action_map&&event_name){event_number=getMapVal(conf.ywa_action_map,event_name)}if(event_number===null){return}if(conf.ywa_outcome_map&&customEvent.outcome){extra_action=getMapVal(conf.ywa_outcome_map,customEvent.outcome)}sb(buildYWAPixel("e",event_number,extra_action,null,customEvent.data),cb)},sendULTEvent:function(customEvent,spaceidOverride){var customPP={};if(customEvent&&customEvent.data){customPP=customEvent.data}var beacon=makeGeo("p",new PageParams(customPP),spaceidOverride||0);if(customEvent.type){beacon+="&_V="+customEvent.type.spaceidPrefix}sb(beacon)},sendEvents:function(customEvent,cb){if(conf.USE_RAPID){this.sendULTEvent(customEvent)}if(conf.ywa){this.sendYWAEvent(customEvent,cb)}},sendClick:function(clickEvent,callback){var redirect=null,geo="",ywa_click_beacon="",extra_ywa_action=null,redirectDone=false,tid=null;if(conf.USE_RAPID){geo=buildGeoClick(clickEvent)}if(conf.ywa){var click_data=clickEvent.data,target=clickEvent.targetElement;var ywa_click_parts={18:click_data.sec,19:click_data.slk,20:click_data._p};if("A_cl"in click_data){ywa_click_parts["130"]=click_data.A_cl}if("A_lv"in click_data){ywa_click_parts["131"]=click_data.A_lv}if(target){extra_ywa_action=getExtraAction(target)}else{extra_ywa_action=getMapVal(conf.ywa_outcome_map,clickEvent.outcome)}if(conf.ywa_cf_override){applyCFMap(click_data,ywa_click_parts)}ywa_click_beacon=buildYWAPixel("c",0,extra_ywa_action,ywa_click_parts)}if(conf.async_all_clicks||!clickEvent.synch){if(geo){sb(geo,callback)}if(ywa_click_beacon){if(!geo){sb(ywa_click_beacon,callback)}else{sb(ywa_click_beacon)}}return}U.prevDef(clickEvent.event);redirect=function(){if(redirectDone){return}redirectDone=true;if(callback){callback.call();return}var href=clickEvent.targetElement.href;if(conf.click_postmsg["origin"]){var targetWin=conf.click_postmsg["window"]||top;var data=conf.click_postmsg["payload"]||{};data["href"]=href;targetWin.postMessage(U.toJSON(data),conf.click_postmsg["origin"])}else{if(clickEvent.hasTargetTop){top.document.location=href}else{document.location=href}}};if(conf.USE_RAPID){if(conf.ywa){var i=new Image,i2=new Image,count=0;i.onload=i.onerror=i.onabort=i2.onload=i2.onerror=i2.onabort=function(){if(++count===2){clearTimeout(tid);redirect()}};i.src=geo;i2.src=ywa_click_beacon;tid=setTimeout(redirect,conf.click_timeout);setTimeout(function(){i=null;i2=null},1e7)}else{sb(geo,redirect)}}else{if(conf.ywa){sb(ywa_click_beacon,redirect)}}},sendYWAPV:function(pp){var url=buildYWAPixel("p",0,0,0,0,pp),heads=document.getElementsByTagName("head"),tr="true";if(heads.length===0){return}var n=U.make("script",{defer:tr,async:tr,type:"text/javascript",src:url});function rm(){heads[0].removeChild(n)}if(U.isIE){n.onreadystatechange=function(){var rs=this.readyState;if("loaded"===rs||"complete"===rs){n.onload=n.onreadystatechange=null;rm()}}}else if(U.isWebkit){n.addEventListener("load",rm)}else{n.onload=rm}heads[0].appendChild(n)},sendInternalSearch:function(searchTerm,numSearchResults){searchTerm=searchTerm||"";if(!U.isNum(numSearchResults)){numSearchResults=0}var searchData={isk:searchTerm,isr:numSearchResults};var b=buildYWAPixel("e","INTERNAL_SEARCH",null,null,null,null,searchData);sb(b)},sendYWAECommerce:function(action,data){var ecom_data={},ecom_acts_ok={PRODUCT_VIEW:1,ADD_TO_CART:1,CANCELLED_SALE:1,PENDING_SALE:1,SALE:1},ecom_ok={amount:"xa",orderId:"oc",tax:"xt",shipping:"xs",discount:"xd",sku:"p",units:"q",amounts:"r"};if(!(action in ecom_acts_ok)){logError("invalid YWA ecommerce action: "+action);return}for(var i in data){if(U.hasOwn(data,i)){if(i in ecom_ok){var ywa_key=ecom_ok[i];ecom_data[ywa_key]=data[i]}}}if(action==="SALE"){action=1}var b=buildYWAPixel("e",action,null,null,null,null,ecom_data);sb(b)}}}function implicitKeyFilter(key){return key!=="sec"&&key!=="slk"&&key!=="_p"}function Link(module_ltattr,module_name,position,anchor_el,link_slk,skipped_div,useViewability){var link_text="",link_key_pairs=null;var link_style=U.getCompStyle(anchor_el);var viewable=useViewability?link_style.visibility!=="hidden"&&link_style.display!=="none"&&U.isAboveFold(anchor_el):true;var rv={viewable:viewable,data:{sec:module_name,_p:position}};if(useViewability){U.aug(rv.data,{A_lv:1})}if(!skipped_div){anchor_el.setAttribute(conf.anc_pos_attr,position);if(useViewability){anchor_el.setAttribute(conf.anc_v9y_attr,viewable?"1":"0")}link_text=U.getLT(anchor_el,module_ltattr);if(link_text&&link_text!==""){link_key_pairs=getLK(anchor_el)}else{link_text="_ELINK_"}rv.data.slk=link_text}else{rv.data.slk=link_slk||"section";link_key_pairs=getLK(anchor_el)}if(link_key_pairs!==null){U.aug(rv.data,link_key_pairs.getAll())}return rv}function ModulesList(){var modules_map={};return{addModule:function(element_id,module){modules_map[U.norm(element_id)]=module},addModules:function(modules,useViewability){var is_arr=U.isArr(modules),newMods=[];if(!is_arr){if(U.isStr(modules)){modules=new Array(modules);is_arr=true}}for(var i in modules){if(!U.hasOwn(modules,i)){continue}var elementid_to_track=is_arr?modules[i]:i,mod_name=U.trim(modules[i]);if(!this.exists(elementid_to_track)){var m=Module(mod_name,elementid_to_track,useViewability);if(m){this.addModule(elementid_to_track,m);newMods.push(m)}}else{logError('addModules() called with prev processed id:"'+elementid_to_track+'"')}}return newMods},getModules:function(){return modules_map},getModulesWithViewability:function(){var rv={};for(var m in modules_map){var cur=modules_map[m];if(cur.useViewability){rv[m]=cur}}return rv},reevaluateModuleViewability:function(){var viewabilityMods=this.getModulesWithViewability();for(var mod_name in viewabilityMods){var cur_mod=viewabilityMods[mod_name];cur_mod.reevaluateViewableLinks()}},refreshModule:function(module_element_id,isPageView,shouldSendLinkviews,options){var m=modules_map[U.norm(module_element_id)];if(m){m.refreshModule(module_element_id,isPageView,shouldSendLinkviews,options)}else{logError("refreshModule called on unknown section: "+m)}},removeModule:function(element_id){var m=modules_map[U.norm(element_id)];if(m){m.removeHandlers();delete modules_map[element_id]}},destroy:function(){for(var mod in modules_map){if(U.hasOwn(modules_map,mod)){this.removeModule(mod)}}modules_map={}},exists:function(module_name){return modules_map[U.norm(module_name)]}}}function ltattrForModule(mod,default_val){if(U.hasClass(mod,"rapid_track_href")){return"href"}if(U.hasClass(mod,"rapid_track_text")){return"text"}if(U.hasClass(mod,"rapid_track_title")){return"title"}if(U.hasClass(mod,"rapid_track_id")){return"id"}return default_val}function isSubmitButton(el){return el.nodeName.toLowerCase()==="input"&&U.getAttribute(el,"type")==="submit"}function handleClick(e,module_object){var click=ClickEvent(e,module_object);currentClickEvent=click;if(click){if(dwellManager){dwellManager.set_state("stop")}uploader.sendClick(click)}}function hasClickModifier(e,targ,module_target){var getAttr=U.getAttribute;return targ.target&&targ.target.toLowerCase()==="_blank"||e.which===2||e.button===4||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||getAttr(targ,"data-nofollow")==="on"||getAttr(targ,"href")&&getAttr(targ,"href").substr(0,11).toLowerCase()==="javascript:"||U.hasClass(targ,conf.nofollow_classname)||U.hasClass(module_target,conf.nofollow_classname)}function CustomEvent(eventType,eventName,data,outcome){data=data||{};var type=null;if(eventType){type=YAHOO.i13n.EventTypes.getEventByName(eventType);data._E=type.getEventName();eventName=data._E}else{data._E=eventName||"_"}if(outcome){data.outcm=outcome}return{type:type,name:eventName,data:data,outcome:outcome}}function ClickEvent(e,module_object){e=e||event;var targ=U.getTarget(e),BUTTON="button",INPUT="input",target_node_name="",synchronous=false,rv=null;while(targ&&(target_node_name=targ.nodeName.toLowerCase())&&(target_node_name!=="a"&&target_node_name!==BUTTON&&!isSubmitButton(targ)&&!U.hasClass(targ,conf.nonanchor_track_class))){targ=targ.parentNode}if(!targ||U.hasClass(targ,conf.no_click_listen)){return 0}if(U.hasClass(targ,conf.nonanchor_track_class)){rv={pos:0,sec:module_object.moduleName,slk:"_"};var lk=getLK(targ,1);if(lk){U.aug(rv,lk.getAll())}}else{var pos=U.getAttribute(targ,conf.anc_pos_attr);rv=module_object.getLinkAtPos(pos);if(!rv){return 0}rv=rv.data;if(target_node_name!==INPUT&&target_node_name!==BUTTON&&!hasClickModifier(e,targ,module_object.moduleElement)){synchronous=true}}if(!rv.tar){var href=U.getAttribute(targ,"href");if(href){rv.tar=U.extDomain(href)}if(!href||!rv.tar){rv.tar=U.extDomain(conf.loc);

}}if(!rv.tar_uri){if(targ.pathname){rv.tar_uri=targ.pathname.substring(0,U.MAX_VALUE_LENGTH)}else rv.tar_uri=""}var module_ylk=module_object.moduleYLK;if(module_ylk){var m_ylk=module_ylk.getAll();U.aug(rv,m_ylk,function(key){return!(key in rv)})}rv.A_xy=U.xy(e);rv.A_sr=U.sr();if(e.type=="contextmenu"){rv.A_cl=3;synchronous=false}return{data:rv,event:e,moduleElement:module_object.moduleElement,targetElement:targ,synch:synchronous,hasTargetTop:targ&&targ.target&&targ.target.toLowerCase()==="_top"}}function ManualClick(sec,slk,pos,opt_keys,outcome_name){var rv={};U.aug(rv,opt_keys);rv.sec=sec;rv.slk=slk;rv._p=pos;return{data:rv,outcome:outcome_name,event:null,moduleElement:null,targetElement:null,synch:false,hasTargetTop:false}}function getElementsByTagNames(list,obj,filter_func){if(!obj){obj=document}var tagNames=list.split(","),resultArray=[];for(var i=0,ilen=tagNames.length;i<ilen;i++){var tags=obj.getElementsByTagName(tagNames[i]);for(var j=0,jlen=tags.length;j<jlen;j++){var cur_tag=tags[j];if(filter_func&&!filter_func.call(0,cur_tag)){continue}resultArray.push(cur_tag)}}var testNode=resultArray[0];if(!testNode){return[]}if(testNode.sourceIndex){resultArray.sort(function(a,b){return a.sourceIndex-b.sourceIndex})}else if(testNode.compareDocumentPosition){resultArray.sort(function(a,b){return 3-(a.compareDocumentPosition(b)&6)})}return resultArray}function getElementsByTagNamesDOMParsing(list,obj,resultArray,filter_func){if(!obj){obj=document}var tagNames=list.split(",");resultArray=resultArray||[];var children=obj.childNodes;if(U.getAttribute(obj,conf.skip_attr)!=="true"){for(var i=0,ilen=children.length;i<ilen;i++){var cur_tag=children[i];if(U.isTagOfInterest(cur_tag,tagNames)){if(!filter_func||filter_func.call(0,cur_tag)){resultArray.push(cur_tag)}}if(U.getAttribute(cur_tag,conf.skip_attr)!=="true"){getElementsByTagNamesDOMParsing(list,cur_tag,resultArray,filter_func)}else if(U.getAttribute(cur_tag,conf.skip_attr)==="true"){resultArray.push(cur_tag)}}}var testNode=resultArray[0];if(!testNode){return[]}if(testNode.sourceIndex){resultArray.sort(function(a,b){return a.sourceIndex-b.sourceIndex})}else if(testNode.compareDocumentPosition){resultArray.sort(function(a,b){return 3-(a.compareDocumentPosition(b)&6)})}return resultArray}function Module(mod_name,el_id,useViewability){var module_element=document.getElementById(el_id),tags_of_interest="a,button,input";if(!module_element){logWarning("Specified module not in DOM: "+el_id);return null}var module_ylk=getLK(module_element),links=[],link_els=conf.parse_dom?getElementsByTagNamesDOMParsing(tags_of_interest,module_element):getElementsByTagNames(tags_of_interest,module_element),module_ltattr=ltattrForModule(module_element,conf.lt_attr),numLinks=link_els.length,trackType=U.getAttribute(module_element,conf.track_type);function startTrackingLinks(links_arr,start_pos){var rv=[];start_pos=start_pos||1;for(var i=0,num_links=links_arr.length;i<num_links;i++){if(links_arr[i].tagName.toLowerCase()==="div"){var skipped_div=links_arr[i];var local_ylk=getLK(skipped_div);var l=Link(module_ltattr,mod_name,1,skipped_div,local_ylk.map.slk||module_ylk.map.slk,true,useViewability);links.push(l);rv.push(l)}else{var linkElement=links_arr[i];var l=Link(module_ltattr,mod_name,start_pos++,linkElement,0,0,useViewability);links.push(l);rv.push(l)}}if(U.getAttribute(module_element,conf.skip_attr)==="true"){var l=Link(module_ltattr,mod_name,1,skipped_div,module_ylk.map.slk,true);links.push(l);rv.push(l)}return rv}function getRevisedLinks(links_arr){var rv=[];for(var i=0,num_links=links_arr.length;i<num_links;i++){var linkElement=links_arr[i];var pos=U.getAttribute(linkElement,conf.anc_pos_attr);var l=Link(module_ltattr,mod_name,pos,linkElement,0,0,true);rv.push(l)}return rv}function filter_func(element){return!U.getAttribute(element,conf.anc_pos_attr)}startTrackingLinks(link_els);var module_object={useViewability:useViewability,moduleYLK:module_ylk,links:links,moduleName:mod_name,trackType:trackType,moduleElement:module_element,refreshModule:function(refreshed_elementid,isPageView,shouldSendLinkviews,options){options.isRefreshed=true;var new_link_els=conf.parse_dom?getElementsByTagNamesDOMParsing(tags_of_interest,U.$(refreshed_elementid),null,filter_func):getElementsByTagNames(tags_of_interest,U.$(refreshed_elementid),filter_func);if(isPageView===true||new_link_els.length>0){var newlinks=startTrackingLinks(new_link_els,numLinks+1);numLinks+=new_link_els.length;var num_viewable_links=new_link_els.length;if(useViewability){num_viewable_links=0;for(var i=0,len=newlinks.length;i<len;i++){if(newlinks[i].viewable){num_viewable_links++}}}if((isPageView===true||num_viewable_links>0)&&(conf.USE_RAPID||options.event)){var module_copy={};U.aug(module_copy,this);if(shouldSendLinkviews){module_copy.links=newlinks}else{module_copy.links=[]}if(isPageView===true||shouldSendLinkviews){uploader.sendRefreshedContent(module_copy,isPageView,options)}}}else if(U.ldbg){logDebug("refreshModule("+refreshed_elementid+") - no new links.")}if(isPageView===true){if(conf.ywa){uploader.sendYWAPV(options.pp)}if(conf.apv&&scrollManager){scrollManager.reInit()}}},reevaluateViewableLinks:function(){var linkPos=links.length;var new_link_els=getElementsByTagNames("a",this.moduleElement,function(pos){return function(element){if(!U.getAttribute(element,conf.anc_pos_attr)){element.setAttribute(conf.anc_pos_attr,++pos);var l=Link(module_ltattr,mod_name,pos,element,0,0,false);links.push(l)}var v9yValue=U.getAttribute(element,conf.anc_v9y_attr);if(v9yValue!=="1"&&U.isAboveFold(element)){element.setAttribute(conf.anc_v9y_attr,"1");return true}return false}}(linkPos+1));if(new_link_els.length===0){return}if(conf.USE_RAPID){var newViewables=getRevisedLinks(new_link_els);var module_copy={};U.aug(module_copy,this);module_copy.links=newViewables;uploader.sendRefreshedContent(module_copy,false,{})}},removeHandlers:function(){U.rmEvent(module_element,"click",callback);if(conf.track_right_click){U.rmEvent(module_element,"contextmenu",callback)}},getLinkAtPos:function(pos){if(pos>links.length){return null}return links[pos-1]},identifier:el_id};var callback=function(e){handleClick(e,module_object)};U.addEvent(module_element,"click",callback);if(conf.track_right_click){U.addEvent(module_element,"contextmenu",callback)}return module_object}function _beaconPageview(pp,generateNewSID,geoOnly){if(conf.ldbg){logDebug("beaconPageview called, pp="+U.fData(pp))}if(generateNewSID&&!conf.persist_asid){regenSid()}if(conf.USE_RAPID||conf.apv_always_send&&U.hasOwn(pp,"A_apv")){uploader.sendRapidNoDelay([],true,pp,null,geoOnly)}if(conf.ywa){var ywa_pp=PageParams.makeFromPP(conf.keys);ywa_pp.absorb(pp);uploader.sendYWAPV(ywa_pp.getAll())}if(conf.apv&&scrollManager!=null){scrollManager.reInit()}}function _beaconEvent(event,data,outcome,cb){if(conf.ldbg){logDebug('beaconEvent: event="'+event+'" data='+U.fData(data)+" outcome="+outcome)}var ev=CustomEvent(0,event,data,outcome);uploader.sendEvents(ev,cb)}var PubSub=function(){var subs={};return{subscribe:function(event,fun){var list=subs[event];if(!list){list=[];subs[event]=list}list.push(fun)},unsubscribe:function(event,fn){var list=subs[event];if(!list){return}for(var i=0;i<list.length;i++){if(list[i]===fn){list.splice(i,1);return}}},fire:function(event){var list=subs[event];if(!list){return}for(var i=0,len=list.length;i<len;i++){list[i].call(null)}}}}();var BrowserEvents={FOCUS:"focus",BLUR:"blur",BEFOREUNLOAD:"beforeunload",PAGEHIDE:"pagehide",HISTORYSTATECHANGED:"historystatechanged",NAVIGATE:"navigate"};function BrowserEventManager(){focusFun=function(e){PubSub.fire(BrowserEvents.FOCUS)},blurFun=function(e){PubSub.fire(BrowserEvents.BLUR)},unloadFun=function(e){PubSub.fire(BrowserEvents.BEFOREUNLOAD)};U.addEvent(window,BrowserEvents.FOCUS,focusFun);U.addEvent(window,BrowserEvents.BLUR,blurFun);if(U.isIOSSafari||U.isAndroid){U.addEvent(window,BrowserEvents.PAGEHIDE,unloadFun)}else{U.addEvent(window,BrowserEvents.BEFOREUNLOAD,unloadFun)}this.historyStateChanged=function(){PubSub.fire(BrowserEvents.HISTORYSTATECHANGED)}}function ViewabilityManager(){var timer=null,pageLoadTime=(new Date).getTime(),lastApvTime=pageLoadTime,pageLoadScrollY=U.getScrollY(),lastApvScrollY=-1,handleViewability=function(){var curScrollY=U.getScrollY(),scrollSize=lastApvScrollY===-1?curScrollY-pageLoadScrollY:curScrollY-lastApvScrollY,asd=scrollSize>0?0:1;if(Math.abs(scrollSize)>conf.viewability_px){modules_map.reevaluateModuleViewability();lastApvScrollY=curScrollY;lastApvTime=(new Date).getTime()}};var viewability_cb=function(){if(timer!=null){clearTimeout(timer)}var curTime=(new Date).getTime();if(curTime-pageLoadTime<conf.viewability_time){pageLoadScrollY=U.getScrollY();lastApvTime=curTime}timer=setTimeout(function(){handleViewability()},conf.viewability_time)};U.addEvent(window,"scroll",viewability_cb);this.reInit=function(){pageLoadScrollY=U.getScrollY();lastApvScrollY=-1;pageLoadTime=lastApvTime=(new Date).getTime()};this.destroy=function(){U.rmEvent(window,"scroll",viewability_cb)}}function ScrollManager(){var timer=null,pageLoadTime=lastApvTime=(new Date).getTime(),pageLoadScrollY=U.getScrollY(),lastApvScrollY=-1,handleScroll=function(){var curScrollY=U.getScrollY(),scrollSize=lastApvScrollY===-1?curScrollY-pageLoadScrollY:curScrollY-lastApvScrollY,asd=scrollSize>0?0:1;if(Math.abs(scrollSize)>conf.apv_px){var smPP={A_apv:1,A_apx:curScrollY,A_asd:asd};_beaconPageview(smPP,false,true);lastApvScrollY=curScrollY;lastApvTime=(new Date).getTime();if(conf.apv_callback){conf.apv_callback.call(this,{pixel_pos:curScrollY,scroll_dir:asd})}}};var scroll_callback=function(){if(timer!=null){clearTimeout(timer)}var curTime=(new Date).getTime();if(curTime-pageLoadTime<conf.apv_time){pageLoadScrollY=U.getScrollY();lastApvTime=curTime}timer=setTimeout(function(){handleScroll()},conf.apv_time)};U.addEvent(window,"scroll",scroll_callback);this.reInit=function(){pageLoadScrollY=U.getScrollY();lastApvScrollY=-1;pageLoadTime=lastApvTime=(new Date).getTime()};this.destroy=function(){U.rmEvent(window,"scroll",scroll_callback)}}function DwellManager(){var events={focus:{state:"start",etrg:"show",etag:"dwell,start",jse:"window.focus"},pageshow:{state:"start",etrg:"show",etag:"dwell,start",jse:"window.pageshow"},"visibilitychange-visible":{state:"start",etrg:"show",etag:"dwell,start",jse:"document.visibilitychange"},blur:{state:"stop",etrg:"hide",etag:"dwell,stop",jse:"window.blur"},pagehide:{state:"stop",etrg:"hide",etag:"dwell,stop",jse:"window.pagehide"},"visibilitychange-hidden":{state:"stop",etrg:"hide",etag:"dwell,stop",jse:"document.visibilitychange"},beforeunload:{state:"stop",etrg:"close",etag:"dwell,stop",jse:"window.beforeunload"}};var state="start";var hidden,visibilityChange;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange"}else if(typeof document.mozHidden!=="undefined"){hidden="mozHidden";visibilityChange="mozvisibilitychange"}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange"}var dwell_callback=function(e){var newstate="";var event_type=e.type;if(e.type==visibilityChange){if(document[hidden]){event_type="visibilitychange-hidden"}else{event_type="visibilitychange-visible"}}if(U.hasOwn(events,event_type)){newstate=events[event_type]["state"]}if(newstate.length==0){return}if(state==newstate){if(conf.ldbg){console.log("dwell: -- state already "+state+" (event="+event_type+")")}return}state=newstate;var ev=events[event_type];if(conf.ldbg){console.log("dwell: change state to "+state+" (event="+event_type+")")}var dmPP={etrg:ev["etrg"],outcm:"window",usergenf:1,etag:ev["etag"],A_jse:ev["jse"]};_beaconEvent("dwell",dmPP,"")};for(var event in events){if(events.hasOwnProperty(event)){U.addEvent(window,event,dwell_callback)}}U.addEvent(window,visibilityChange,dwell_callback);this.set_state=function(new_state){state=new_state};this.destroy=function(){for(var event in events){if(events.hasOwnProperty(event)){U.rmEvent(window,event,dwell_callback)}}U.rmEvent(window,visibilityChange,dwell_callback)}}var perf_data_time=0;function _beaconPerformanceData(perfDataObject){var timeout_value=10;if(!window.performance||!window.performance.timing){return}var perf_navigationtime=perfDataObject.perf_navigationtime||conf.perf_navigationtime||0;var perf_resourcetime=perfDataObject.perf_resourcetime||conf.perf_resourcetime||0;var perf_commontime=perfDataObject.perf_commontime||conf.perf_commontime||null;var perf_customtime=perfDataObject.perf_customtime||conf.perf_customtime||null;if(perf_navigationtime<1&&perf_resourcetime<1&&!perf_commontime&&!perf_customtime){return}var sampling_range_nav=U.hasOwn(conf.sample,"perf_navigationtime")?conf.sample.perf_navigationtime:100;var sampling_range_res=U.hasOwn(conf.sample,"perf_resourcetime")?conf.sample.perf_resourcetime:100;var nav_sample=U.samplingSuccess(sampling_range_nav);var res_sample=U.samplingSuccess(sampling_range_res);if(!nav_sample&&!res_sample){return}if(window.performance.timing.loadEventStart===0){perf_data_time+=timeout_value;if(perf_data_time>200){return}setTimeout(function(){_beaconPerformanceData(perfDataObject)},timeout_value);return}var pp=_buildPerfData(perf_navigationtime,perf_resourcetime,perf_commontime,perf_customtime,nav_sample,res_sample);var ev=CustomEvent(0,"pageperf",pp,"");uploader.sendEvents(ev)}function _buildPerfData(perf_navigationtime,perf_resourcetime,perf_commontime,perf_customtime,nav_sample,res_sample){var commontime_whitelist=new Array("atf","xatf","fl","fv");var rv={};var wpt=window.performance.timing;if(nav_sample&&perf_navigationtime>0){smartTimeDiff(wpt.responseStart,wpt.connectEnd,rv,"A_pfb");smartTimeDiff(wpt.responseEnd,wpt.responseStart,rv,"A_pbp");smartTimeDiff(wpt.responseEnd,wpt.requestStart,rv,"A_psr");smartTimeDiff(wpt.loadEventStart,wpt.navigationStart,rv,"A_pol");smartTimeDiff(wpt.domInteractive,wpt.navigationStart,rv,"A_pdi")}if(nav_sample&&perf_navigationtime>1){smartTimeDiff(wpt.redirectEnd,wpt.redirectStart,rv,"A_prd");smartTimeDiff(wpt.domainLookupEnd,wpt.domainLookupStart,rv,"A_pdl");smartTimeDiff(wpt.connectEnd,wpt.secureConnectionStart,rv,"A_psh");smartTimeDiff(wpt.connectEnd,wpt.connectStart,rv,"A_psc");smartTimeDiff(wpt.loadEventStart,wpt.responseEnd,rv,"A_pfe")}if(res_sample&&perf_resourcetime>0){if(typeof window.performance.getEntries!="undefined"){var resource_list=[];var entries=window.performance.getEntries();for(var i=0;i<entries.length;i++){var resource_obj={};var res_name=entries[i].name.replace(/^.+\//,"");resource_obj["name"]=res_name;resource_obj["dur"]=Math.floor(entries[i].duration);if(perf_resourcetime>1){resource_obj["st"]=Math.floor(entries[i].startTime)}resource_list.push(resource_obj)}rv["A_res"]=U.sfy(resource_list)}}if(perf_commontime){for(var i=0;i<commontime_whitelist.length;i++){if(U.hasOwn(perf_commontime,commontime_whitelist[i])){rv["A_c"+commontime_whitelist[i]]=perf_commontime[commontime_whitelist[i]]}}}if(perf_customtime){for(var field in perf_customtime){if(field.match(/^ctm[0-9]+/)){rv["A_"+field]=U.toJSON(perf_customtime[field])}}}rv["etrg"]="backgroundPost";rv["outcm"]="performance";rv["usergenf"]=0;rv["etag"]="performance";return rv}function smartTimeDiff(a,b,rv,field){if(!a||!b){return}var diff=a-b;rv[field]=diff}function _init(){handleULT();if(conf.ldbg){logDebug("tracked_mods: "+U.fData(conf.tracked_mods))}var newMods=modules_map.addModules(conf.tracked_mods,false);var visibilityMods=modules_map.addModules(conf.tracked_mods_viewability,conf.viewability);if(conf.USE_RAPID&&conf.pageview_on_init){uploader.sendRapidNoDelay(newMods.concat(visibilityMods),conf.client_only==1)}if(conf.ywa&&conf.pageview_on_init){uploader.sendYWAPV()}U.executeOnLoad(function(){viewabilityManager=new ViewabilityManager;if(conf.apv){scrollManager=new ScrollManager}if(conf.dwell_on){dwellManager=new DwellManager}_beaconPerformanceData({})})}function foo(){}_init();var __test_only__={utils:U};return{init:function(){},beaconEvent:function(event,data,outcome,cb){_beaconEvent(event,data,outcome,cb)},beaconClick:function(sec,slk,pos,opt_keys,outcome_name,callback){if(conf.ldbg){logDebug("beaconClick: sec="+sec+" slk="+slk+" callback="+callback)}if(!opt_keys&&outcome_name){opt_keys={}}if(outcome_name){opt_keys.outcm=outcome_name}uploader.sendClick(ManualClick(sec,slk,pos,opt_keys,outcome_name),callback)},addModules:function(mods,isPageview,options){if(conf.ldbg){logDebug("addModules() called: mods="+U.fData(mods)+" isPage: "+isPageview)}options=options||{};var amPP={A_am:1};if(options.pp){U.aug(amPP,options.pp)}options.useViewability=options.useViewability||false;options.clickonly=options.clickonly||false;var isInteraction=false;if(!isPageview)isPageview=options.useViewability?2:false;switch(isPageview){case 1:case"1":case true:isPageview=true;break;case 2:case"2":isInteraction=true;isPageview=false;options.event=CustomEvent("contentmodification","",{});break;case 0:case"0":case false:default:isPageview=false;break}if(!conf.yql_enabled){if(isPageview){_beaconPageview(amPP,false)}else if(options.event){this.beaconRichView(amPP,options.event.outcome)}return}if(options&&options.event&&isPageview){logError("Cannot track event type and pageview at same time.");options.event=null}var newMods=modules_map.addModules(mods,options.useViewability);if(newMods.length===0&&!options.event){return}if(options.clickonly){newMods=[]}if(conf.USE_RAPID||options.event){if(isPageview||options.event||options.pp){if(options.event&&options.event.data){U.aug(amPP,options.event.data)}uploader.sendRapidNoDelay(newMods,isPageview,amPP,options)}else{if(newMods.length>0){uploader.sendRapid(newMods,isPageview,amPP,options)}}}if(isPageview===true){if(conf.ywa){uploader.sendYWAPV(amPP)}if(conf.apv&&scrollManager){scrollManager.reInit()}}},addModulesWithViewability:function(mods,isPageview,options){options=options||{};options.useViewability=conf.viewability;this.addModules(mods,isPageview,options)},refreshModule:function(module,isPageView,shouldSendLinkviews,options){if(conf.ldbg){logDebug("refreshModule called: mod="+module+" isPV: "+isPageView+" sendLinks: "+shouldSendLinkviews+" options: "+U.fData(options))}var isInteraction=false;options=options||{};if(!isPageView)isPageView=false;switch(isPageView){case 1:case"1":case true:isPageView=true;break;case 2:case"2":isInteraction=true;isPageView=false;options.event=CustomEvent("contentmodification","",{});break;case 0:case"0":case false:default:isPageView=false;break}if(!conf.yql_enabled){var overloadedPP=options.pp||{};if(isPageView){_beaconPageview(overloadedPP,false)}else if(options.event){this.beaconRichView(overloadedPP,options.event.outcome)}return}var sendLinks=shouldSendLinkviews===false?false:true;if(isPageView&&options&&options.event){options.event=null}modules_map.refreshModule(module,isPageView,sendLinks,options)},removeModule:function(element_id_of_module){modules_map.removeModule(element_id_of_module)},isModuleTracked:function(element_id_of_module){if(conf.ldbg){logDebug("isTracked called: "+element_id_of_module)}return modules_map&&modules_map.exists(element_id_of_module)!==undefined},destroy:function(){logDebug("destroy called");modules_map.destroy();if(scrollManager){scrollManager.destroy();scrollManager=null}if(viewabilityManager){viewabilityManager.destroy();viewabilityManager=null}if(dwellManager){dwellManager.destroy();dwellManager=null}},reInit:function(newConfig){if(conf.ldbg){logDebug("reInit called with: "+U.fData(newConfig))}newConfig=newConfig||{};if(!newConfig.spaceid){logError("Invalid spid in reInit config: "+U.fData(newConfig));return}keys=new PageParams;conf=initConfig(newConfig);U=Utils(newConfig)},setRapidAttribute:function(attributes){if(attributes.keys){conf.keys.absorb(attributes.keys)}if(attributes.ywa){if(U.isObj(attributes.ywa)){for(var k in attributes.ywa){if(U.hasOwn(attributes.ywa,k)){conf.ywa[k]=attributes.ywa[k]}}}}if(attributes.spaceid){conf.spaceid=attributes.spaceid}if(attributes.referrer){conf.referrer=attributes.referrer.substring(0,U.MAX_VALUE_LENGTH)}if(attributes.A_sid){conf.keys.set("A_sid",attributes.A_sid);conf.persist_asid=true}if(attributes.location){conf.loc=attributes.location;conf.keys.set("_w",U.rmProto(attributes.location).substring(0,U.MAX_VALUE_LENGTH))}if(U.hasOwn(attributes,"apv")){if(attributes.apv){if(!scrollManager){scrollManager=new ScrollManager}else{scrollManager.reInit()}}else{if(scrollManager){scrollManager.destroy();scrollManager=null}}}},clearRapidAttribute:function(attributes){for(var elem in attributes){if(attributes[elem]==="keys"){var oldUrl=conf.keys.get("_w");var oldA_sid=conf.keys.get("A_sid");conf.keys=new PageParams;conf.keys.set("_w",oldUrl);conf.keys.set("A_sid",oldA_sid)}else if(attributes[elem]==="referrer"){conf.referrer=""}else if(attributes[elem]==="A_sid"){conf.keys.set("A_sid","");conf.persist_asid=true}else if(attributes[elem]==="location"){conf.loc="";conf.keys.set("_w","")}}},beaconPageview:function(pp){_beaconPageview(pp,true)},beaconECommerce:function(action,data){if(conf.ywa){uploader.sendYWAECommerce(action,data)}},beaconInternalSearch:function(searchTerm,numSearchResults){if(conf.ywa){uploader.sendInternalSearch(searchTerm,numSearchResults)}},getCurrentSID:function(){return keys.get("A_sid")},notifyHistoryPushStateCalled:function(){},beaconLinkViews:function(linkData,eventType,options,callback){if(conf.ldbg){logDebug("beaconLinkViews() called")}options=options||{};var blvPP={};if(options.pp){U.aug(blvPP,options.pp)}var isInteraction=false;var isPageview=false;switch(eventType){case 1:case"1":case true:isPageview=true;break;case 2:case"2":isInteraction=true;isPageview=false;options.event=CustomEvent("contentmodification","",{});break;case 0:case"0":case false:default:isPageview=false;break}if(!conf.yql_enabled){if(isPageview){_beaconPageview(blvPP,false)}else if(options.event){this.beaconRichView(blvPP,options.event.outcome)}return}if(options&&options.event&&isPageview){logError("Cannot track event type and pageview at same time.");options.event=null}if(linkData.length===0&&!options.event){return}var newMods=[];for(var i=0;i<linkData.length;i++){var module=linkData[i];var mod_ylk=new YLK;mod_ylk.absorb_filter(module,function(elem){return elem!="sec"&&elem!="_links"});var newLinks=[];var pos=1;for(var j=0;j<module._links.length;j++){var link=module._links[j];var newLink={viewable:true,data:{sec:module.sec,_p:pos++,A_lv:2}};U.aug(newLink.data,link);newLinks.push(newLink)}var newMod={moduleName:module.sec,moduleYLK:mod_ylk,links:newLinks,identifier:module.sec};newMods.push(newMod)}if(conf.USE_RAPID||options.event){if(isPageview||options.event||options.pp){if(options.event&&options.event.data){U.aug(blvPP,options.event.data)}}uploader.sendRapidNoDelay(newMods,isPageview,blvPP,options)}if(callback){callback.call()}},beaconPerformanceData:function(perfDataObject){_beaconPerformanceData(perfDataObject)},__test_only__:function(){return __test_only__}};function Utils(old_conf){var ua=navigator.userAgent,OP=Object.prototype,isIE=ua.match(/MSIE\s[^;]*/)||ua.match(/Trident\/[^;]*/)?1:0,isWebkit=/KHTML/.test(ua)?1:0,isIOS=ua.match(/(iPhone|iPad|iPod)/gi)!==null,isAndroid=ua.indexOf("Android")>-1,isIOSSafari=isIOS&&ua.match(/AppleWebKit/)!==null,isSafari=ua.match(/AppleWebKit/)!==null&&ua.match(/Chrome/)===null,garbage_regex=new RegExp(/\ufeff|\uffef|[\u0000-\u001f]|[\ue000-\uf8ff]/g),spaces_regex=new RegExp(/[\u007f-\u00a0]|\s{2,}/g),HTTP="http://",HTTPS="https://",KLASS="class",SPACE=" ",sampling_hash_mod=-1,MAX_VALUE_LENGTH=300,ieV=-1,isHTTPS=window.location.protocol==="https:";if(isIE){if(document.documentMode){ieV=document.documentMode}else{ieV=5;if(document.compatMode){if(document.compatMode=="CSS1Compat"){ieV=7}}}}return{$:function(elementId){return document.getElementById(elementId)},ca:"%01",cb:"%02",cc:"%03",cd:"%04",ce:"%05",cf:"%06",cg:"%07",ch:"%08",ylk_kv_delim:old_conf.ylk_kv_delim||":",ylk_pair_delim:old_conf.ylk_pair_delim||";",DATA_ACTION:"data-action",data_action_outcome:"data-action-outcome",isIE:isIE,isIOSSafari:isIOSSafari,isSafari:isSafari,isWebkit:isWebkit,ieV:ieV,MAX_VALUE_LENGTH:MAX_VALUE_LENGTH,hasOwn:function(obj,key){return OP.hasOwnProperty.call(obj,key)},enc:encodeURIComponent,dec:decodeURIComponent,curProto:function(){return isHTTPS?HTTPS:HTTP},isSecure:function(){return isHTTPS},isScrollHorizontalVisible:function(){return document.documentElement.scrollWidth>document.documentElement.clientWidth},getCompStyle:function(el,pseudo){if(window.getComputedStyle!==undefined){return window.getComputedStyle(el,pseudo)}this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop=="float"){prop="styleFloat"}if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase()})}return el.currentStyle[prop]?el.currentStyle[prop]:0};return this},getBorder:function(element,attribute){if(!element||!attribute){return 0}var val=parseInt(this.getCompStyle(element,null).getPropertyValue(attribute),10);if(isNaN(val)){val=0}return val},getElementHeight:function(element){if(!element){return 0}var offHeight=element.offsetHeight||0;if(!offHeight){return 0}return offHeight-this.getBorder(element,"border-top-width")-this.getBorder(element,"border-bottom-width")},getPositionTop:function(element){var offset=0;while(element){offset+=element["offsetTop"];element=element.offsetParent}return offset},getScrollbarWidthHeight:function(){var div=this.make("div");div.style.overflow="scroll";div.style.visibility="hidden";div.style.position="absolute";div.style.width="100px";div.style.height="100px";document.body.appendChild(div);var rv={width:div.offsetWidth-div.clientWidth,height:div.offsetHeight-div.clientHeight};this.rmBodyEl(div);return rv},isAboveFold:function(element){if(isIE&&ieV<=7){return true}var r=element.getBoundingClientRect();var elementHeight=this.getElementHeight(element);var percentageHeight=elementHeight*.5;if(r.top+percentageHeight<0){return false}var windowInnerHeight=window.innerHeight||document.documentElement.clientHeight;if(this.isScrollHorizontalVisible()){var size=this.getScrollbarWidthHeight();windowInnerHeight-=size.height}if(r.bottom-percentageHeight<=windowInnerHeight){return true}},strip:function(u){var delims={"/":"P",";":"1","?":"P","&":"1","#":"P"};var data={url:u,clean:"",cookie:"",keys:[]};var idx=0;while(u.indexOf("_yl",idx)!==-1){var start=u.indexOf("_yl",idx);if(idx<start){data.clean+=u.slice(idx,start-1)}idx=start+3;if(delims[u.charAt(start-1)]&&u.charAt(start+4)==="="){data.ult=1;var key="_yl"+u.charAt(start+3);var value="";for(start=start+5;start<u.length&&!delims[u.charAt(start)];start++){value+=u.charAt(start)}data.keys.push(key);data[key]=value;if(key!=="_ylv"){data.cookie+="&"+key+"="+value}if(delims[u.charAt(start)]&&delims[u.charAt(start)]==="P"){data.clean+=u.charAt(start)}idx=start+1}else{data.clean+=u.slice(start-1,idx)}}if(data.ult){data.cookie=data.cookie.substr(1);data.clean+=u.substr(idx);if(data._ylv==="0"){}}return data},prevDef:function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},appBodyEl:function(element){document.body.appendChild(element)},rmBodyEl:function(element){document.body.removeChild(element)},sa:function(node,attr,val){node.setAttribute(attr,val)},getScrollY:function(){var y=window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return y},make:function(name,attrs){var el=document.createElement(name);if(attrs&&this.isObj(attrs)){for(var k in attrs){this.sa(el,k,attrs[k])}}return el},getXHR:function(){var factories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function createXMLHTTPObject(){var xmlhttp=false,len=factories.length;for(var i=0;i<len;i++){try{xmlhttp=factories[i]()}catch(e){continue}break}return xmlhttp}return createXMLHTTPObject()},hasLS:function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}},hasCORS:function(){if(isIE&&ieV<10){return false}if("withCredentials"in new XMLHttpRequest){return true}else if(typeof XDomainRequest!=="undefined"){return true}return false},hasWorkers:function(){return!!window.Worker},clearCookie:function(name,path,domain){path=path?path:"/";domain=domain?domain:"";document.cookie=name+"= ; path="+path+"; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Domain="+domain+";"},uniqConcat:function(a,b,func){var rv=[],map={};function loop(arr){for(var i=0,len=arr.length;i<len;i++){var obj=arr[i];if(!obj){continue}var id=func(obj);if(!map[id]){map[id]=1;rv.push(obj)}}}loop(a);loop(b);return rv},trim:function(s){if(!s){return s}return s.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},extDomain:function(url){var matches=url.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return matches&&matches[1]},getAttribute:function(el,attr){var rv="";if(!document.documentElement.hasAttribute&&attr===KLASS){attr="className"}if(el&&el.getAttribute){rv=el.getAttribute(attr,2)}return rv},isDate:function(o){return OP.toString.call(o)==="[object Date]"},isArr:function(o){return OP.toString.apply(o)==="[object Array]"},isStr:function(o){return typeof o==="string"},isNum:function(o){return typeof o==="number"&&isFinite(o)},isNumeric:function(input){return input-0==input&&(input+"").replace(/^\s+|\s+$/g,"").length>0},isObj:function(o){return o&&typeof o==="object"},rTN:function(n){try{if(n&&3===n.nodeType){return n.parentNode}}catch(e){logError(e)}return n},getTarget:function(e){var t=e.target||e.srcElement;return this.rTN(t)},addEvent:function(obj,evt,fn){if(obj.addEventListener){obj.addEventListener(evt,fn,false)}else if(obj.attachEvent){obj.attachEvent("on"+evt,fn)}},rmEvent:function(obj,evt,fn){if(obj.removeEventListener){obj.removeEventListener(evt,fn,false)}else if(obj.detachEvent){obj.detachEvent("on"+evt,fn)}},aug:function(r,s,f){if(!s){return}for(var i in s){if(this.hasOwn(s,i)){if(f&&!f.call(null,i)){continue}r[i]=s[i]}}},rmProto:function(u){if(!u){return""}if(u.substr(0,7)===HTTP){return u.substr(7,u.length)}if(u.substr(0,8)===HTTPS){return u.substr(8,u.length)}return u},norm:function(l){if(l===null){return""}l=""+l;return this.trim(l.replace(spaces_regex," ").replace(garbage_regex,""))},_hasClass:function(el,className){var rv=false,current;if(el&&className){current=this.getAttribute(el,KLASS)||"";if(className.exec){rv=className.test(current)}else{rv=className&&(SPACE+current+SPACE).indexOf(SPACE+className+SPACE)>-1}}return rv},hasClass:function(el,className){if(this.isArr(className)){for(var i=0,len=className.length;i<len;i++){if(this._hasClass(el,className[i])){return true}}return false}else if(this.isStr(className)){return this._hasClass(el,className)}else{return false}},quote:function(s){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,lookup={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},DQ='"',EDQ='"';if(s.match(escape)){var rv=s.replace(escape,function(c){var cur=lookup[c];if(typeof cur==="string"){return cur}cur=c.charCodeAt();return"\\u00"+Math.floor(cur/16).toString(16)+(c%16).toString(16)});return DQ+rv+DQ}return EDQ+s+EDQ},sfy:function(o){if(!o&&o!==""){return{}}var parts,type=typeof o;if(type==="undefined"){return"undefined"}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return this.quote(o)}if(typeof o.toJSON==="function"){return this.sfy(o.toJSON())}if(this.isDate(o)){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"';

}parts=[];if(this.isArr(o)){for(var i=0,len=o.length;i<len;i++){parts.push(this.sfy(o[i]))}return"["+parts.join(",")+"]"}if(type==="object"){for(var key in o){if(this.hasOwn(o,key)){var localType=typeof key,name=null;if(localType==="string"){name=this.quote(key)}else if(localType==="number"){name='"'+key+'"'}else{continue}localType=typeof o[key];if(localType!=="function"&&localType!=="undefined"){var value="";if(o[key]===null){value='""'}else if(o[key]===0){value=0}else{value=this.sfy(o[key])}parts.push(name+":"+value)}}}return"{"+parts.join(",")+"}"}},toJSON:function(){var f=null;return function(o){if(!f){f=typeof JSON==="object"&&JSON.stringify&&ieV!==6&&ieV!==7&&ieV!==8?JSON.stringify:this.sfy}return f.call(this,o)}}(),executeOnLoad:function(callback){var isReady=false,completed=function(event){if(document.addEventListener||event&&event.type==="load"||document.readyState==="complete"){isReady=true;detachOnLoad();callback.call(this)}},detachOnLoad=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false)}else{document.detachEvent("onreadystatechange",completed);window.detachEvent("onload",completed)}};if(document.readyState==="complete"){setTimeout(completed)}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}else{document.attachEvent("onreadystatechange",completed);window.attachEvent("onload",completed);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll){(function doScrollCheck(){if(!isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detachOnLoad();callback.call(this)}})()}}},getLinkContent:function(l){for(var i=0,s="",o;(o=l.childNodes[i])&&o;i++){if(o.nodeType===1){if(o.nodeName.toLowerCase()==="img"){s+=(this.getAttribute(o,"alt")||"")+" "}s+=this.getLinkContent(o)}}return s},fData:function(o){if(this.isStr(o)){return o}return this.toJSON(o)},getLT:function(l,type){if(!l){return"_"}var rv="";type=type.toLowerCase();if(l.nodeName.toLowerCase()==="input"){rv=this.getAttribute(l,"value")}else if(type==="text"){if(isWebkit){rv=l.textContent}else{rv=l.innerText?l.innerText:l.textContent}}else if(type==="href"){rv=this.rmProto(this.getAttribute(l,"href"))}else{rv=this.getAttribute(l,type)||""}rv=this.norm(rv);if(rv===""){rv=this.norm(this.getLinkContent(l))}if(rv&&rv.length>U.MAX_VALUE_LENGTH){rv=rv.substring(0,U.MAX_VALUE_LENGTH)}return rv===""?"_":rv},clref:function(r){if(r.indexOf(HTTP)!==0&&r.indexOf(HTTPS)!==0){return""}var rv=this.strip(r);return rv.clean||rv.url},cold:function(){if(screen){return screen.colorDepth||screen.pixelDepth}return"unknown"},sr:function(delim){return screen?screen.width+(delim?delim:",")+screen.height:""},xy:function(e){function gs(){var dd=document.documentElement,db=document.body;if(dd&&(dd.scrollTop||dd.scrollLeft)){return[dd.scrollTop,dd.scrollLeft]}else if(db){return[db.scrollTop,db.scrollLeft]}else{return[0,0]}}var ie_d=null,x=e.pageX,y=e.pageY;if(isIE){ie_d=gs()}if(!x&&0!==x){x=e.clientX||0;if(isIE){x+=ie_d[1]}}if(!y&&0!==y){y=e.clientY||0;if(isIE){y+=ie_d[0]}}return x+","+y},hasCC:function(s){for(var i=0,l=s.length;i<l;i++){var c=s.charCodeAt(i);if(c<32||c==="="){return true}}return false},isValidPair:function(k,v){if(k.length>8||v.length>U.MAX_VALUE_LENGTH){logWarning("Invalid key/value pair ("+k+"="+v+") Size must be < 8/300 respectively.");return false}return true},ser:function(o,replace_empty_string){if(!o){return""}if(typeof replace_empty_string===undefined){replace_empty_string=true}var rv=[],encoded="";for(var i in o){if(this.hasOwn(o,i)){var k=i,v=o[i];if(k===null||v===null){continue}k=k+"";v=v+"";if(v&&v.length>U.MAX_VALUE_LENGTH){v=v.substring(0,U.MAX_VALUE_LENGTH)}if(!this.isValidPair(k,v)){continue}if(!this.hasCC(k)&&!this.hasCC(v)){encoded="";v=this.trim(v);if((v===""||v===" ")&&replace_empty_string){v="_"}try{encoded=this.enc(k+""+v);encoded=encoded.replace(/'/g,"%27")}catch(e){encoded="_ERR_ENCODE_";logError(e)}rv.push(encoded)}}}return rv.join(this.cd)},rand:function(){var index=0,s="",c="";while(index++<16){var n=Math.floor(Math.random()*62);if(n<10){c=n}else{c=String.fromCharCode(n<36?n+55:n+61)}s+=c}return s},tms:function(){return+new Date},cookEn:function(){var ce=navigator.cookieEnabled?1:0,name="rapidtc";if(typeof navigator.cookieEnabled=="undefined"&&!ce){document.cookie=name+"=1";ce=document.cookie.indexOf("testcookie")!=-1?true:false;document.cookie=name+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}return ce},isResCF:function(num){var reserved_cf={14:1,15:1,18:1,19:1,20:1};return reserved_cf[num]},isTagOfInterest:function(obj,tags){for(var i=0,ilen=tags.length;i<ilen;i++){if(obj.tagName&&obj.tagName.toLowerCase()==tags[i].toLowerCase()){return true}}return false},samplingSuccess:function(range){var hashFNV32=function(s){var offset=33554467,hash=offset;for(var i=0,len=s.length;i<len;i++){hash+=(hash<<1)+(hash<<4)+(hash<<7)+(hash<<8)+(hash<<24);hash^=s.charCodeAt(i)}if(hash<0){hash&=2147483647;hash+=2147483648}return hash},doSample=function(range){var SAMPLING_BASE=1e3;range*=10;var cooks=new CookieMap;var bcookie_val=""+cooks.getCookieByName("B");if(!bcookie_val)return false;if(sampling_hash_mod<0){sampling_hash_mod=hashFNV32(bcookie_val)%SAMPLING_BASE}return sampling_hash_mod<range};return doSample(range)}}}};